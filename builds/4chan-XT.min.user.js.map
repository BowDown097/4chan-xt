{"version":3,"file":"4chan-XT.min.user.js","sources":["../../../../src/globals/globals.ts","../src/classes/Callbacks.js","../src/config/Config.js","../src/Monitoring/Favicon.js","../src/platform/$$.js","../src/Posting/Captcha.replace.js","../src/Posting/Captcha.t.js","../../../../src/platform/helpers.ts","../src/classes/DataBoard.js","../../../../src/classes/SimpleDict.ts","../../../../src/classes/Thread.ts","../src/classes/CatalogThread.js","../src/General/UI.js","../src/Miscellaneous/Nav.js","../src/Images/ImageHost.js","../src/Images/Volume.js","../src/Images/ImageCommon.js","../../../../src/Images/Audio.ts","../../../../src/globals/jsx.ts","../../../../src/Icons/icon.ts","../../../../src/Images/ImageExpand.ts","../../../../src/classes/Post.ts","../src/Menu/Menu.js","../../../../src/Filtering/Recursive.ts","../../../../src/Filtering/PostHiding.ts","../../../../src/Miscellaneous/RelativeDates.ts","../src/General/BoardConfig.js","../../../../src/classes/Board.ts","../src/Posting/PostRedirect.js","../src/Miscellaneous/ExpandComment.js","../src/Quotelinks/QuoteYou.js","../src/classes/RandomAccessList.js","../src/Monitoring/Unread.js","../src/Miscellaneous/ExpandThread.js","../src/Monitoring/UnreadIndex.js","../src/Monitoring/ThreadWatcher.js","../../../../src/Archive/Parse.ts","../src/Monitoring/ReplyPruning.js","../../../../src/Quotelinks/QuoteThreading.ts","../../../../src/classes/Fetcher.ts","../src/Quotelinks/QuotePreview.js","../src/General/Index.js","../src/Filtering/ThreadHiding.js","../../../../src/General/Settings/SettingsHtml.tsx","../../../../src/css/CSS.ts","../../../../src/css/style.ts","../src/Miscellaneous/CustomCSS.js","../../../../src/Miscellaneous/PassMessage/PassMessageHtml.tsx","../src/Miscellaneous/PassMessage.js","../src/Miscellaneous/Report.js","../src/Posting/PostSuccessful.js","../../../../src/site/SW.yotsuba.tsx","../../../../src/site/SW.yotsuba.Build/PostInfoHtml.tsx","../../../../src/site/SW.yotsuba.Build/FileHtml.tsx","../../../../src/site/SW.yotsuba.Build/CatalogThreadHtml.tsx","../src/site/SW.tinyboard.js","../src/site/SW.js","../../../../src/Miscellaneous/FileInfo.tsx","../../../../src/Miscellaneous/Time.ts","../../../../src/Monitoring/ThreadUpdater.ts","../../../../src/General/Settings.tsx","../src/Images/FappeTyme.js","../src/Images/Sauce.js","../src/Images/Gallery.js","../src/Linkification/Embedding.js","../src/Miscellaneous/Keybinds.js","../src/Posting/Captcha.js","../../../../src/Posting/QR.ts","../src/platform/CrossOrigin.js","../../../../src/platform/$.ts","../src/General/Get.js","../../../../src/Filtering/Filter.ts","../src/site/Site.js","../src/Miscellaneous/CatalogLinks.js","../../../../src/General/Header.ts","../src/classes/Notice.js","../../../../src/Archive/Redirect.ts","../src/classes/CatalogThreadNative.js","../src/Filtering/Anonymize.js","../src/Images/ImageHover.js","../src/Images/ImageLoader.js","../src/Images/Metadata.js","../src/Images/RevealSpoilers.js","../src/Linkification/Linkify.js","../src/Menu/ArchiveLink.js","../src/Menu/CopyTextLink.js","../src/Menu/DeleteLink.js","../src/Menu/DownloadLink.js","../src/Menu/ReportLink.js","../src/Miscellaneous/AntiAutoplay.js","../src/Miscellaneous/Banner.js","../src/Miscellaneous/Flash.js","../src/Miscellaneous/Fourchan.js","../src/Miscellaneous/IDColor.js","../src/Miscellaneous/IDHighlight.js","../src/Miscellaneous/IDPostCount.js","../src/Miscellaneous/ModContact.js","../src/Miscellaneous/NormalizeURL.js","../src/Miscellaneous/PostJumper.js","../src/Miscellaneous/PSA.js","../src/Miscellaneous/PSAHiding.js","../src/Miscellaneous/RemoveSpoilers.js","../src/Miscellaneous/ThreadLinks.js","../src/Miscellaneous/Tinyboard.js","../src/Monitoring/MarkNewIPs.js","../src/Monitoring/ThreadStats.js","../src/Posting/PassLink.js","../src/Quotelinks/QuoteInline.js","../src/Quotelinks/QuoteBacklink.js","../src/Quotelinks/QuoteCT.js","../src/Quotelinks/QuoteOP.js","../src/Quotelinks/Quotify.js","../src/General/Polyfill.js","../../../../src/Archive/RestoreDeletedFromArchive.ts","../src/main/Main.js","../src/Quotelinks/QuoteStrikeThrough.js"],"sourcesContent":[null,"import Main from \"../main/Main\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class Callbacks {\n  static initClass() {\n    this.Post          = new Callbacks('Post');\n    this.Thread        = new Callbacks('Thread');\n    this.CatalogThread = new Callbacks('Catalog Thread');\n    this.CatalogThreadNative = new Callbacks('Catalog Thread');\n  }\n\n  constructor(type) {\n    this.type = type;\n    this.keys = [];\n  }\n\n  push({name, cb}) {\n    if (!this[name]) { this.keys.push(name); }\n    return this[name] = cb;\n  }\n\n  execute(node, keys=this.keys, force=false) {\n    let errors;\n    if (node.callbacksExecuted && !force) { return; }\n    node.callbacksExecuted = true;\n    for (var name of keys) {\n      try {\n        this[name]?.call(node);\n      } catch (err) {\n        if (!errors) { errors = []; }\n        errors.push({\n          message: ['\"', name, '\" crashed on node ', this.type, ' No.', node.ID, ' (', node.board, ').'].join(''),\n          error: err,\n          html: node.nodes?.root?.outerHTML\n        });\n      }\n    }\n\n    if (errors) { return Main.handleErrors(errors); }\n  }\n}\nCallbacks.initClass();\n","import userCss from './user.css';\nimport banners from './banners.json';\nimport meta from '../../package.json';\n\nconst Config = {\n  main: {\n    'Miscellaneous': {\n      'Redirect to HTTPS': [\n        true,\n        'Redirect to the HTTPS version of 4chan.'\n      ],\n      'JSON Index': [\n        true,\n        'Replace the original board index with one supporting searching, sorting, infinite scrolling, and a catalog mode.'\n      ],\n      [`Use ${meta.name} Catalog`]: [\n        true,\n        `Link to ${meta.name}'s catalog instead of the native 4chan one.`,\n        1\n      ],\n      'Index Refresh Notifications': [\n        false,\n        'Show a notice at the top of the page when the index is refreshed.',\n        1\n      ],\n      'Follow Cursor': [\n        true,\n        'Image Hover and Quote Preview move with the mouse cursor.'\n      ],\n      'Open Threads in New Tab': [\n        false,\n        `Make links to threads in the index / ${meta.name} catalog open in a new tab.`\n      ],\n      'External Catalog': [\n        false,\n        'Link to external catalog instead of the internal one.'\n      ],\n      'Catalog Links': [\n        false,\n        'Add toggle link in header menu to turn Navigation links into links to each board\\'s catalog.'\n      ],\n      'Announcement Hiding': [\n        true,\n        'Add button to hide 4chan announcements.'\n      ],\n      'Desktop Notifications': [\n        true,\n        `Enables desktop notifications across various ${meta.name} features.`\n      ],\n      '404 Redirect': [\n        true,\n        'Redirect dead threads and images to the archives.'\n      ],\n      'Archive Report': [\n        true,\n        'Enable reporting posts to supported archives.'\n      ],\n      'Exempt Archives from Encryption': [\n        false,\n        'Permit loading content from, and warningless redirects to, HTTP-only archives from HTTPS pages.'\n      ],\n      'Keybinds': [\n        true,\n        'Bind actions to keyboard shortcuts.'\n      ],\n      'Time Formatting': [\n        true,\n        'Localize and format timestamps. Has more options on the \"Advanced\" tab.'\n      ],\n      'Comment Expansion': [\n        true,\n        'Expand comments that are too long to display on the index. Not applicable with JSON Index.'\n      ],\n      'File Info Formatting': [\n        true,\n        'Reformat the file information.'\n      ],\n      'Thread Expansion': [\n        true,\n        'Add buttons to expand threads.'\n      ],\n      'Index Navigation': [\n        false,\n        'Add buttons to navigate between threads.'\n      ],\n      'Reply Navigation': [\n        false,\n        'Add buttons to navigate to top / bottom of thread.'\n      ],\n      'Unique ID and Capcode Navigation': [\n        false,\n        'Add buttons to navigate to posts having the same unique ID or capcode.'\n      ],\n      'Custom Board Titles': [\n        true,\n        'Allow editing of the board title and subtitle by ctrl/\\u2318+clicking them.'\n      ],\n      'Persistent Custom Board Titles': [\n        false,\n        'Force custom board titles to be persistent, even if the board titles are updated.',\n        1\n      ],\n      'Show Updated Notifications': [\n        true,\n        `Show notifications when ${meta.name} is successfully updated.`\n      ],\n      'Color User IDs': [\n        true,\n        'Assign unique colors to user IDs on boards that use them'\n      ],\n      'Count Posts by ID': [\n        true,\n        'Display number of posts in the thread when hovering over an ID.'\n      ],\n      'Remove Spoilers': [\n        false,\n        'Remove all spoilers in text.'\n      ],\n      'Reveal Spoilers': [\n        false,\n        'Indicate spoilers if Remove Spoilers is enabled, or make the text appear hovered if Remove Spoiler is disabled.'\n      ],\n      'Normalize URL': [\n        true,\n        'Rewrite the URL of the current page, removing slugs and excess slashes, and changing /res/ to /thread/.'\n      ],\n      'Work around CORB Bug': [\n        true,\n        'Leave this checked until your garbage browser is fixed.'\n      ],\n      'Disable Autoplaying Sounds': [\n        false,\n        'Prevent sounds on the page from autoplaying.'\n      ],\n      'Disable Native Extension': [\n        true,\n        `${meta.name} is NOT designed to work with the native extension.`\n      ],\n      'Enable Native Flash Embedding': [\n        true,\n        'Activate the native extension\\'s Flash embedding if the native extension is disabled.'\n      ]\n    },\n\n    'Linkification': {\n      'Linkify': [\n        true,\n        'Convert text into links where applicable.'\n      ],\n      'Link Title': [\n        true,\n        'Replace the link of a supported site with its actual title.',\n        1\n      ],\n      'Link Title in the catalog': [\n        false,\n        'Replace the link of a supported site with its actual title in the catalog too. ' +\n          'Speed up performance for boards that have many embeds (e.g /vt/) if turned off',\n        2\n      ],\n      'Cover Preview': [\n        true,\n        'Show preview of supported links on hover.',\n        1\n      ],\n      'Embedding': [\n        true,\n        'Embed supported services. Note: Some services don\\'t work on HTTPS.',\n        1\n      ],\n      'Auto-embed': [\n        false,\n        'Auto-embed Linkify Embeds.',\n        2\n      ],\n      'Floating Embeds': [\n        false,\n        'Embed content in a frame that remains in place when the page is scrolled.',\n        2\n      ]\n    },\n\n    'Filtering': {\n      'Anonymize': [\n        false,\n        'Make everyone Anonymous.'\n      ],\n      'Filter': [\n        true,\n        'Self-moderation placebo.'\n      ],\n      'Filtered Backlinks': [\n        false,\n        'When enabled, shows backlinks to filtered posts with a line-through decoration. Otherwise, hides the backlinks.',\n        1\n      ],\n      'Filter in Native Catalog': [\n        true,\n        'Apply 4chan X filters in native catalog.',\n        1\n      ],\n      'MD5 Quick Filter Notifications': [\n        true,\n        'Show notification when quick filtering MD5s using the button or keybind.',\n        1\n      ],\n      'MD5 Quick Filter in the Catalog': [\n        true,\n        'Quick filter by MD5 when clicking a thumbnail in the catalog and holding Shift. Disabling falls back on just hiding the thread.',\n        1\n      ],\n      'MD5 Quick Filter in Threads': [\n        true,\n        'Quick filter by MD5 when clicking a thumbnail in a thread while holding shift.',\n        1\n      ],\n      'Recursive Hiding': [\n        true,\n        'Hide replies of hidden posts, recursively.'\n      ],\n      'Thread Hiding Buttons': [\n        true,\n        'Add buttons to hide entire threads.'\n      ],\n      'Reply Hiding Buttons': [\n        true,\n        'Add buttons to hide single replies.'\n      ],\n      'Stubs': [\n        true,\n        'Show stubs of hidden threads / replies.'\n      ]\n    },\n\n    'Images and Videos': {\n      'Image Expansion': [\n        true,\n        'Expand images / videos.'\n      ],\n      'Image Hover': [\n        true,\n        'Show full image / video on mouseover.'\n      ],\n      'Image Hover in Catalog': [\n        true,\n        `Show full image / video on mouseover in ${meta.name} catalog.`\n      ],\n      'Gallery': [\n        true,\n        'Adds a simple and cute image gallery. Has more options in the gallery menu.'\n      ],\n      'Fullscreen Gallery': [\n        false,\n        'Open gallery in fullscreen mode.',\n        1\n      ],\n      'PDF in Gallery': [\n        false,\n        'Show PDF files in gallery.',\n        1\n      ],\n      'Sauce': [\n        true,\n        'Add sauce links to images.'\n      ],\n      'WEBM Metadata': [\n        true,\n        'Add link to fetch title metadata from webm videos.'\n      ],\n      'Reveal Spoiler Thumbnails': [\n        false,\n        'Replace spoiler thumbnails with the original image.'\n      ],\n      'Replace GIF': [\n        false,\n        'Replace gif thumbnails with the actual image.'\n      ],\n      'Replace JPG': [\n        false,\n        'Replace jpg thumbnails with the actual image.'\n      ],\n      'Replace PNG': [\n        false,\n        'Replace png thumbnails with the actual image.'\n      ],\n      'Replace WEBM': [\n        false,\n        'Replace webm, mp4, and ogv thumbnails with the actual video. Probably will degrade browser performance ;)'\n      ],\n      'Image Prefetching': [\n        true,\n        'Add a shortcut icon to the header to turn on image preloading.'\n      ],\n      'Fappe Tyme': [\n        true,\n        'Hide posts without images when header menu item is checked. *hint* *hint*'\n      ],\n      'Werk Tyme': [\n        true,\n        'Hide all post images when header menu item is checked.'\n      ],\n      'Autoplay': [\n        true,\n        'Videos begin playing immediately when opened.'\n      ],\n      'Restart when Opened': [\n        false,\n        'Restart GIFs and WebMs when you hover over or expand them.'\n      ],\n      'Show Controls': [\n        true,\n        'Show controls on videos expanded inline.'\n      ],\n      'Click Passthrough': [\n        false,\n        'Clicks on videos trigger your browser\\'s default behavior. Videos can be contracted with button / dragging to the left.',\n        1\n      ],\n      'Allow Sound': [\n        true,\n        'Open videos with the sound unmuted.'\n      ],\n      'Mouse Wheel Volume': [\n        true,\n        'Adjust volume of videos with the mouse wheel over the thumbnail/filename/gallery.'\n      ],\n      'Loop in New Tab': [\n        true,\n        'Loop videos opened in their own tabs.'\n      ],\n      'Volume in New Tab': [\n        true,\n        `Apply ${meta.name} mute and volume settings to videos opened in their own tabs.`\n      ],\n      'Enable sound posts': [\n        true,\n        'Enable loading audio from [sound=] file names. This audio is fetched from third parties.'\n      ],\n    },\n\n    'Menu': {\n      'Menu': [\n        true,\n        'Add a drop-down menu to posts.'\n      ],\n      'Report Link': [\n        true,\n        'Add a report link to the menu.',\n        1\n      ],\n      'Copy Text Link': [\n        true,\n        'Add a link to copy the post\\'s text.',\n        1\n      ],\n      'Thread Hiding Link': [\n        true,\n        'Add a link to hide entire threads.',\n        1\n      ],\n      'Reply Hiding Link': [\n        true,\n        'Add a link to hide single replies.',\n        1\n      ],\n      'Delete Link': [\n        true,\n        'Add post and image deletion links to the menu.',\n        1\n      ],\n      'Archive Link': [\n        true,\n        'Add an archive link to the menu.',\n        1\n      ],\n      'Edit Link': [\n        true,\n        'Add a link to edit the image in Tegaki, /i/\\'s painting program. Requires Quick Reply.',\n        1\n      ],\n      'Download Link': [\n        false,\n        'Add a download with original filename link to the menu.',\n        1\n      ]\n    },\n\n    'Monitoring': {\n      'Thread Updater': [\n        true,\n        'Fetch and insert new replies. Has more options in the header menu and the \"Advanced\" tab.'\n      ],\n      'Unread Count': [\n        true,\n        'Show the unread posts count in the tab title.'\n      ],\n      'Quoted Title': [\n        false,\n        'Change the page title to reflect you\\'ve been quoted.',\n        1\n      ],\n      'Hide Unread Count at (0)': [\n        false,\n        'Hide the unread posts count in the tab title when it reaches 0.',\n        1\n      ],\n      'Unread Favicon': [\n        true,\n        'Show a different favicon when there are unread posts.'\n      ],\n      'Unread Line': [\n        true,\n        'Show a line to distinguish read posts from unread ones.'\n      ],\n      'Remember Last Read Post': [\n        true,\n        'Remember how far you\\'ve read after you close the thread.'\n      ],\n      'Scroll to Last Read Post': [\n        true,\n        'Scroll back to the last read post when reopening a thread.',\n        1\n      ],\n      'Unread Line in Index': [\n        false,\n        'Show a line between read and unread posts in threads in the index.',\n        1\n      ],\n      'Remove Thread Excerpt': [\n        false,\n        'Replace the excerpt of the thread in the tab title with the board title.'\n      ],\n      'Thread Stats': [\n        true,\n        'Display reply and image count.'\n      ],\n      'IP Count in Stats': [\n        true,\n        'Display the unique IP count in the thread stats.',\n        1\n      ],\n      'Page Count in Stats': [\n        true,\n        'Display the page count in the thread stats.',\n        1\n      ],\n      'Purge Position': [\n        false,\n        'Update stats more often and add purge position when a thread is close to getting purged, for anons who manage general threads.',\n        2\n      ],\n      'Updater and Stats in Header': [\n        true,\n        'Places the thread updater and thread stats in the header instead of floating them.'\n      ],\n      'Thread Watcher': [\n        true,\n        'Bookmark threads. Has more options in the thread watcher menu.'\n      ],\n      'Fixed Thread Watcher': [\n        true,\n        'Makes the thread watcher scroll with the page.',\n        1\n      ],\n      'Persistent Thread Watcher': [\n        false,\n        'The thread watcher will be visible when the page is loaded.',\n        1\n      ],\n      'Mark New IPs': [\n        false,\n        'Label each post from a new IP with the thread\\'s current IP count.'\n      ],\n      'Reply Pruning': [\n        true,\n        'Add option in header menu to hide old replies in long threads. Activated by default in stickies.'\n      ],\n      'Prune All Threads': [\n        false,\n        'Activate Reply Pruning by default in all threads.',\n        1\n      ]\n    },\n\n    'Posting and Captchas': {\n      'Quick Reply': [\n        true,\n        'All-in-one form to reply, create threads, automate dumping and more.'\n      ],\n      'Persistent QR': [\n        false,\n        'The Quick reply won\\'t disappear after posting.',\n        1\n      ],\n      'Auto Hide QR': [\n        true,\n        'Automatically hide the quick reply when posting.',\n        2\n      ],\n      'Open Post in New Tab': [\n        true,\n        'Open new threads in a new tab, and open replies in a new tab if you\\'re not already in the thread.',\n        1\n      ],\n      'Remember QR Size': [\n        false,\n        'Remember the size of the Quick reply.',\n        1\n      ],\n      'Remember Spoiler': [\n        false,\n        'Remember the spoiler state, instead of resetting after posting.',\n        1\n      ],\n      'Randomize Filename': [\n        false,\n        'Set the filename to a random timestamp within the past year. Disabled on /f/.',\n        1\n      ],\n      'Show New Thread Option in Threads': [\n        true,\n        'Show the option to post a new / different thread from inside a thread.',\n        1\n      ],\n      'Show Upload Progress': [\n        true,\n        'Track progress of file uploads as percentage in submit button.',\n        1\n      ],\n      'Cooldown': [\n        true,\n        'Indicate the remaining time before posting again.',\n        1\n      ],\n      'Posting Success Notifications': [\n        true,\n        'Show notifications on successful post creation or file uploading.',\n        1\n      ],\n      'Auto-load captcha': [\n        false,\n        'Automatically load the captcha in the QR even if your post is empty.',\n        1\n      ],\n      'Post on Captcha Completion': [\n        false,\n        'Submit the post immediately when the captcha is completed.',\n        1\n      ],\n      'Force Noscript Captcha': [\n        false,\n        'Use the non-Javascript fallback captcha even if Javascript is enabled.'\n      ],\n      'Pass Link': [\n        false,\n        'Add a 4chan Pass login link to the bottom of the page.'\n      ]\n    },\n\n    'Quote Links': {\n      'Quote Backlinks': [\n        true,\n        'Add quote backlinks.'\n      ],\n      'OP Backlinks': [\n        true,\n        'Add backlinks to the OP.',\n        1\n      ],\n      'Bottom Backlinks': [\n        false,\n        'Place backlinks at the bottom of posts.',\n        1\n      ],\n      'Quote Inlining': [\n        true,\n        'Inline quoted post on click.'\n      ],\n      'Inline Cross-thread Quotes Only': [\n        false,\n        'Don\\'t inline quote links when the posts are visible in the thread.',\n        1\n      ],\n      'Quote Hash Navigation': [\n        false,\n        'Include an extra link after quotes for autoscrolling to quoted posts.',\n        1\n      ],\n      'Forward Hiding': [\n        true,\n        'Hide original posts of inlined backlinks.',\n        1\n      ],\n      'Quote Previewing': [\n        true,\n        'Show quoted post on hover.'\n      ],\n      'Quote Highlighting': [\n        true,\n        'Highlight the previewed post.',\n        1\n      ],\n      'Resurrect Quotes': [\n        true,\n        'Link dead quotes to the archives, and support inlining/previewing of archive links like quote links.'\n      ],\n      'Remember Your Posts': [\n        true,\n        'Remember your posting history.'\n      ],\n      'Mark Quotes of You': [\n        true,\n        'Add \\'(You)\\' to quotes linking to your posts.',\n        1\n      ],\n      'Highlight Posts Quoting You': [\n        true,\n        'Highlights any posts that contain a quote to your post.',\n        1\n      ],\n      'Highlight Own Posts': [\n        true,\n        'Highlights own posts.',\n        1\n      ],\n      'Mark OP Quotes': [\n        true,\n        'Add \\'(OP)\\' to OP quotes.'\n      ],\n      'Mark Cross-thread Quotes': [\n        true,\n        'Add \\'(Cross-thread)\\' to cross-threads quotes.'\n      ],\n      'Quote Threading': [\n        true,\n        'Add option in header menu to thread conversations.'\n      ]\n    }\n  },\n\n  imageExpansion: {\n    'Fit width': [\n      true,\n      ''\n    ],\n    'Fit height': [\n      false,\n      ''\n    ],\n    'Scroll into view': [\n      true,\n      'Scroll down when expanding images to bring the full image into view.'\n    ],\n    'Expand spoilers': [\n      true,\n      'Expand all images along with spoilers.'\n    ],\n    'Expand videos': [\n      true,\n      'Expand all images also expands videos.'\n    ],\n    'Expand from here': [\n      false,\n      'Expand all images only from current position to thread end.'\n    ],\n    'Expand thread only': [\n      false,\n      'In index, expand all images only within the current thread.'\n    ],\n    'Advance on contract': [\n      false,\n      'Advance to next post when contracting an expanded image.'\n    ]\n  },\n\n  gallery: {\n    'Hide Thumbnails': [\n      false\n    ],\n    'Fit Width': [ // 'Fit width' (lowercase W) belongs to Image Expansion. Engine limitations, heh.\n      true\n    ],\n    'Fit Height': [\n      true\n    ],\n    'Stretch to Fit': [\n      false\n    ],\n    'Scroll to Post': [\n      true\n    ],\n    'Slide Delay': [\n      6.0\n    ]\n  },\n\n  'Default Volume': 1.0,\n\n  threadWatcher: {\n    'Current Board': [\n      false,\n      'Only show watched threads from the current board.'\n    ],\n    'Auto Update Thread Watcher': [\n      true,\n      'Periodically check status of watched threads.'\n    ],\n    'Auto Watch': [\n      true,\n      'Automatically watch threads you start.'\n    ],\n    'Auto Watch Reply': [\n      true,\n      'Automatically watch threads you reply to.'\n    ],\n    'Auto Prune': [\n      false,\n      'Automatically remove dead threads.'\n    ],\n    'Show Page': [\n      true,\n      'Show what page watched threads are on.'\n    ],\n    'Show Unread Count': [\n      true,\n      'Show number of unread posts in watched threads.'\n    ],\n    'Show Site Prefix': [\n      true,\n      'When multiple sites are shown in the thread watcher, add a prefix to board names to distinguish them.'\n    ],\n    'Require OP Quote Link': [\n      false,\n      'For purposes of thread watcher highlighting, only consider posts with a quote link to the OP as replies to the OP.'\n    ]\n  },\n\n  filter: {\n    general: '',\n\n    postID: `\\\n# Highlight dubs on [s4s]:\n#/(\\\\d)\\\\1$/;highlight;top:no;boards:s4s\\\n`,\n\n    name: `\\\n# Filter any namefags:\n#/^(?!Anonymous$)/\\\n`,\n\n    uniqueID: `\\\n# Filter a specific ID:\n#/Txhvk1Tl/\\\n`,\n\n    tripcode: `\\\n# Filter any tripfag\n#/^!/\\\n`,\n\n    capcode: `\\\n# Set a custom class for mods:\n#/Mod$/;highlight:mod;op:yes\n# Set a custom class for admins:\n#/Admin$/;highlight:admin;op:yes\\\n`,\n\n    pass: `\\\n# Filter anyone using since4pass:\n#/./\\\n`,\n\n    email: '',\n\n    subject: `\\\n# Filter Generals on /v/:\n#/general/i;boards:v;op:only\\\n`,\n\n    comment: `\\\n# Filter Stallman copypasta on /g/:\n#/what you\\'re refer+ing to as linux/i;boards:g\n# Filter posts with 20 or more quote links:\n#/(?:>>\\\\d(?:(?!>>\\\\d)[^])*){20}/\n# Filter posts like T H I S / H / I / S:\n#/^>?\\\\s?\\\\w\\\\s?(\\\\w)\\\\s?(\\\\w)\\\\s?(\\\\w).*$[\\\\s>]+\\\\1[\\\\s>]+\\\\2[\\\\s>]+\\\\3/im\\\n`,\n\n    flag: '',\n    filename: '',\n    dimensions: `\\\n# Highlight potential wallpapers:\n#/1920x1080/;op:yes;highlight;top:no;boards:w,wg\\\n`,\n\n    filesize: '',\n\n    MD5: ''\n  },\n\n  sauces: `\\\n# Known filename formats:\nhttps://www.pixiv.net/member_illust.php?mode=medium&illust_id=%$1;regexp:/^(\\\\d+)_p\\\\d+/\njavascript:void(open(\"https://www.deviantart.com/\"+%$1.replace(/_/g,\"-\")+\"/art/\"+parseInt(%$2,36)));regexp:/^\\\\w+_by_(\\\\w+)[_-]d([\\\\da-z]{6})\\\\b/\nhttps://imgur.com/%$1;regexp:/^(?![a-zA-Z][a-z]{6})(?![A-Z]{7})(?!\\\\d{7})([\\\\da-zA-Z]{7})(?: \\\\(\\\\d+\\\\))?\\\\.\\\\w+$/\nhttps://flickr.com/photo.gne?id=%$1;regexp:/^(\\\\d+)_[\\\\da-f]{10}(?:_\\\\w)*\\\\b/\nhttps://www.facebook.com/photo.php?fbid=%$1;regexp:/^\\\\d+_(\\\\d+)_\\\\d+_[no]\\\\b/\n\n# Reverse image search:\nhttps://www.google.com/searchbyimage?sbisrc=4chanx&image_url=%IMG&safe=off\nhttps://yandex.com/images/search?rpt=imageview&url=%IMG\n#//tineye.com/search?url=%IMG\n#//www.bing.com/images/search?q=imgurl:%IMG&view=detailv2&iss=sbi#enterInsights\n#https://lens.google.com/uploadbyurl?url=%IMG;text:lens\n\n# Specialized reverse image search:\n//iqdb.org/?url=%IMG\nhttps://trace.moe/?auto&url=%IMG;text:wait\n#//3d.iqdb.org/?url=%IMG\n#//saucenao.com/search.php?url=%IMG\n\n# \"View Same\" in archives:\nhttp://eye.swfchan.com/search/?q=%name;types:swf\n#https://desuarchive.org/_/search/image/%sMD5/\n#https://archive.4plebs.org/_/search/image/%sMD5/\n#https://boards.fireden.net/_/search/image/%sMD5/\n#https://foolz.fireden.net/_/search/image/%sMD5/\n\n# Other tools:\n#http://exif.regex.info/exif.cgi?imgurl=%URL\n#//imgops.com/start?url=%URL;types:gif,jpg,png\n#//www.gif-explode.com/%URL;types:gif\\\n`,\n\n  FappeT: {\n    werk:  false\n  },\n\n  'Custom CSS': true,\n\n  Index: {\n    'Index Mode': 'paged',\n    'Previous Index Mode': 'paged',\n    'Index Size': 'small',\n    'Show Replies':          [true,  'Show replies in the index, and also in the catalog if \"Catalog hover expand\" is checked.'],\n    'Catalog Hover Expand':  [false, 'Expand the comment and show more details when you hover over a thread in the catalog.'],\n    'Catalog Hover Toggle':  [true,  'Turn \"Catalog hover expand\" on and off by clicking in the catalog.'],\n    'Pin Watched Threads':   [false, 'Move watched threads to the start of the index.'],\n    'Anchor Hidden Threads': [true,  'Move hidden threads to the end of the index.'],\n    'Refreshed Navigation':  [false, 'Refresh index when navigating through pages.']\n  },\n\n  Header: {\n    'Fixed Header':               true,\n    'Header auto-hide':           false,\n    'Header auto-hide on scroll': false,\n    'Bottom Header':              false,\n    'Centered links':             false,\n    'Header catalog links':       false,\n    'Bottom Board List':          true,\n    'Shortcut Icons':             true,\n    'Custom Board Navigation':    true\n  },\n\n  archives: {\n    archiveLists:      'https://4chenz.github.io/archives.json/archives.json',\n    lastarchivecheck:  0,\n    archiveAutoUpdate: true\n  },\n\n  externalCatalogURLs: `\\\n//catalog.neet.tv/%board/;boards:4chan.org:3,a,adv,an,asp,biz,c,cgl,ck,cm,co,diy,f,fa,fit,g,gd,his,i,int,jp,k,lgbt,lit,m,mlp,mu,n,news,o,out,p,po,pol,s4s,sci,sp,tg,toy,trv,tv,v,vg,vip,vp,vr,w,wg,wsg,wsr,x\\\n`,\n\n  boardnav: `\\\n[ toggle-all ]\n[current-index-text:\"Index\"\ncurrent-catalog-text:\"Catalog\"\ncurrent-expired-text:\"Expired\"\ncurrent-archive-text:\"Archive\"]\n[external-text:\"FAQ\",\"${meta.faq}\"]\\\n`,\n\n  QR: {\n    'QR.personas': `\\\n#options:\"sage\";boards:jp;always\\\n`,\n    sjisPreview: false\n  },\n\n  jsWhitelist: `\\\nhttp://s.4cdn.org\nhttps://s.4cdn.org\nhttp://www.google.com\nhttps://www.google.com\nhttps://www.gstatic.com\nhttp://cdn.mathjax.org\nhttps://cdn.mathjax.org\nhttps://cdnjs.cloudflare.com\nhttps://hcaptcha.com\nhttps://*.hcaptcha.com\n'self'\n'unsafe-inline'\n'unsafe-eval'\\\n`,\n\n  captchaLanguage: '',\n\n  time: '%m/%d/%y(%a)%H:%M:%S',\n  timeLocale: '',\n  RelativeTime: 'Hover',\n\n  backlink: '>>%id',\n\n  pastedname: 'file',\n\n  fileInfo: '%l %d (%p%s, %r%g)',\n\n  favicon: 'ferongr',\n\n  usercss: userCss,\n\n  hotkeys: {\n    // QR & Options\n    'Toggle board list': [\n      'Ctrl+b',\n      'Toggle the full board list.'\n    ],\n    'Toggle header': [\n      'Shift+h',\n      'Toggle the auto-hide option of the header.'\n    ],\n    'Open empty QR': [\n      'q',\n      'Open QR without post number inserted.'\n    ],\n    'Open QR': [\n      'Shift+q',\n      'Open QR with post number inserted.'\n    ],\n    'Open settings': [\n      'Alt+o',\n      'Open Settings.'\n    ],\n    'Close': [\n      'Esc',\n      'Close dialogs or notifications.'\n    ],\n    'Spoiler tags': [\n      'Ctrl+s',\n      'Insert spoiler tags.'\n    ],\n    'Code tags': [\n      'Alt+c',\n      'Insert code tags.'\n    ],\n    'Eqn tags':  [\n      'Alt+e',\n      'Insert eqn tags.'\n    ],\n    'Math tags': [\n      'Alt+m',\n      'Insert math tags.'\n    ],\n    'SJIS tags': [\n      'Alt+a',\n      'Insert SJIS tags.'\n    ],\n    'Toggle sage': [\n      'Alt+s',\n      'Toggle sage in options field.'\n    ],\n    'Toggle Cooldown': [\n      'Alt+Comma',\n      'Toggle custom cooldown timer.'\n    ],\n    'Post from URL': [\n      'Alt+l',\n      'Post from URL.'\n    ],\n    'Add new post': [\n      'Alt+n',\n      'Add new post to the QR dump list.'\n    ],\n    'Submit QR': [\n      'Ctrl+Enter',\n      'Submit post.'\n    ],\n    // Thread related\n    'Watch': [\n      'w',\n      'Watch thread.'\n    ],\n    'Update': [\n      'r',\n      'Update the thread / refresh the index.'\n    ],\n    'Update thread watcher': [\n      'Shift+r',\n      'Manually refresh thread watcher.'\n    ],\n    'Toggle thread watcher': [\n      't',\n      'Toggle visibility of thread watcher.'\n    ],\n    'Toggle threading': [\n      'Shift+t',\n      'Toggle threading.'\n    ],\n    'Mark thread read': [\n      'Ctrl+0',\n      'Mark thread read from index (requires \"Unread Line in Index\").'\n    ],\n    // Images\n    'Expand image': [\n      'Shift+e',\n      'Expand selected image.'\n    ],\n    'Expand images': [\n      'e',\n      'Expand all images.'\n    ],\n    'Open Gallery': [\n      'g',\n      'Opens the gallery.'\n    ],\n    'Next Gallery Image': [\n      'Right',\n      'Go to the next image in gallery mode.'\n    ],\n    'Previous Gallery Image': [\n      'Left',\n      'Go to the previous image in gallery mode.'\n    ],\n    'Advance Gallery': [\n      'Enter',\n      'Go to next image or, if Autoplay is off, play video.'\n    ],\n    'Pause': [\n      'p',\n      'Pause/play videos in the gallery.'\n    ],\n    'Slideshow': [\n      'Ctrl+Right',\n      'Toggle the gallery slideshow mode.'\n    ],\n    'Rotate image clockwise': [\n      'Shift+Right',\n      'Rotate image clockwise in gallery.'\n    ],\n    'Rotate image anticlockwise': [\n      'Shift+Left',\n      'Rotate image anticlockwise in gallery.'\n    ],\n    'Download Gallery Image': [\n      'Shift+j',\n      'Download current image in gallery.'\n    ],\n    'fappeTyme': [\n      'f',\n      'Toggle Fappe Tyme.'\n    ],\n    'werkTyme': [\n      'Shift+w',\n      'Toggle Werk Tyme.'\n    ],\n    // Board Navigation\n    'Front page': [\n      '1',\n      'Jump to front page.'\n    ],\n    'Open front page': [\n      'Shift+1',\n      'Open front page in a new tab.'\n    ],\n    'Next page': [\n      'Ctrl+Right',\n      'Jump to the next page.'\n    ],\n    'Previous page': [\n      'Ctrl+Left',\n      'Jump to the previous page.'\n    ],\n    'Paged mode': [\n      'Alt+1',\n      'Open the index in paged mode.'\n    ],\n    'Infinite scrolling mode': [\n      'Alt+2',\n      'Open the index in infinite scrolling mode.'\n    ],\n    'All pages mode': [\n      'Alt+3',\n      'Open the index in all threads mode.'\n    ],\n    'Open catalog': [\n      'Shift+c',\n      'Open the catalog of the current board.'\n    ],\n    'Search form': [\n      'Ctrl+Alt+s',\n      'Focus the search field on the board index.'\n    ],\n    'Cycle sort type': [\n      'Alt+x',\n      'Cycle through index sort types.'\n    ],\n    // Thread Navigation\n    'Next thread': [\n      'Ctrl+Down',\n      'See next thread.'\n    ],\n    'Previous thread': [\n      'Ctrl+Up',\n      'See previous thread.'\n    ],\n    'Expand thread': [\n      'Ctrl+e',\n      'Expand thread.'\n    ],\n    'Open thread': [\n      'o',\n      'Open thread in current tab.'\n    ],\n    'Open thread tab': [\n      'Shift+o',\n      'Open thread in new tab.'\n    ],\n    // Reply Navigation\n    'Next reply': [\n      'j',\n      'Select next reply.'\n    ],\n    'Previous reply': [\n      'k',\n      'Select previous reply.'\n    ],\n    'Deselect reply': [\n      'Shift+d',\n      'Deselect reply.'\n    ],\n    'Hide': [\n      'x',\n      'Hide thread.'\n    ],\n    'Quick Filter MD5': [\n      '5',\n      'Add the MD5 of the selected image to the filter list.'\n    ],\n    'Previous Post Quoting You': [\n      'Alt+Up',\n      'Scroll to the previous post that quotes you.'\n    ],\n    'Next Post Quoting You': [\n      'Alt+Down',\n      'Scroll to the next post that quotes you.'\n    ]\n  },\n\n  updater: {\n    checkbox: {\n      'Beep': [\n        false,\n        'Beep on new post to completely read thread.'\n      ],\n      'Beep Quoting You': [\n        false,\n        'Beep on new post quoting you.'\n      ],\n      'Auto Scroll': [\n        false,\n        'Scroll updated posts into view. Only enabled at bottom of page.'\n      ],\n      'Bottom Scroll': [\n        false,\n        'Always scroll to the bottom, not the first new post. Useful for event threads.'\n      ],\n      'Scroll BG': [\n        false,\n        'Auto-scroll background tabs.'\n      ],\n      'Auto Update': [\n        true,\n        'Automatically fetch new posts.'\n      ],\n      'Optional Increase': [\n        false,\n        'Increase the intervals between updates on threads without new posts.'\n      ]\n    },\n    'Interval': 5\n  },\n\n  customCooldown: 0,\n  customCooldownEnabled: true,\n\n  'Thread Quotes': false,\n\n  'Max Replies': 1000,\n\n  'Autohiding Scrollbar': false,\n\n  position: {\n    'embedding.position':      'top: 50px; right: 0px;',\n    'thread-stats.position':   'bottom: 0px; right: 0px;',\n    'updater.position':        'bottom: 0px; left: 0px;',\n    'thread-watcher.position': 'top: 50px; left: 0px;',\n    'qr.position':             'top: 50px; right: 0px;'\n  },\n\n  fourchanImageHost: 'i.4cdn.org',\n\n  hiddenPSAList: [{}],\n\n  knownBanners: banners.join(','),\n\n  passMessageClosed: false,\n\n  'Prerequest Captcha': false,\n\n  'PSAseen': [[]]\n};\nexport default Config;\n","import ferongr_unreadDead from './Favicon/ferongr.unreadDead.png';\nimport ferongr_unreadDeadY from './Favicon/ferongr.unreadDeadY.png';\nimport ferongr_unreadSFW from './Favicon/ferongr.unreadSFW.png';\nimport ferongr_unreadSFWY from './Favicon/ferongr.unreadSFWY.png';\nimport ferongr_unreadNSFW from './Favicon/ferongr.unreadNSFW.png';\nimport ferongr_unreadNSFWY from './Favicon/ferongr.unreadNSFWY.png';\nimport xat_unreadDead from './Favicon/xat-.unreadDead.png';\nimport xat_unreadDeadY from './Favicon/xat-.unreadDeadY.png';\nimport xat_unreadSFW from './Favicon/xat-.unreadSFW.png';\nimport xat_unreadSFWY from './Favicon/xat-.unreadSFWY.png';\nimport xat_unreadNSFW from './Favicon/xat-.unreadNSFW.png';\nimport xat_unreadNSFWY from './Favicon/xat-.unreadNSFWY.png';\nimport Mayhem_unreadDead from './Favicon/Mayhem.unreadDead.png';\nimport Mayhem_unreadDeadY from './Favicon/Mayhem.unreadDeadY.png';\nimport Mayhem_unreadSFW from './Favicon/Mayhem.unreadSFW.png';\nimport Mayhem_unreadSFWY from './Favicon/Mayhem.unreadSFWY.png';\nimport Mayhem_unreadNSFW from './Favicon/Mayhem.unreadNSFW.png';\nimport Mayhem_unreadNSFWY from './Favicon/Mayhem.unreadNSFWY.png';\nimport fourChanJS_unreadDead from './Favicon/4chanJS.unreadDead.png';\nimport fourChanJS_unreadDeadY from './Favicon/4chanJS.unreadDeadY.png';\nimport fourChanJS_unreadSFW from './Favicon/4chanJS.unreadSFW.png';\nimport fourChanJS_unreadSFWY from './Favicon/4chanJS.unreadSFWY.png';\nimport fourChanJS_unreadNSFW from './Favicon/4chanJS.unreadNSFW.png';\nimport fourChanJS_unreadNSFWY from './Favicon/4chanJS.unreadNSFWY.png';\nimport Original_unreadDead from './Favicon/Original.unreadDead.png';\nimport Original_unreadDeadY from './Favicon/Original.unreadDeadY.png';\nimport Original_unreadSFW from './Favicon/Original.unreadSFW.png';\nimport Original_unreadSFWY from './Favicon/Original.unreadSFWY.png';\nimport Original_unreadNSFW from './Favicon/Original.unreadNSFW.png';\nimport Original_unreadNSFWY from './Favicon/Original.unreadNSFWY.png';\nimport Metro_unreadDead from './Favicon/Metro.unreadDead.png';\nimport Metro_unreadDeadY from './Favicon/Metro.unreadDeadY.png';\nimport Metro_unreadSFW from './Favicon/Metro.unreadSFW.png';\nimport Metro_unreadSFWY from './Favicon/Metro.unreadSFWY.png';\nimport Metro_unreadNSFW from './Favicon/Metro.unreadNSFW.png';\nimport Metro_unreadNSFWY from './Favicon/Metro.unreadNSFWY.png';\nimport dead from './Favicon/dead.gif';\nimport empty from './Favicon/empty.gif';\nimport $ from '../platform/$';\nimport { Conf, d } from '../globals/globals';\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar Favicon = {\n  init() {\n    return $.asap((() => d.head && (Favicon.el = $('link[rel=\"shortcut icon\"]', d.head))), Favicon.initAsap);\n  },\n\n  set(status) {\n    Favicon.status = status;\n    if (Favicon.el) {\n      Favicon.el.href = Favicon[status];\n      // `favicon.href = href` doesn't work on Firefox.\n      return $.add(d.head, Favicon.el);\n    }\n  },\n\n  initAsap() {\n    Favicon.el.type = 'image/x-icon';\n    const {href}          = Favicon.el;\n    Favicon.isSFW   = /ws\\.ico$/.test(href);\n    Favicon.default = href;\n    Favicon.switch();\n    if (Favicon.status) {\n      return Favicon.set(Favicon.status);\n    }\n  },\n\n  switch() {\n    let items = {\n      ferongr: [\n        ferongr_unreadDead,\n        ferongr_unreadDeadY,\n        ferongr_unreadSFW,\n        ferongr_unreadSFWY,\n        ferongr_unreadNSFW,\n        ferongr_unreadNSFWY,\n      ],\n      'xat-': [\n        xat_unreadDead,\n        xat_unreadDeadY,\n        xat_unreadSFW,\n        xat_unreadSFWY,\n        xat_unreadNSFW,\n        xat_unreadNSFWY,\n      ],\n      Mayhem: [\n        Mayhem_unreadDead,\n        Mayhem_unreadDeadY,\n        Mayhem_unreadSFW,\n        Mayhem_unreadSFWY,\n        Mayhem_unreadNSFW,\n        Mayhem_unreadNSFWY,\n      ],\n      '4chanJS': [\n        fourChanJS_unreadDead,\n        fourChanJS_unreadDeadY,\n        fourChanJS_unreadSFW,\n        fourChanJS_unreadSFWY,\n        fourChanJS_unreadNSFW,\n        fourChanJS_unreadNSFWY,\n      ],\n      Original: [\n        Original_unreadDead,\n        Original_unreadDeadY,\n        Original_unreadSFW,\n        Original_unreadSFWY,\n        Original_unreadNSFW,\n        Original_unreadNSFWY,\n      ],\n      'Metro': [\n        Metro_unreadDead,\n        Metro_unreadDeadY,\n        Metro_unreadSFW,\n        Metro_unreadSFWY,\n        Metro_unreadNSFW,\n        Metro_unreadNSFWY,\n      ]\n    };\n    items = $.getOwn(items, Conf['favicon']);\n\n    const f = Favicon;\n    const t = 'data:image/png;base64,';\n    let i = 0;\n    while (items[i]) {\n      items[i] = t + items[i++];\n    }\n\n    [f.unreadDead, f.unreadDeadY, f.unreadSFW, f.unreadSFWY, f.unreadNSFW, f.unreadNSFWY] = items;\n    return f.update();\n  },\n\n  update() {\n    if (this.isSFW) {\n      this.unread  = this.unreadSFW;\n      return this.unreadY = this.unreadSFWY;\n    } else {\n      this.unread  = this.unreadNSFW;\n      return this.unreadY = this.unreadNSFWY;\n    }\n  },\n\n  SFW:   '//s.4cdn.org/image/favicon-ws.ico',\n  NSFW:  '//s.4cdn.org/image/favicon.ico',\n  dead: `data:image/gif;base64,${dead}`,\n  logo: `data:image/png;base64,${empty}`,\n};\nexport default Favicon;\n","import { d } from \"../globals/globals\";\n\nconst $$ = (selector, root = d.body) => Array.from(root.querySelectorAll(selector));\nexport default $$;\n","import { g, Conf, doc, d } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\n\nconst CaptchaReplace = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || (d.cookie.indexOf('pass_enabled=1') >= 0)) { return; }\n\n    if (Conf['Force Noscript Captcha'] && Main.jsEnabled) {\n      $.ready(this.noscript);\n      return;\n    }\n\n    if (Conf['captchaLanguage'].trim()) {\n      if (['boards.4chan.org', 'boards.4channel.org'].includes(location.hostname)) {\n        $.onExists(doc, '#captchaFormPart', node => $.onExists(node, 'iframe[src^=\"https://www.google.com/recaptcha/\"]', this.iframe));\n      } else {\n        $.onExists(doc, 'iframe[src^=\"https://www.google.com/recaptcha/\"]', this.iframe);\n      }\n    }\n  },\n\n  noscript() {\n    let noscript, original, toggle;\n    if (!((original = $('#g-recaptcha')) && (noscript = $('noscript', original.parentNode)))) { return; }\n    const span = $.el('span',\n      {id: 'captcha-forced-noscript'});\n    $.replace(noscript, span);\n    $.rm(original);\n    const insert = function() {\n      span.innerHTML = noscript.textContent;\n      this.iframe($('iframe[src^=\"https://www.google.com/recaptcha/\"]', span));\n    };\n    if (toggle = $('#togglePostFormLink a, #form-link')) {\n      $.on(toggle, 'click', insert);\n    } else {\n      insert();\n    }\n  },\n\n  iframe(iframe) {\n    let lang;\n    if (lang = Conf['captchaLanguage'].trim()) {\n      const src = /[?&]hl=/.test(iframe.src) ?\n        iframe.src.replace(/([?&]hl=)[^&]*/, '$1' + encodeURIComponent(lang))\n      :\n        iframe.src + `&hl=${encodeURIComponent(lang)}`;\n      if (iframe.src !== src) { iframe.src = src; }\n    }\n  }\n};\nexport default CaptchaReplace;\n","import { d, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport QR from \"./QR\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst CaptchaT = {\n  init() {\n    if (d.cookie.indexOf('pass_enabled=1') >= 0) { return; }\n    if (!(this.isEnabled = !!$('#t-root') || !$.id('postForm'))) { return; }\n\n    const root = $.el('div', {className: 'captcha-root'});\n    this.nodes = {root};\n\n    $.addClass(QR.nodes.el, 'has-captcha', 'captcha-t');\n    return $.after(QR.nodes.com.parentNode, root);\n  },\n\n  moreNeeded() {\n  },\n\n  getThread() {\n    let threadID;\n    const boardID = g.BOARD.ID;\n    if (QR.posts[0].thread === 'new') {\n      threadID = '0';\n    } else {\n      threadID = '' + QR.posts[0].thread;\n    }\n    return {boardID, threadID};\n  },\n\n  setup(focus) {\n    if (!this.isEnabled) { return; }\n\n    if (!this.nodes.container) {\n      this.nodes.container = $.el('div', {className: 'captcha-container'});\n      $.prepend(this.nodes.root, this.nodes.container);\n      CaptchaT.currentThread = CaptchaT.getThread();\n      $.global(function() {\n        const el = document.querySelector('#qr .captcha-container');\n        window.TCaptcha.init(el, this.boardID, +this.threadID);\n        return window.TCaptcha.setErrorCb(err => window.dispatchEvent(new CustomEvent('CreateNotification', {detail: {\n          type: 'warning',\n          content: '' + err\n        }})\n        ));\n      }\n      , CaptchaT.currentThread);\n    }\n\n    if (focus) {\n      return $('#t-resp').focus();\n    }\n  },\n\n  destroy() {\n    if (!this.isEnabled || !this.nodes.container) { return; }\n    $.global(() => window.TCaptcha.destroy());\n    $.rm(this.nodes.container);\n    return delete this.nodes.container;\n  },\n\n  updateThread() {\n    if (!this.isEnabled) { return; }\n    const {boardID, threadID} = (CaptchaT.currentThread || {});\n    const newThread = CaptchaT.getThread();\n    if ((newThread.boardID !== boardID) || (newThread.threadID !== threadID)) {\n      CaptchaT.destroy();\n      return CaptchaT.setup();\n    }\n  },\n\n  getOne() {\n    let el;\n    let response = {};\n    if (this.nodes.container) {\n      for (var key of ['t-response', 't-challenge']) {\n        response[key] = $(`[name='${key}']`, this.nodes.container).value;\n      }\n    }\n    if (!response['t-response'] && !((el = $('#t-msg')) && /Verification not required/i.test(el.textContent))) {\n      response = null;\n    }\n    return response;\n  },\n\n  setUsed() {\n    if (!this.isEnabled) { return; }\n    if (this.nodes.container) {\n      return $.global(() => window.TCaptcha.clearChallenge());\n    }\n  },\n\n  occupied() {\n    return !!this.nodes.container;\n  }\n};\nexport default CaptchaT;\n",null,"import { Conf, d, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict, HOUR } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class DataBoard {\n  static initClass() {\n    this.keys = ['hiddenThreads', 'hiddenPosts', 'lastReadPosts', 'yourPosts', 'watchedThreads', 'watcherLastModified', 'customTitles'];\n  }\n\n  constructor(key, sync, dontClean) {\n    this.changes = [];\n    this.onSync = this.onSync.bind(this);\n    this.key = key;\n    this.initData(Conf[this.key]);\n    $.sync(this.key, this.onSync);\n    if (!dontClean) { this.clean(); }\n    if (!sync) { return; }\n    // Chrome also fires the onChanged callback on the current tab,\n    // so we only start syncing when we're ready.\n    var init = () => {\n      $.off(d, '4chanXInitFinished', init);\n      return this.sync = sync;\n    };\n    $.on(d, '4chanXInitFinished', init);\n  }\n\n  initData(data) {\n    let boards;\n    this.data = data;\n    if (this.data.boards) {\n      let lastChecked;\n      ({boards, lastChecked} = this.data);\n      this.data['4chan.org'] = {boards, lastChecked};\n      delete this.data.boards;\n      delete this.data.lastChecked;\n    }\n    return this.data[g.SITE.ID] || (this.data[g.SITE.ID] = { boards: dict() });\n  }\n\n  save(change, cb) {\n    change();\n    this.changes.push(change);\n    return $.get(this.key, { boards: dict() }, items => {\n      if (!this.changes.length) { return; }\n      const needSync = ((items[this.key].version || 0) > (this.data.version || 0));\n      if (needSync) {\n        this.initData(items[this.key]);\n        for (change of this.changes) { change(); }\n      }\n      this.changes = [];\n      this.data.version = (this.data.version || 0) + 1;\n      return $.set(this.key, this.data, () => {\n        if (needSync) { this.sync?.(); }\n        return cb?.();\n      });\n    });\n  }\n\n  forceSync(cb) {\n    return $.get(this.key, { boards: dict() }, items => {\n      if ((items[this.key].version || 0) > (this.data.version || 0)) {\n        this.initData(items[this.key]);\n        for (var change of this.changes) { change(); }\n        this.sync?.();\n      }\n      return cb?.();\n    });\n  }\n\n  delete({siteID, boardID, threadID, postID}, cb) {\n    if (!siteID) { siteID = g.SITE.ID; }\n    if (!this.data[siteID]) { return; }\n    return this.save(() => {\n      if (postID) {\n        if (!this.data[siteID].boards[boardID]?.[threadID]) { return; }\n        delete this.data[siteID].boards[boardID][threadID][postID];\n        return this.deleteIfEmpty({siteID, boardID, threadID});\n      } else if (threadID) {\n        if (!this.data[siteID].boards[boardID]) { return; }\n        delete this.data[siteID].boards[boardID][threadID];\n        return this.deleteIfEmpty({siteID, boardID});\n      } else {\n        return delete this.data[siteID].boards[boardID];\n      }\n    }\n    , cb);\n  }\n\n  deleteIfEmpty({siteID, boardID, threadID}) {\n    if (!this.data[siteID]) { return; }\n    if (threadID) {\n      if (!Object.keys(this.data[siteID].boards[boardID][threadID]).length) {\n        delete this.data[siteID].boards[boardID][threadID];\n        return this.deleteIfEmpty({siteID, boardID});\n      }\n    } else if (!Object.keys(this.data[siteID].boards[boardID]).length) {\n      return delete this.data[siteID].boards[boardID];\n    }\n  }\n\n  set(data, cb) {\n    return this.save(() => {\n      return this.setUnsafe(data);\n    }\n    , cb);\n  }\n\n  setUnsafe({siteID, boardID, threadID, postID, val}) {\n    if (!siteID) { siteID = g.SITE.ID; }\n    if (!this.data[siteID]) { this.data[siteID] = { boards: dict() }; }\n    if (postID !== undefined) {\n      let base;\n      return (((base = this.data[siteID].boards[boardID] || (this.data[siteID].boards[boardID] = dict())))[threadID] || (base[threadID] = dict()))[postID] = val;\n    } else if (threadID !== undefined) {\n      return (this.data[siteID].boards[boardID] || (this.data[siteID].boards[boardID] = dict()))[threadID] = val;\n    } else {\n      return this.data[siteID].boards[boardID] = val;\n    }\n  }\n\n  extend({siteID, boardID, threadID, postID, val}, cb) {\n    return this.save(() => {\n      const oldVal = this.get({ siteID, boardID, threadID, postID, defaultValue: dict() });\n      for (var key in val) {\n        var subVal = val[key];\n        if (typeof subVal === 'undefined') {\n          delete oldVal[key];\n        } else {\n          oldVal[key] = subVal;\n        }\n      }\n      return this.setUnsafe({siteID, boardID, threadID, postID, val: oldVal});\n    }\n    , cb);\n  }\n\n  setLastChecked(key='lastChecked') {\n    return this.save(() => {\n      return this.data[key] = Date.now();\n    });\n  }\n\n  get({siteID, boardID, threadID, postID, defaultValue}) {\n    let board, val;\n    if (!siteID) { siteID = g.SITE.ID; }\n    if (board = this.data[siteID]?.boards[boardID]) {\n      let thread;\n      if (threadID == null) {\n        if (postID != null) {\n          for (thread = 0; thread < board.length; thread++) {\n            var ID = board[thread];\n            if (postID in thread) {\n              val = thread[postID];\n              break;\n            }\n          }\n        } else {\n          val = board;\n        }\n      } else if (thread = board[threadID]) {\n        val = (postID != null) ?\n          thread[postID]\n        :\n          thread;\n      }\n    }\n    return val || defaultValue;\n  }\n\n  clean() {\n    let boardID, middle;\n    const siteID = g.SITE.ID;\n    for (boardID in this.data[siteID].boards) {\n      var val = this.data[siteID].boards[boardID];\n      this.deleteIfEmpty({siteID, boardID});\n    }\n    const now = Date.now();\n    if (now - (2 * HOUR) >= ((middle = this.data[siteID].lastChecked || 0)) || middle > now) {\n      this.data[siteID].lastChecked = now;\n      for (boardID in this.data[siteID].boards) {\n        this.ajaxClean(boardID);\n      }\n    }\n  }\n\n  ajaxClean(boardID) {\n    const that = this;\n    const siteID = g.SITE.ID;\n    const threadsList = g.SITE.urls.threadsListJSON?.({siteID, boardID});\n    if (!threadsList) { return; }\n    return $.cache(threadsList, function() {\n      if (this.status !== 200) { return; }\n      const archiveList = g.SITE.urls.archiveListJSON?.({siteID, boardID});\n      if (!archiveList) { return that.ajaxCleanParse(boardID, this.response); }\n      const response1 = this.response;\n      return $.cache(archiveList, function() {\n        if ((this.status !== 200) && (!!g.SITE.archivedBoardsKnown || (this.status !== 404))) { return; }\n        return that.ajaxCleanParse(boardID, response1, this.response);\n      });\n    });\n  }\n\n  ajaxCleanParse(boardID, response1, response2) {\n    let board, ID;\n    const siteID = g.SITE.ID;\n    if (!(board = this.data[siteID].boards[boardID])) { return; }\n    const threads = dict();\n    if (response1) {\n      for (var page of response1) {\n        for (var thread of page.threads) {\n          ID = thread.no;\n          if (ID in board) { threads[ID] = board[ID]; }\n        }\n      }\n    }\n    if (response2) {\n      for (ID of response2) {\n        if (ID in board) { threads[ID] = board[ID]; }\n      }\n    }\n    this.data[siteID].boards[boardID] = threads;\n    this.deleteIfEmpty({siteID, boardID});\n    return $.set(this.key, this.data);\n  }\n\n  onSync(data) {\n    if ((data.version || 0) <= (this.data.version || 0)) { return; }\n    this.initData(data);\n    return this.sync?.();\n  }\n}\nDataBoard.initClass();\n",null,null,"import $ from \"../platform/$\";\n\nexport default class CatalogThread {\n  toString() { return this.ID; }\n\n  constructor(root, thread) {\n    this.thread = thread;\n    this.ID    = this.thread.ID;\n    this.board = this.thread.board;\n    const {post} = this.thread.OP.nodes;\n    this.nodes = {\n      root,\n      thumb:     $('.catalog-thumb', post),\n      icons:     $('.catalog-icons', post),\n      postCount: $('.post-count',    post),\n      fileCount: $('.file-count',    post),\n      pageCount: $('.page-count',    post),\n      replies:   null\n    };\n    this.thread.catalogView = this;\n  }\n}\n","import { Conf, d, doc } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport Header from \"./Header\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst dialog = function(id, properties) {\n  const el = $.el('div', {\n    className: 'dialog',\n    id\n  }\n  );\n  $.extend(el, properties);\n  el.style.cssText = Conf[`${id}.position`];\n\n  const move = $('.move', el);\n  $.on(move, 'touchstart mousedown', dragstart);\n  for (var child of move.children) {\n    if (!child.tagName) { continue; }\n    $.on(child, 'touchstart mousedown', e => e.stopPropagation());\n  }\n\n  return el;\n};\n\nvar Menu = (function() {\n  let currentMenu = undefined;\n  let lastToggledButton = undefined;\n  Menu = class Menu {\n    static initClass() {\n      currentMenu       = null;\n      lastToggledButton = null;\n    }\n\n    constructor(type) {\n      // XXX AddMenuEntry event is deprecated\n      this.setPosition = this.setPosition.bind(this);\n      this.close = this.close.bind(this);\n      this.keybinds = this.keybinds.bind(this);\n      this.onFocus = this.onFocus.bind(this);\n      this.addEntry = this.addEntry.bind(this);\n      this.type = type;\n      $.on(d, 'AddMenuEntry', ({detail}) => {\n        if (detail.type !== this.type) { return; }\n        delete detail.open;\n        return this.addEntry(detail);\n      });\n      this.entries = [];\n    }\n\n    makeMenu() {\n      const menu = $.el('div', {\n        className: 'dialog',\n        id:        'menu',\n        tabIndex:  0\n      }\n      );\n      menu.dataset.type = this.type;\n      $.on(menu, 'click', e => e.stopPropagation());\n      $.on(menu, 'keydown', this.keybinds);\n      return menu;\n    }\n\n    toggle(e, button, data) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (currentMenu) {\n        // Close if it's already opened.\n        // Reopen if we clicked on another button.\n        const previousButton = lastToggledButton;\n        currentMenu.close();\n        if (previousButton === button) { return; }\n      }\n\n      if (!this.entries.length) { return; }\n      return this.open(button, data);\n    }\n\n    open(button, data) {\n      let entry;\n      const menu = (this.menu = this.makeMenu());\n      currentMenu       = this;\n      lastToggledButton = button;\n\n      this.entries.sort((first, second) => first.order - second.order);\n\n      for (entry of this.entries) {\n        this.insertEntry(entry, menu, data);\n      }\n\n      $.addClass(lastToggledButton, 'active');\n\n      $.on(d, 'click CloseMenu', this.close);\n      $.on(d, 'scroll', this.setPosition);\n      $.on(window, 'resize', this.setPosition);\n      $.after(button, menu);\n\n      this.setPosition();\n\n      entry = $('.entry', menu);\n      // We've removed flexbox, so we don't use order anymore.\n      // while prevEntry = @findNextEntry entry, -1\n      //   entry = prevEntry\n      this.focus(entry);\n\n      return menu.focus();\n    }\n\n    setPosition() {\n      const mRect   = this.menu.getBoundingClientRect();\n      const bRect   = lastToggledButton.getBoundingClientRect();\n      const bTop    = window.scrollY + bRect.top;\n      const bLeft   = window.scrollX + bRect.left;\n      const cHeight = doc.clientHeight;\n      const cWidth  = doc.clientWidth;\n      const [top, bottom] = (bRect.top + bRect.height + mRect.height) < cHeight ?\n        [`${bRect.bottom}px`, '']\n      :\n        ['', `${cHeight - bRect.top}px`];\n      const [left, right] = (bRect.left + mRect.width) < cWidth ?\n        [`${bRect.left}px`, '']\n      :\n        ['', `${cWidth - bRect.right}px`];\n      $.extend(this.menu.style, {top, right, bottom, left});\n      return this.menu.classList.toggle('left', right);\n    }\n\n    insertEntry(entry, parent, data) {\n      let submenu;\n      if (typeof entry.open === 'function') {\n        try {\n          if (!entry.open(data)) { return; }\n        } catch (err) {\n          Main.handleErrors({\n            message: `Error in building the ${this.type} menu.`,\n            error: err\n          });\n          return;\n        }\n      }\n      $.add(parent, entry.el);\n\n      if (!entry.subEntries) { return; }\n      if (submenu = $('.submenu', entry.el)) {\n        // Reset sub menu, remove irrelevant entries.\n        $.rm(submenu);\n      }\n      submenu = $.el('div',\n        {className: 'dialog submenu'});\n      for (var subEntry of entry.subEntries) {\n        this.insertEntry(subEntry, submenu, data);\n      }\n      $.add(entry.el, submenu);\n    }\n\n    close() {\n      $.rm(this.menu);\n      delete this.menu;\n      $.rmClass(lastToggledButton, 'active');\n      currentMenu       = null;\n      lastToggledButton = null;\n      $.off(d, 'click scroll CloseMenu', this.close);\n      $.off(d, 'scroll', this.setPosition);\n      return $.off(window, 'resize', this.setPosition);\n    }\n\n    findNextEntry(entry, direction) {\n      const entries = [...entry.parentNode.children];\n      entries.sort((first, second) => first.style.order - second.style.order);\n      return entries[entries.indexOf(entry) + direction];\n    }\n\n    keybinds(e) {\n      let subEntry;\n      let next, submenu;\n      let entry = $('.focused', this.menu);\n      while ((subEntry = $('.focused', entry))) {\n        entry = subEntry;\n      }\n\n      switch (e.keyCode) {\n        case 27: // Esc\n          lastToggledButton.focus();\n          this.close();\n          break;\n        case 13: case 32: // Enter, Space\n          entry.click();\n          break;\n        case 38: // Up\n          if (next = this.findNextEntry(entry, -1)) {\n            this.focus(next);\n          }\n          break;\n        case 40: // Down\n          if (next = this.findNextEntry(entry, +1)) {\n            this.focus(next);\n          }\n          break;\n        case 39: // Right\n          if ((submenu = $('.submenu', entry)) && (next = submenu.firstElementChild)) {\n            let nextPrev;\n            while ((nextPrev = this.findNextEntry(next, -1))) {\n              next = nextPrev;\n            }\n            this.focus(next);\n          }\n          break;\n        case 37: // Left\n          if (next = $.x('parent::*[contains(@class,\"submenu\")]/parent::*', entry)) {\n            this.focus(next);\n          }\n          break;\n        default:\n          return;\n      }\n\n      e.preventDefault();\n      return e.stopPropagation();\n    }\n\n    onFocus(e) {\n      e.stopPropagation();\n      return this.focus(e.target);\n    }\n\n    focus(entry) {\n      let focused, submenu;\n      while ((focused = $.x('parent::*/child::*[contains(@class,\"focused\")]', entry))) {\n        $.rmClass(focused, 'focused');\n      }\n      for (focused of $$('.focused', entry)) {\n        $.rmClass(focused, 'focused');\n      }\n      $.addClass(entry, 'focused');\n\n      // Submenu positioning.\n      if (!(submenu = $('.submenu', entry))) { return; }\n      const sRect   = submenu.getBoundingClientRect();\n      const eRect   = entry.getBoundingClientRect();\n      const cHeight = doc.clientHeight;\n      const cWidth  = doc.clientWidth;\n      const [top, bottom] = (eRect.top + sRect.height) < cHeight ?\n        ['0px', 'auto']\n      :\n        ['auto', '0px'];\n      const [left, right] = (eRect.right + sRect.width) < (cWidth - 150) ?\n        ['100%', 'auto']\n      :\n        ['auto', '100%'];\n      const {style} = submenu;\n      style.top    = top;\n      style.bottom = bottom;\n      style.left   = left;\n      return style.right  = right;\n    }\n\n    addEntry(entry) {\n      this.parseEntry(entry);\n      return this.entries.push(entry);\n    }\n\n    parseEntry(entry) {\n      const {el, subEntries} = entry;\n      $.addClass(el, 'entry');\n      $.on(el, 'focus mouseover', this.onFocus);\n      el.style.order = entry.order || 100;\n      if (!subEntries) { return; }\n      $.addClass(el, 'has-submenu');\n      for (var subEntry of subEntries) {\n        this.parseEntry(subEntry);\n      }\n    }\n  };\n  Menu.initClass();\n  return Menu;\n})();\n\nexport var dragstart = function (e) {\n  let isTouching;\n  if ((e.type === 'mousedown') && (e.button !== 0)) { return; } // not LMB\n  // prevent text selection\n  e.preventDefault();\n  if (isTouching = e.type === 'touchstart') {\n    e = e.changedTouches[e.changedTouches.length - 1];\n  }\n  // distance from pointer to el edge is constant; calculate it here.\n  const el = $.x('ancestor::div[contains(@class,\"dialog\")][1]', this);\n  const rect = el.getBoundingClientRect();\n  const screenHeight = doc.clientHeight;\n  const screenWidth  = doc.clientWidth;\n  const o = {\n    id:     el.id,\n    style:  el.style,\n    dx:     e.clientX - rect.left,\n    dy:     e.clientY - rect.top,\n    height: screenHeight - rect.height,\n    width:  screenWidth  - rect.width,\n    screenHeight,\n    screenWidth,\n    isTouching\n  };\n\n  [o.topBorder, o.bottomBorder] = Conf['Header auto-hide'] || !Conf['Fixed Header'] ?\n    [0, 0]\n  : Conf['Bottom Header'] ?\n    [0, Header.bar.getBoundingClientRect().height]\n  :\n    [Header.bar.getBoundingClientRect().height, 0];\n\n  if (isTouching) {\n    o.identifier = e.identifier;\n    o.move = touchmove.bind(o);\n    o.up   = touchend.bind(o);\n    $.on(d, 'touchmove', o.move);\n    return $.on(d, 'touchend touchcancel', o.up);\n  } else { // mousedown\n    o.move = drag.bind(o);\n    o.up   = dragend.bind(o);\n    $.on(d, 'mousemove', o.move);\n    return $.on(d, 'mouseup',   o.up);\n  }\n};\n\nexport var touchmove = function (e) {\n  for (var touch of e.changedTouches) {\n    if (touch.identifier === this.identifier) {\n      drag.call(this, touch);\n      return;\n    }\n  }\n};\n\nexport var drag = function (e) {\n  const {clientX, clientY} = e;\n\n  let left = clientX - this.dx;\n  left = left < 10 ?\n    0\n  : (this.width - left) < 10 ?\n    ''\n  :\n    ((left / this.screenWidth) * 100) + '%';\n\n  let top = clientY - this.dy;\n  top = top < (10 + this.topBorder) ?\n    this.topBorder + 'px'\n  : (this.height - top) < (10 + this.bottomBorder) ?\n    ''\n  :\n    ((top / this.screenHeight) * 100) + '%';\n\n  const right = left === '' ?\n    0\n  :\n    '';\n\n  const bottom = top === '' ?\n    this.bottomBorder + 'px'\n  :\n    '';\n\n  const {style} = this;\n  style.left   = left;\n  style.right  = right;\n  style.top    = top;\n  return style.bottom = bottom;\n};\n\nexport var touchend = function (e) {\n  for (var touch of e.changedTouches) {\n    if (touch.identifier === this.identifier) {\n      dragend.call(this);\n      return;\n    }\n  }\n};\n\nexport var dragend = function () {\n  if (this.isTouching) {\n    $.off(d, 'touchmove', this.move);\n    $.off(d, 'touchend touchcancel', this.up);\n  } else { // mouseup\n    $.off(d, 'mousemove', this.move);\n    $.off(d, 'mouseup',   this.up);\n  }\n  return $.set(`${this.id}.position`, this.style.cssText);\n};\n\nconst hoverstart = function ({ root, el, latestEvent, endEvents, height, width, cb, noRemove }) {\n  const rect = root.getBoundingClientRect();\n  const o = {\n    root,\n    el,\n    style: el.style,\n    isImage: ['IMG', 'VIDEO'].includes(el.nodeName),\n    cb,\n    endEvents,\n    latestEvent,\n    clientHeight: doc.clientHeight,\n    clientWidth:  doc.clientWidth,\n    height,\n    width,\n    noRemove,\n    clientX: (rect.left + rect.right) / 2,\n    clientY: (rect.top + rect.bottom) / 2\n  };\n  o.hover    = hover.bind(o);\n  o.hoverend = hoverend.bind(o);\n\n  o.hover(o.latestEvent);\n  new MutationObserver(function() {\n    if (el.parentNode) { return o.hover(o.latestEvent); }\n  }).observe(el, {childList: true});\n\n  $.on(root, endEvents,   o.hoverend);\n  if ($.x('ancestor::div[contains(@class,\"inline\")][1]', root)) {\n    $.on(d,    'keydown',   o.hoverend);\n  }\n  $.on(root, 'mousemove', o.hover);\n\n  // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=674955\n  o.workaround = function(e) { if (!root.contains(e.target)) { return o.hoverend(e); } };\n  return $.on(doc,  'mousemove', o.workaround);\n};\n\nhoverstart.padding = 25;\n\nexport var hover = function (e) {\n  this.latestEvent = e;\n  const height = (this.height || this.el.offsetHeight) + hoverstart.padding;\n  const width  = (this.width  || this.el.offsetWidth);\n  const {clientX, clientY} = Conf['Follow Cursor'] ? e : this;\n\n  const top = this.isImage ?\n    Math.max(0, (clientY * (this.clientHeight - height)) / this.clientHeight)\n  :\n    Math.max(0, Math.min(this.clientHeight - height, clientY - 120));\n\n  let threshold = this.clientWidth / 2;\n  if (!this.isImage) { threshold = Math.max(threshold, this.clientWidth - 400); }\n  let marginX = (clientX <= threshold ? clientX : this.clientWidth - clientX) + 45;\n  if (this.isImage) { marginX = Math.min(marginX, this.clientWidth - width); }\n  marginX += 'px';\n  const [left, right] = clientX <= threshold ? [marginX, ''] : ['', marginX];\n\n  const {style} = this;\n  style.top   = top + 'px';\n  style.left  = left;\n  return style.right = right;\n};\n\nexport var hoverend = function (e) {\n  if (((e.type === 'keydown') && (e.keyCode !== 13)) || (e.target.nodeName === \"TEXTAREA\")) { return; }\n  if (!this.noRemove) { $.rm(this.el); }\n  $.off(this.root, this.endEvents,  this.hoverend);\n  $.off(d,     'keydown',   this.hoverend);\n  $.off(this.root, 'mousemove', this.hover);\n  // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=674955\n  $.off(doc,   'mousemove', this.workaround);\n  if (this.cb) { return this.cb.call(this); }\n};\n\nexport const checkbox = function (name, text, checked) {\n  if (checked == null) { checked = Conf[name]; }\n  const label = $.el('label');\n  const input = $.el('input', {type: 'checkbox', name, checked});\n  $.add(label, [input, $.tn(` ${text}`)]);\n  return label;\n};\n\nconst UI = {\n  dialog,\n  Menu,\n  hover:    hoverstart,\n  checkbox\n};\nexport default UI;\n","import Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport { g, Conf, d, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Nav = {\n  init() {\n    switch (g.VIEW) {\n      case 'index':\n        if (!Conf['Index Navigation']) { return; }\n        break;\n      case 'thread':\n        if (!Conf['Reply Navigation']) { return; }\n        break;\n      default:\n        return;\n    }\n\n    const span = $.el('span',\n      {id: 'navlinks'});\n    const prev = $.el('a', {\n      textContent: '▲',\n      href: 'javascript:;'\n    }\n    );\n    const next = $.el('a', {\n      textContent: '▼',\n      href: 'javascript:;'\n    }\n    );\n\n    $.on(prev, 'click', this.prev);\n    $.on(next, 'click', this.next);\n\n    $.add(span, [prev, $.tn(' '), next]);\n    var append = function() {\n      $.off(d, '4chanXInitFinished', append);\n      return $.add(d.body, span);\n    };\n    return $.on(d, '4chanXInitFinished', append);\n  },\n\n  prev() {\n    if (g.VIEW === 'thread') {\n      return window.scrollTo(0, 0);\n    } else {\n      return Nav.scroll(-1);\n    }\n  },\n\n  next() {\n    if (g.VIEW === 'thread') {\n      return window.scrollTo(0, d.body.scrollHeight);\n    } else {\n      return Nav.scroll(+1);\n    }\n  },\n\n  getThread() {\n    if (g.VIEW === 'thread') { return g.threads.get(`${g.BOARD}.${g.THREADID}`).nodes.root; }\n    if ($.hasClass(doc, 'catalog-mode')) { return; }\n    for (var threadRoot of $$(g.SITE.selectors.thread)) {\n      var thread = Get.threadFromRoot(threadRoot);\n      if (thread.isHidden && !thread.stub) { continue; }\n      if (Header.getTopOf(threadRoot) >= -threadRoot.getBoundingClientRect().height) { // not scrolled past\n        return threadRoot;\n      }\n    }\n  },\n\n  scroll(delta) {\n    let next;\n    d.activeElement?.blur();\n    let thread = Nav.getThread();\n    if (!thread) { return; }\n    const axis = delta === +1 ?\n      'following'\n    :\n      'preceding';\n    if (next = $.x(`${axis}-sibling::${g.SITE.xpath.thread}[not(@hidden)][1]`, thread)) {\n      // Unless we're not at the beginning of the current thread,\n      // and thus wanting to move to beginning,\n      // or we're above the first thread and don't want to skip it.\n      const top = Header.getTopOf(thread);\n      if (((delta === +1) && (top < 5)) || ((delta === -1) && (top > -5))) { thread = next; }\n    }\n    // Add extra space to the end of the page if necessary so that all threads can be selected by keybinds.\n    const extra = (Header.getTopOf(thread) + doc.clientHeight) - d.body.getBoundingClientRect().bottom;\n    if (extra > 0) { d.body.style.marginBottom = `${extra}px`; }\n\n    Header.scrollTo(thread);\n\n    if ((extra > 0) && !Nav.haveExtra) {\n      Nav.haveExtra = true;\n      return $.on(d, 'scroll', Nav.removeExtra);\n    }\n  },\n\n  removeExtra() {\n    const extra = doc.clientHeight - d.body.getBoundingClientRect().bottom;\n    if (extra > 0) {\n      return d.body.style.marginBottom = `${extra}px`;\n    } else {\n      d.body.style.marginBottom = '';\n      delete Nav.haveExtra;\n      return $.off(d, 'scroll', Nav.removeExtra);\n    }\n  }\n};\nexport default Nav;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, g } from \"../globals/globals\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageHost = {\n  init() {\n    if ((!(this.useFaster = /\\S/.test(Conf['fourchanImageHost']))) || (g.SITE.software !== 'yotsuba') || !['index', 'thread'].includes(g.VIEW)) { return; }\n    return Callbacks.Post.push({\n      name: 'Image Host Rewriting',\n      cb:   this.node\n    });\n  },\n\n  suggestions: ['i.4cdn.org', 'is2.4chan.org'],\n\n  host() {\n    return Conf['fourchanImageHost'].trim() || 'i.4cdn.org';\n  },\n  flashHost() {\n    return 'i.4cdn.org';\n  },\n  thumbHost() {\n    return 'i.4cdn.org';\n  },\n  test(hostname) {\n    return (hostname === 'i.4cdn.org') || ImageHost.regex.test(hostname);\n  },\n\n  regex: /^is\\d*\\.4chan(?:nel)?\\.org$/,\n\n  node() {\n    if (this.isClone) { return; }\n    const host = ImageHost.host();\n    if (this.file && ImageHost.test(this.file.url.split('/')[2]) && !/\\.swf$/.test(this.file.url)) {\n      this.file.link.hostname = host;\n      if (this.file.thumbLink) { this.file.thumbLink.hostname = host; }\n      this.file.url = this.file.link.href;\n    }\n    return ImageHost.fixLinks($$('a', this.nodes.comment));\n  },\n\n  fixLinks(links) {\n    for (var link of links) {\n      if (ImageHost.test(link.hostname) && !/\\.swf$/.test(link.pathname)) {\n        var host = ImageHost.host();\n        if (link.hostname !== host) { link.hostname = host; }\n      }\n    }\n  }\n};\nexport default ImageHost;\n","import Callbacks from \"../classes/Callbacks\";\nimport Config from \"../config/Config\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, E } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Volume = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) ||\n      (!Conf['Image Expansion'] && !Conf['Image Hover'] && !Conf['Image Hover in Catalog'] && !Conf['Gallery'])) { return; }\n\n    $.sync('Allow Sound', function(x) {\n      Conf['Allow Sound'] = x;\n      if (Volume.inputs) Volume.inputs.unmute.checked = x;\n    });\n\n    $.sync('Default Volume', function(x) {\n      Conf['Default Volume'] = x;\n      if (Volume.inputs) Volume.inputs.volume.value = x;\n    });\n\n    if (Conf['Mouse Wheel Volume']) {\n      Callbacks.Post.push({\n        name: 'Mouse Wheel Volume',\n        cb:   this.node\n      });\n    }\n\n    if (g.SITE.noAudio?.(g.BOARD)) { return; }\n\n    if (Conf['Mouse Wheel Volume']) {\n      Callbacks.CatalogThread.push({\n        name: 'Mouse Wheel Volume',\n        cb:   this.catalogNode\n      });\n    }\n\n    const unmuteEntry = UI.checkbox('Allow Sound', 'Allow Sound');\n    unmuteEntry.title = Config.main['Images and Videos']['Allow Sound'][1];\n\n    const volumeEntry = $.el('label',\n      {title: 'Default volume for videos.'});\n    $.extend(volumeEntry,\n      {innerHTML: \"<input name=\\\"Default Volume\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.01\\\" value=\\\"\" + E(Conf[\"Default Volume\"]) + \"\\\"> Volume\"});\n\n    this.inputs = {\n      unmute: unmuteEntry.firstElementChild,\n      volume: volumeEntry.firstElementChild\n    };\n\n    $.on(this.inputs.unmute, 'change', $.cb.checked);\n    $.on(this.inputs.volume, 'change', $.cb.value);\n\n    Header.menu.addEntry({el: unmuteEntry, order: 200});\n    return Header.menu.addEntry({el: volumeEntry, order: 201});\n  },\n\n  setup(video) {\n    video.muted  = !Conf['Allow Sound'];\n    video.volume = Conf['Default Volume'];\n    return $.on(video, 'volumechange', Volume.change);\n  },\n\n  change() {\n    const {muted, volume} = this;\n    const items = {\n      'Allow Sound': !muted,\n      'Default Volume': volume\n    };\n    for (var key in items) {\n      var val = items[key];\n      if (Conf[key] === val) {\n        delete items[key];\n      }\n    }\n    $.set(items);\n    $.extend(Conf, items);\n    if (Volume.inputs) {\n      Volume.inputs.unmute.checked = !muted;\n      return Volume.inputs.volume.value = volume;\n    }\n  },\n\n  node() {\n    if (g.SITE.noAudio?.(this.board)) { return; }\n    for (var file of this.files) {\n      if (file.isVideo) {\n        if (file.thumb) { $.on(file.thumb,                                'wheel', Volume.wheel.bind(Header.hover)); }\n        $.on(($('.file-info', file.text) || file.link), 'wheel', Volume.wheel.bind(file.thumbLink));\n      }\n    }\n  },\n\n  catalogNode() {\n    const file = this.thread.OP.files[0];\n    if (!file?.isVideo) { return; }\n    return $.on(this.nodes.thumb, 'wheel', Volume.wheel.bind(Header.hover));\n  },\n\n  wheel(e) {\n    let el;\n    if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey) { return; }\n    if (!(el = $('video:not([data-md5])', this))) { return; }\n    if (el.muted || !$.hasAudio(el)) { return; }\n    let volume = el.volume + 0.1;\n    if (e.deltaY < 0) { volume *= 1.1; }\n    if (e.deltaY > 0) { volume /= 1.1; }\n    el.volume = $.minmax(volume - 0.1, 0, 1);\n    return e.preventDefault();\n  }\n};\nexport default Volume;\n","import Redirect from \"../Archive/Redirect\";\nimport Notice from \"../classes/Notice\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport CrossOrigin from \"../platform/CrossOrigin\";\nimport ImageHost from \"./ImageHost\";\nimport Volume from \"./Volume\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS204: Change includes calls to have a more natural evaluation order\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageCommon = {\n  // Pause and mute video in preparation for removing the element from the document.\n  pause(video) {\n    if (video.nodeName !== 'VIDEO') { return; }\n    video.pause();\n    $.off(video, 'volumechange', Volume.change);\n    return video.muted = true;\n  },\n\n  rewind(el) {\n    if (el.nodeName === 'VIDEO') {\n      if (el.readyState >= el.HAVE_METADATA) { return el.currentTime = 0; }\n    } else if (/\\.gif$/.test(el.src)) {\n      return $.queueTask(() => el.src = el.src);\n    }\n  },\n\n  pushCache(el) {\n    ImageCommon.cache = el;\n    return $.on(el, 'error', ImageCommon.cacheError);\n  },\n\n  popCache() {\n    const el = ImageCommon.cache;\n    $.off(el, 'error', ImageCommon.cacheError);\n    delete ImageCommon.cache;\n    return el;\n  },\n\n  cacheError() {\n    if (ImageCommon.cache === this) { return delete ImageCommon.cache; }\n  },\n\n  decodeError(file, fileObj) {\n    let message;\n    if (file.error?.code !== MediaError.MEDIA_ERR_DECODE) { return false; }\n    if (!(message = $('.warning', fileObj.thumb.parentNode))) {\n      message = $.el('div', {className:   'warning'});\n      $.after(fileObj.thumb, message);\n    }\n    message.textContent = 'Error: Corrupt or unplayable video';\n    return true;\n  },\n\n  isFromArchive(file) {\n    return (g.SITE.software === 'yotsuba') && !ImageHost.test(file.src.split('/')[2]);\n  },\n\n  error(file, post, fileObj, delay, cb) {\n    let timeoutID;\n    const src = fileObj.url.split('/');\n    let url = null;\n    if ((g.SITE.software === 'yotsuba') && Conf['404 Redirect']) {\n      url = Redirect.to('file', {\n        boardID:  post.board.ID,\n        filename: src[src.length - 1]\n      });\n    }\n    if (!url || !Redirect.securityCheck(url)) { url = null; }\n\n    if ((post.isDead || fileObj.isDead) && !ImageCommon.isFromArchive(file)) { return cb(url); }\n\n    if (delay != null) { timeoutID = setTimeout((() => cb(url)), delay); }\n    if (post.isDead || fileObj.isDead) { return; }\n    const redirect = function() {\n      if (!ImageCommon.isFromArchive(file)) {\n        if (delay != null) { clearTimeout(timeoutID); }\n        return cb(url);\n      }\n    };\n\n    const threadJSON = g.SITE.urls.threadJSON?.(post);\n    if (!threadJSON) { return; }\n    var parseJSON = function(isArchiveURL) {\n      let needle, postObj;\n      if (this.status === 404) {\n        let archivedThreadJSON;\n        if (!isArchiveURL && (archivedThreadJSON = g.SITE.urls.archivedThreadJSON?.(post))) {\n          $.ajax(archivedThreadJSON, {onloadend() { return parseJSON.call(this, true); }});\n        } else {\n          post.kill(!post.isClone, fileObj.index);\n        }\n      }\n      if (this.status !== 200) { return redirect(); }\n      for (postObj of this.response.posts) {\n        if (postObj.no === post.ID) { break; }\n      }\n      if (postObj.no !== post.ID) {\n        post.kill();\n        return redirect();\n      } else if ((needle = fileObj.docIndex, g.SITE.Build.parseJSON(postObj, post.board).filesDeleted.includes(needle))) {\n        post.kill(true);\n        return redirect();\n      } else {\n        return url = fileObj.url;\n      }\n    };\n    return $.ajax(threadJSON, {onloadend() { return parseJSON.call(this); }});\n  },\n\n  // Add controls, but not until the mouse is moved over the video.\n  addControls(video) {\n    var handler = function() {\n      $.off(video, 'mouseover', handler);\n      // Hacky workaround for Firefox forever-loading bug for very short videos\n      const t = new Date().getTime();\n      return $.asap((() => ($.engine !== 'gecko') || ((video.readyState >= 3) && (video.currentTime <= Math.max(0.1, (video.duration - 0.5)))) || (new Date().getTime() >= (t + 1000))), () => video.controls = true);\n    };\n    return $.on(video, 'mouseover', handler);\n  },\n\n  // XXX Estimate whether clicks are on the video controls and should be ignored.\n  onControls(e) {\n    return (Conf['Show Controls'] && Conf['Click Passthrough'] && (e.target.nodeName === 'VIDEO')) ||\n      (e.target.controls && ((e.target.getBoundingClientRect().bottom - e.clientY) < 35));\n  },\n\n  download(e) {\n    if (this.protocol === 'blob:') { return true; }\n    e.preventDefault();\n    const {href, download} = this;\n    return CrossOrigin.file(href, function(blob) {\n      if (blob) {\n        const a = $.el('a', {\n          href: URL.createObjectURL(blob),\n          download,\n          hidden: true\n        }\n        );\n        $.add(d.body, a);\n        a.click();\n        return $.rm(a);\n      } else {\n        return new Notice('warning', `Could not download ${href}`, 20);\n      }\n    });\n  }\n};\nexport default ImageCommon;\n",null,null,null,null,null,"import Callbacks from \"../classes/Callbacks\";\nimport UI from \"../General/UI\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Menu = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu']) { return; }\n\n    this.button = $.el('a', {\n      className: 'menu-button',\n      href:      'javascript:;'\n    }\n    );\n\n    $.extend(this.button, {textContent: \"🞃\"});\n\n    this.menu = new UI.Menu('post');\n    Callbacks.Post.push({\n      name: 'Menu',\n      cb:   this.node\n    });\n\n    return Callbacks.CatalogThread.push({\n      name: 'Menu',\n      cb:   this.catalogNode\n    });\n  },\n\n  node() {\n    if (this.isClone) {\n      const button = $('.menu-button', this.nodes.info);\n      $.rmClass(button, 'active');\n      $.rm($('.dialog', this.nodes.info));\n      Menu.makeButton(this, button);\n      return;\n    }\n    return $.add(this.nodes.info, Menu.makeButton(this));\n  },\n\n  catalogNode() {\n    return $.after(this.nodes.icons, Menu.makeButton(this.thread.OP));\n  },\n\n  makeButton(post, button) {\n    if (!button) { button = Menu.button.cloneNode(true); }\n    $.on(button, 'click', function(e) {\n      return Menu.menu.toggle(e, this, post);\n    });\n    return button;\n  }\n};\nexport default Menu;\n",null,null,null,"import Notice from \"../classes/Notice\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict, HOUR } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar BoardConfig = {\n  cbs: [],\n\n  init() {\n    let middle;\n    if (g.SITE.software !== 'yotsuba') { return; }\n    const now = Date.now();\n    if (now - (2 * HOUR) >= ((middle = Conf['boardConfig'].lastChecked || 0)) || middle > now) {\n      return $.ajax(`${location.protocol}//a.4cdn.org/boards.json`,\n        {onloadend: this.load});\n    } else {\n      const {boards} = Conf['boardConfig'];\n      return this.set(boards);\n    }\n  },\n\n  load() {\n    let boards;\n    if ((this.status === 200) && this.response && this.response.boards) {\n      boards = dict();\n      for (var board of this.response.boards) {\n        boards[board.board] = board;\n      }\n      $.set('boardConfig', {boards, lastChecked: Date.now()});\n    } else {\n      ({boards} = Conf['boardConfig']);\n      const err = (() => { switch (this.status) {\n        case 0:   return 'Connection Error';\n        case 200: return 'Invalid Data';\n        default:          return `Error ${this.statusText} (${this.status})`;\n      } })();\n      new Notice('warning', `Failed to load board configuration. ${err}`, 20);\n    }\n    return BoardConfig.set(boards);\n  },\n\n  set(boards) {\n    this.boards = boards;\n    for (var ID in g.boards) {\n      var board = g.boards[ID];\n      board.config = this.boards[ID] || {};\n    }\n    for (var cb of this.cbs) {\n      $.queueTask(cb);\n    }\n  },\n\n  ready(cb) {\n    if (this.boards) {\n      return cb();\n    } else {\n      return this.cbs.push(cb);\n    }\n  },\n\n  sfwBoards(sfw) {\n    return (() => {\n      const result = [];\n      const object = this.boards || Conf['boardConfig'].boards;\n      for (var board in object) {\n        var data = object[board];\n        if (!!data.ws_board === sfw) {\n          result.push(board);\n        }\n      }\n      return result;\n    })();\n  },\n\n  isSFW(board) {\n    return !!(this.boards || Conf['boardConfig'].boards)[board]?.ws_board;\n  },\n\n  domain(board) {\n    // return `boards.${BoardConfig.isSFW(board) ? '4channel' : '4chan'}.org`;\n    return 'boards.4chan.org';\n  },\n\n  isArchived(board) {\n    // assume archive exists if no data available to prevent cleaning of archived threads\n    const data = (this.boards || Conf['boardConfig'].boards)[board];\n    return !data || data.is_archived;\n  },\n\n  noAudio(boardID) {\n    if (g.SITE.software !== 'yotsuba') { return false; }\n    const boards = this.boards || Conf['boardConfig'].boards;\n    return boards && boards[boardID] && !boards[boardID].webm_audio;\n  },\n\n  title(boardID) {\n    return (this.boards || Conf['boardConfig'].boards)?.[boardID]?.title || '';\n  }\n};\nexport default BoardConfig;\n",null,"import { d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PostRedirect = {\n  init() {\n    return $.on(d, 'QRPostSuccessful', e => {\n      if (!e.detail.redirect) { return; }\n      this.event = e;\n      this.delays = 0;\n      return $.queueTask(() => {\n        if ((e === this.event) && (this.delays === 0)) {\n          return location.href = e.detail.redirect;\n        }\n      });\n    });\n  },\n\n  delays: 0,\n\n  delay() {\n    if (!this.event) { return null; }\n    const e = this.event;\n    this.delays++;\n    return () => {\n      if (e !== this.event) { return; }\n      this.delays--;\n      if (this.delays === 0) {\n        return location.href = e.detail.redirect;\n      }\n    };\n  }\n};\nexport default PostRedirect;\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ExpandComment = {\n  init() {\n    if ((g.VIEW !== 'index') || !Conf['Comment Expansion'] || Conf['JSON Index']) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Comment Expansion',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    let a;\n    if (a = $('.abbr > a:not([onclick])', this.nodes.comment)) {\n      return $.on(a, 'click', ExpandComment.cb);\n    }\n  },\n\n  callbacks: [],\n\n  cb(e) {\n    e.preventDefault();\n    return ExpandComment.expand(Get.postFromNode(this));\n  },\n\n  expand(post) {\n    let a;\n    if (post.nodes.longComment && !post.nodes.longComment.parentNode) {\n      $.replace(post.nodes.shortComment, post.nodes.longComment);\n      post.nodes.comment = post.nodes.longComment;\n      return;\n    }\n    if (!(a = $('.abbr > a', post.nodes.comment))) { return; }\n    a.textContent = `Post No.${post} Loading...`;\n    return $.cache(g.SITE.urls.threadJSON({boardID: post.boardID, threadID: post.threadID}), function() { return ExpandComment.parse(this, a, post); });\n  },\n\n  contract(post) {\n    if (!post.nodes.shortComment) { return; }\n    const a = $('.abbr > a', post.nodes.shortComment);\n    a.textContent = 'here';\n    $.replace(post.nodes.longComment, post.nodes.shortComment);\n    return post.nodes.comment = post.nodes.shortComment;\n  },\n\n  parse(req, a, post) {\n    let postObj, spoilerRange;\n    const {status} = req;\n    if (![200, 304].includes(status)) {\n      a.textContent = status ? `Error ${req.statusText} (${status})` : 'Connection Error';\n      return;\n    }\n\n    const {\n      posts\n    } = req.response;\n    if (spoilerRange = posts[0].custom_spoiler) {\n      g.SITE.Build.spoilerRange[g.BOARD] = spoilerRange;\n    }\n\n    for (postObj of posts) {\n      if (postObj.no === post.ID) { break; }\n    }\n    if (postObj.no !== post.ID) {\n      a.textContent = `Post No.${post} not found.`;\n      return;\n    }\n\n    const {comment} = post.nodes;\n    const clone = comment.cloneNode(false);\n    clone.innerHTML = postObj.com;\n    // Fix pathnames\n    for (var quote of $$('.quotelink', clone)) {\n      var href = quote.getAttribute('href');\n      if (href[0] === '/') { continue; } // Cross-board quote, or board link\n      if (href[0] === '#') {\n        quote.href = `${a.pathname.split(/\\/+/).splice(0,4).join('/')}${href}`;\n      } else {\n        quote.href = `${a.pathname.split(/\\/+/).splice(0,3).join('/')}/${href}`;\n      }\n    }\n    post.nodes.shortComment = comment;\n    $.replace(comment, clone);\n    post.nodes.comment = (post.nodes.longComment = clone);\n    post.parseComment();\n    post.parseQuotes();\n\n    for (var callback of ExpandComment.callbacks) {\n      callback.call(post);\n    }\n  }\n};\nexport default ExpandComment;;\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Notice from \"../classes/Notice\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport { Conf, d, doc, g } from \"../globals/globals\";\nimport Menu from \"../Menu/Menu\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport PostRedirect from \"../Posting/PostRedirect\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteYou = {\n  init() {\n    if (!Conf['Remember Your Posts']) { return; }\n\n    this.db = new DataBoard('yourPosts');\n    $.sync('Remember Your Posts', enabled => Conf['Remember Your Posts'] = enabled);\n    $.on(d, 'QRPostSuccessful', function(e) {\n      const cb = PostRedirect.delay();\n      return $.get('Remember Your Posts', Conf['Remember Your Posts'], function(items) {\n        if (!items['Remember Your Posts']) { return; }\n        const {boardID, threadID, postID} = e.detail;\n        return QuoteYou.db.set({boardID, threadID, postID, val: true}, cb);\n      });\n    });\n\n    if (!['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n\n    if (Conf['Highlight Own Posts']) {\n      $.addClass(doc, 'highlight-own');\n    }\n\n    if (Conf['Highlight Posts Quoting You']) {\n      $.addClass(doc, 'highlight-you');\n    }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    // \\u00A0 is nbsp\n    this.mark = $.el('span', {\n      textContent: '\\u00A0(You)',\n      className:   'qmark-you'\n    }\n    );\n    Callbacks.Post.push({\n      name: 'Mark Quotes of You',\n      cb:   this.node\n    });\n\n    return QuoteYou.menu.init();\n  },\n\n  isYou(post) {\n    return !!QuoteYou.db?.get({\n      boardID:  post.boardID,\n      threadID: post.threadID,\n      postID:   post.ID\n    });\n  },\n\n  node() {\n    if (this.isClone) { return; }\n\n    if (QuoteYou.isYou(this)) {\n      $.addClass(this.nodes.root, 'yourPost');\n    }\n\n    // Stop there if there's no quotes in that post.\n    if (!this.quotes.length) { return; }\n\n    for (var quotelink of this.nodes.quotelinks) {\n      if (QuoteYou.db.get(Get.postDataFromLink(quotelink))) {\n        if (Conf['Mark Quotes of You']) { $.add(quotelink, QuoteYou.mark.cloneNode(true)); }\n        $.addClass(quotelink, 'you');\n        $.addClass(this.nodes.root, 'quotesYou');\n      }\n    }\n  },\n\n  menu: {\n    init() {\n      const label = $.el('label',\n        {className: 'toggle-you'}\n      ,\n        {innerHTML: '<input type=\"checkbox\"> You'});\n      const input = $('input', label);\n      $.on(input, 'change', QuoteYou.menu.toggle);\n      return Menu.menu?.addEntry({\n        el: label,\n        order: 80,\n        open(post) {\n          QuoteYou.menu.post = (post.origin || post);\n          input.checked = QuoteYou.isYou(post);\n          return true;\n        }\n      });\n    },\n\n    toggle() {\n      const {post} = QuoteYou.menu;\n      const data = {boardID: post.board.ID, threadID: post.thread.ID, postID: post.ID, val: true};\n      if (this.checked) {\n        QuoteYou.db.set(data);\n      } else {\n        QuoteYou.db.delete(data);\n      }\n      for (var clone of [post].concat(post.clones)) {\n        clone.nodes.root.classList.toggle('yourPost', this.checked);\n      }\n      for (var quotelink of Get.allQuotelinksLinkingTo(post)) {\n        if (this.checked) {\n          if (Conf['Mark Quotes of You']) { $.add(quotelink, QuoteYou.mark.cloneNode(true)); }\n        } else {\n          $.rm($('.qmark-you', quotelink));\n        }\n        quotelink.classList.toggle('you', this.checked);\n        if ($.hasClass(quotelink, 'quotelink')) {\n          var quoter = Get.postFromNode(quotelink).nodes.root;\n          quoter.classList.toggle('quotesYou', !!$('.quotelink.you', quoter));\n        }\n      }\n    }\n  },\n\n  cb: {\n    seek(type) {\n      let highlighted, post;\n      let result;\n      const {highlight} = g.SITE.classes;\n      if (highlighted = $(`.${highlight}`)) { $.rmClass(highlighted, highlight); }\n\n      if (!QuoteYou.lastRead || !doc.contains(QuoteYou.lastRead) || !$.hasClass(QuoteYou.lastRead, 'quotesYou')) {\n        if (!(post = (QuoteYou.lastRead = $('.quotesYou')))) {\n          new Notice('warning', 'No posts are currently quoting you, loser.', 20);\n          return;\n        }\n        if (QuoteYou.cb.scroll(post)) { return; }\n      } else {\n        post = QuoteYou.lastRead;\n      }\n\n      const str = `${type}::div[contains(@class,'quotesYou')]`;\n\n      while (post = (result = $.X(str, post)).snapshotItem(type === 'preceding' ? result.snapshotLength - 1 : 0)) {\n        if (QuoteYou.cb.scroll(post)) { return; }\n      }\n\n      const posts = $$('.quotesYou');\n      return QuoteYou.cb.scroll(posts[type === 'following' ? 0 : posts.length - 1]);\n    },\n\n    scroll(root) {\n      const post = Get.postFromRoot(root);\n      if (!post.nodes.post.getBoundingClientRect().height) {\n        return false;\n      } else {\n        QuoteYou.lastRead = root;\n        location.href = Get.url('post', post);\n        Header.scrollTo(post.nodes.post);\n        if (post.isReply) {\n          const sel = `${g.SITE.selectors.postContainer}${g.SITE.selectors.highlightable.reply}`;\n          let node = post.nodes.root;\n          if (!node.matches(sel)) { node = $(sel, node); }\n          $.addClass(node, g.SITE.classes.highlight);\n        }\n        return true;\n      }\n    }\n  }\n};\nexport default QuoteYou;\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class RandomAccessList {\n  constructor(items) {\n    this.length = 0;\n    if (items) { for (var item of items) { this.push(item); } }\n  }\n\n  push(data) {\n    let item;\n    let {ID} = data;\n    if (!ID) { ID = data.id; }\n    if (this[ID]) { return; }\n    const {last} = this;\n    this[ID] = (item = {\n      prev: last,\n      next: null,\n      data,\n      ID\n    });\n    item.prev = last;\n    this.last = last ?\n      (last.next = item)\n    :\n      (this.first = item);\n    return this.length++;\n  }\n\n  before(root, item) {\n    if ((item.next === root) || (item === root)) { return; }\n\n    this.rmi(item);\n\n    const {prev} = root;\n    root.prev = item;\n    item.next = root;\n    item.prev = prev;\n    if (prev) {\n      return prev.next = item;\n    } else {\n      return this.first = item;\n    }\n  }\n\n  after(root, item) {\n    if ((item.prev === root) || (item === root)) { return; }\n\n    this.rmi(item);\n\n    const {next} = root;\n    root.next = item;\n    item.prev = root;\n    item.next = next;\n    if (next) {\n      return next.prev = item;\n    } else {\n      return this.last = item;\n    }\n  }\n\n  prepend(item) {\n    const {first} = this;\n    if ((item === first) || !this[item.ID]) { return; }\n    this.rmi(item);\n    item.next  = first;\n    if (first) {\n      first.prev = item;\n    } else {\n      this.last = item;\n    }\n    this.first = item;\n    return delete item.prev;\n  }\n\n  shift() {\n    return this.rm(this.first.ID);\n  }\n\n  order() {\n    let item;\n    const order = [(item = this.first)];\n    while ((item = item.next)) { order.push(item); }\n    return order;\n  }\n\n  rm(ID) {\n    const item = this[ID];\n    if (!item) { return; }\n    delete this[ID];\n    this.length--;\n    this.rmi(item);\n    delete item.next;\n    return delete item.prev;\n  }\n\n  rmi(item) {\n    const {prev, next} = item;\n    if (prev) {\n      prev.next = next;\n    } else {\n      this.first = next;\n    }\n    if (next) {\n      return next.prev = prev;\n    } else {\n      return this.last = prev;\n    }\n  }\n}\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport RandomAccessList from \"../classes/RandomAccessList\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { debounce, SECOND } from \"../platform/helpers\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport Favicon from \"./Favicon\";\nimport ThreadWatcher from \"./ThreadWatcher\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Unread = {\n  init() {\n    if ((g.VIEW !== 'thread') || (\n      !Conf['Unread Count'] &&\n      !Conf['Unread Favicon'] &&\n      !Conf['Unread Line'] &&\n      !Conf['Remember Last Read Post'] &&\n      !Conf['Desktop Notifications'] &&\n      !Conf['Quote Threading']\n    )) { return; }\n\n    if (Conf['Remember Last Read Post']) {\n      $.sync('Remember Last Read Post', enabled => Conf['Remember Last Read Post'] = enabled);\n      this.db = new DataBoard('lastReadPosts', this.sync);\n    }\n\n    this.hr = $.el('hr', {\n      id: 'unread-line',\n      className: 'unread-line'\n    }\n    );\n    this.posts = new Set();\n    this.postsQuotingYou = new Set();\n    this.order = new RandomAccessList();\n    this.position = null;\n\n    Callbacks.Thread.push({\n      name: 'Unread',\n      cb:   this.node\n    });\n\n    return Callbacks.Post.push({\n      name: 'Unread',\n      cb:   this.addPost\n    });\n  },\n\n  node() {\n    Unread.thread = this;\n    Unread.title  = d.title;\n    Unread.lastReadPost = Unread.db?.get({\n      boardID: this.board.ID,\n      threadID: this.ID\n    }) || 0;\n    Unread.readCount = 0;\n    for (var ID of this.posts.keys) { if (+ID <= Unread.lastReadPost) { Unread.readCount++; } }\n    $.one(d, '4chanXInitFinished', Unread.ready);\n    $.on(d, 'PostsInserted',      Unread.onUpdate);\n    $.on(d, 'ThreadUpdate',       function(e) { if (e.detail[404]) { return Unread.update(); } });\n    const resetLink = $.el('a', {\n      href: 'javascript:;',\n      className: 'unread-reset',\n      textContent: 'Mark all unread'\n    }\n    );\n    $.on(resetLink, 'click', Unread.reset);\n    return Header.menu.addEntry({\n      el: resetLink,\n      order: 70\n    });\n  },\n\n  ready() {\n    if (Conf['Remember Last Read Post'] && Conf['Scroll to Last Read Post']) { Unread.scroll(); }\n    Unread.setLine(true);\n    Unread.read();\n    Unread.update();\n    $.on(d, 'scroll visibilitychange', Unread.read);\n    if (Conf['Unread Line']) { return $.on(d, 'visibilitychange',        Unread.setLine); }\n  },\n\n  positionPrev() {\n    if (Unread.position) { return Unread.position.prev; } else { return Unread.order.last; }\n  },\n\n  scroll() {\n    // Let the header's onload callback handle it.\n    let hash;\n    if ((hash = location.hash.match(/\\d+/)) && hash[0] in Unread.thread.posts) { return; }\n\n    let position = Unread.positionPrev();\n    while (position) {\n      var {bottom} = position.data.nodes;\n      if (!bottom.getBoundingClientRect().height) {\n        // Don't try to scroll to posts with display: none\n        position = position.prev;\n      } else {\n        Header.scrollToIfNeeded(bottom, true);\n        break;\n      }\n    }\n  },\n\n  reset() {\n    if (Unread.lastReadPost == null) { return; }\n\n    Unread.posts = new Set();\n    Unread.postsQuotingYou = new Set();\n    Unread.order = new RandomAccessList();\n    Unread.position = null;\n    Unread.lastReadPost = 0;\n    Unread.readCount = 0;\n    Unread.thread.posts.forEach(post => Unread.addPost.call(post));\n\n    $.forceSync('Remember Last Read Post');\n    if (Conf['Remember Last Read Post'] && (!Unread.thread.isDead || Unread.thread.isArchived)) {\n      Unread.db.set({\n        boardID:  Unread.thread.board.ID,\n        threadID: Unread.thread.ID,\n        val:      0\n      });\n    }\n\n    Unread.updatePosition();\n    Unread.setLine();\n    return Unread.update();\n  },\n\n  sync() {\n    if (Unread.lastReadPost == null) { return; }\n    const lastReadPost = Unread.db.get({\n      boardID: Unread.thread.board.ID,\n      threadID: Unread.thread.ID,\n      defaultValue: 0\n    });\n    if (Unread.lastReadPost >= lastReadPost) { return; }\n    Unread.lastReadPost = lastReadPost;\n\n    const postIDs = Unread.thread.posts.keys;\n    for (let i = Unread.readCount, end = postIDs.length; i < end; i++) {\n      var ID = +postIDs[i];\n      if (!Unread.thread.posts.get(ID).isFetchedQuote) {\n        if (ID > Unread.lastReadPost) { break; }\n        Unread.posts.delete(ID);\n        Unread.postsQuotingYou.delete(ID);\n      }\n      Unread.readCount++;\n    }\n\n    Unread.updatePosition();\n    Unread.setLine();\n    return Unread.update();\n  },\n\n  addPost() {\n    if (this.isFetchedQuote || this.isClone) return;\n    Unread.order.push(this);\n    if ((this.ID <= Unread.lastReadPost) || this.isHidden || QuoteYou.isYou(this)) return;\n    Unread.posts.add((Unread.posts.last = this.ID));\n    Unread.addPostQuotingYou(this);\n    return Unread.position != null ? Unread.position : (Unread.position = Unread.order[this.ID]);\n  },\n\n  addPostQuotingYou(post) {\n    for (var quotelink of post.nodes.quotelinks) {\n      if (QuoteYou.db?.get(Get.postDataFromLink(quotelink))) {\n        Unread.postsQuotingYou.add((Unread.postsQuotingYou.last = post.ID));\n        Unread.openNotification(post);\n        return;\n      }\n    }\n  },\n\n  openNotification(post, predicate=' replied to you') {\n    if (!Header.areNotificationsEnabled) { return; }\n    const notif = new Notification(`${post.info.nameBlock}${predicate}`, {\n      body: post.commentDisplay(),\n      icon: Favicon.logo\n    }\n    );\n    notif.onclick = function() {\n      Header.scrollToIfNeeded(post.nodes.bottom, true);\n      return window.focus();\n    };\n    return notif.onshow = () => setTimeout(() => notif.close()\n    , 7 * SECOND);\n  },\n\n  onUpdate() {\n    return $.queueTask(function() { // ThreadUpdater may scroll immediately after inserting posts\n      Unread.setLine();\n      Unread.read();\n      return Unread.update();\n    });\n  },\n\n  readSinglePost(post) {\n    const {ID} = post;\n    if (!Unread.posts.has(ID)) { return; }\n    Unread.posts.delete(ID);\n    Unread.postsQuotingYou.delete(ID);\n    Unread.updatePosition();\n    Unread.saveLastReadPost();\n    return Unread.update();\n  },\n\n  read: debounce(100, function(e) {\n    // Update the lastReadPost when hidden posts are added to the thread.\n    if (!Unread.posts.size && (Unread.readCount !== Unread.thread.posts.keys.length)) {\n      Unread.saveLastReadPost();\n    }\n\n    if (d.hidden || !Unread.posts.size) { return; }\n\n    let count = 0;\n    while (Unread.position) {\n      var {ID, data} = Unread.position;\n      var {bottom} = data.nodes;\n      if (!!bottom.getBoundingClientRect().height && // post has been hidden\n        (Header.getBottomOf(bottom) <= -1)) { break; }                      // post is completely read\n      count++;\n      Unread.posts.delete(ID);\n      Unread.postsQuotingYou.delete(ID);\n      Unread.position = Unread.position.next;\n    }\n\n    if (!count) { return; }\n    Unread.updatePosition();\n    Unread.saveLastReadPost();\n    if (e) { return Unread.update(); }\n  }),\n\n  updatePosition() {\n    while (Unread.position && !Unread.posts.has(Unread.position.ID)) {\n      Unread.position = Unread.position.next;\n    }\n  },\n\n  saveLastReadPost: debounce(2 * SECOND, function() {\n    let ID;\n    $.forceSync('Remember Last Read Post');\n    if (!Conf['Remember Last Read Post'] || !Unread.db) { return; }\n    const postIDs = Unread.thread.posts.keys;\n    for (let i = Unread.readCount, end = postIDs.length; i < end; i++) {\n      ID = +postIDs[i];\n      if (!Unread.thread.posts.get(ID).isFetchedQuote) {\n        if (Unread.posts.has(ID)) { break; }\n        Unread.lastReadPost = ID;\n      }\n      Unread.readCount++;\n    }\n    if (Unread.thread.isDead && !Unread.thread.isArchived) { return; }\n    return Unread.db.set({\n      boardID:  Unread.thread.board.ID,\n      threadID: Unread.thread.ID,\n      val:      Unread.lastReadPost\n    });\n  }),\n\n  setLine(force) {\n    if (!Conf['Unread Line']) { return; }\n    if (Unread.hr.hidden || d.hidden || (force === true)) {\n      const oldPosition = Unread.linePosition;\n      if (Unread.linePosition = Unread.positionPrev()) {\n        if (Unread.linePosition !== oldPosition) {\n          let node = Unread.linePosition.data.nodes.bottom;\n          if (node.nextSibling?.tagName === 'BR') { node = node.nextSibling; }\n          $.after(node, Unread.hr);\n        }\n      } else {\n        $.rm(Unread.hr);\n      }\n    }\n    return Unread.hr.hidden = Unread.linePosition === Unread.order.last;\n  },\n\n  update() {\n    const count = Unread.posts.size;\n    const countQuotingYou = Unread.postsQuotingYou.size;\n\n    if (Conf['Unread Count']) {\n      const titleQuotingYou = Conf['Quoted Title'] && countQuotingYou ? '(!) ' : '';\n      const titleCount = count || !Conf['Hide Unread Count at (0)'] ? `(${count}) ` : '';\n      const titleDead = Unread.thread.isDead ?\n        Unread.title.replace('-', (Unread.thread.isArchived ? '- Archived -' : '- 404 -'))\n      :\n        Unread.title;\n      d.title = `${titleQuotingYou}${titleCount}${titleDead}`;\n    }\n\n    Unread.saveThreadWatcherCount();\n\n    if (Conf['Unread Favicon'] && (g.SITE.software === 'yotsuba')) {\n      const {isDead} = Unread.thread;\n      return Favicon.set((\n        countQuotingYou ?\n          (isDead ? 'unreadDeadY' : 'unreadY')\n        : count ?\n          (isDead ? 'unreadDead' : 'unread')\n        :\n          (isDead ? 'dead' : 'default')\n      )\n      );\n    }\n  },\n\n  saveThreadWatcherCount: debounce(2 * SECOND, function() {\n    $.forceSync('Remember Last Read Post');\n    if (Conf['Remember Last Read Post'] && (!Unread.thread.isDead || Unread.thread.isArchived)) {\n      let posts;\n      const quotingYou = !Conf['Require OP Quote Link'] && QuoteYou.isYou(Unread.thread.OP) ? Unread.posts : Unread.postsQuotingYou;\n      if (!quotingYou.size) {\n        quotingYou.last = 0;\n      } else if (!quotingYou.has(quotingYou.last)) {\n        quotingYou.last = 0;\n        posts = Unread.thread.posts.keys;\n        for (let i = posts.length - 1; i >= 0; i--) {\n          if (quotingYou.has(+posts[i])) {\n            quotingYou.last = posts[i];\n            break;\n          }\n        }\n      }\n      return ThreadWatcher.update(g.SITE.ID, Unread.thread.board.ID, Unread.thread.ID, {\n        last: Unread.thread.lastPost,\n        isDead: Unread.thread.isDead,\n        isArchived: Unread.thread.isArchived,\n        unread: Unread.posts.size,\n        quotingYou: (quotingYou.last || 0)\n      }\n      );\n    }\n  })\n};\nexport default Unread;\n","import Callbacks from \"../classes/Callbacks\";\nimport Post from \"../classes/Post\";\nimport Get from \"../General/Get\";\nimport Index from \"../General/Index\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ExpandThread = {\n  statuses: dict(),\n  init() {\n    if (!((g.VIEW === 'index') && Conf['Thread Expansion'])) { return; }\n    if (Conf['JSON Index']) {\n      return $.on(d, 'IndexRefreshInternal', this.onIndexRefresh);\n    } else {\n      return Callbacks.Thread.push({\n        name: 'Expand Thread',\n        cb() { return ExpandThread.setButton(this); }\n      });\n    }\n  },\n\n  setButton(thread) {\n    let a;\n    if (!(thread.nodes.root && (a = $('.summary', thread.nodes.root)))) { return; }\n    a.textContent = g.SITE.Build.summaryText('+', ...a.textContent.match(/\\d+/g));\n    a.style.cursor = 'pointer';\n    return $.on(a, 'click', ExpandThread.cbToggle);\n  },\n  \n  disconnect(refresh) {\n    if ((g.VIEW === 'thread') || !Conf['Thread Expansion']) { return; }\n    for (var threadID in ExpandThread.statuses) {\n      var oldReq;\n      var status = ExpandThread.statuses[threadID];\n      if (oldReq = status.req) {\n        delete status.req;\n        oldReq.abort();\n      }\n      delete ExpandThread.statuses[threadID];\n    }\n\n    if (!refresh) { return $.off(d, 'IndexRefreshInternal', this.onIndexRefresh); }\n  },\n\n  onIndexRefresh() {\n    ExpandThread.disconnect(true);\n    return g.BOARD.threads.forEach(thread => ExpandThread.setButton(thread));\n  },\n\n  cbToggle(e) {\n    if ($.modifiedClick(e)) { return; }\n    e.preventDefault();\n    return ExpandThread.toggle(Get.threadFromNode(this));\n  },\n\n  cbToggleBottom(e) {\n    if ($.modifiedClick(e)) { return; }\n    e.preventDefault();\n    const thread = Get.threadFromNode(this);\n    $.rm(this); // remove before fixing bottom of thread position\n    const {bottom} = thread.nodes.root.getBoundingClientRect();\n    ExpandThread.toggle(thread);\n    return window.scrollBy(0, (thread.nodes.root.getBoundingClientRect().bottom - bottom));\n  },\n\n  toggle(thread) {\n    let a;\n    if (!(thread.nodes.root && (a = $('.summary', thread.nodes.root)))) { return; }\n    if (thread.ID in ExpandThread.statuses) {\n      return ExpandThread.contract(thread, a, thread.nodes.root);\n    } else {\n      return ExpandThread.expand(thread, a);\n    }\n  },\n\n  expand(thread, a) {\n    let status;\n    ExpandThread.statuses[thread] = (status = {});\n    a.textContent = g.SITE.Build.summaryText('...', ...a.textContent.match(/\\d+/g));\n    status.req = $.cache(g.SITE.urls.threadJSON({boardID: thread.board.ID, threadID: thread.ID}), function() {\n      if (this !== status.req) { return; } // aborted\n      delete status.req;\n      return ExpandThread.parse(this, thread, a);\n    });\n    return status.numReplies = $$(g.SITE.selectors.replyOriginal, thread.nodes.root).length;\n  },\n\n  contract(thread, a, threadRoot) {\n    let oldReq;\n    const status = ExpandThread.statuses[thread];\n    delete ExpandThread.statuses[thread];\n    if (oldReq = status.req) {\n      delete status.req;\n      oldReq.abort();\n      if (a) { a.textContent = g.SITE.Build.summaryText('+', ...a.textContent.match(/\\d+/g)); }\n      return;\n    }\n\n    let replies = $$('.thread > .replyContainer', threadRoot);\n    if (status.numReplies) { replies = replies.slice(0, (-status.numReplies)); }\n    let postsCount = 0;\n    let filesCount = 0;\n    for (var reply of replies) {\n      // rm clones\n      if (Conf['Quote Inlining']) { var inlined;\n      while ((inlined = $('.inlined', reply))) { inlined.click(); } }\n      postsCount++;\n      if ('file' in Get.postFromRoot(reply)) { filesCount++; }\n      $.rm(reply);\n    }\n    if (Index.enabled) { // otherwise handled by Main.addPosts\n      $.event('PostsRemoved', null, a.parentNode);\n    }\n    a.textContent = g.SITE.Build.summaryText('+', postsCount, filesCount);\n    return $.rm($('.summary-bottom', threadRoot));\n  },\n\n  parse(req, thread, a) {\n    let root;\n    if (![200, 304].includes(req.status)) {\n      a.textContent = req.status ? `Error ${req.statusText} (${req.status})` : 'Connection Error';\n      return;\n    }\n\n    g.SITE.Build.spoilerRange[thread.board] = req.response.posts[0].custom_spoiler;\n\n    const posts      = [];\n    const postsRoot  = [];\n    let filesCount = 0;\n    for (var postData of req.response.posts) {\n      var post;\n      if (postData.no === thread.ID) { continue; }\n      if ((post = thread.posts.get(postData.no)) && !post.isFetchedQuote) {\n        if ('file' in post) { filesCount++; }\n        ({root} = post.nodes);\n        postsRoot.push(root);\n        continue;\n      }\n      root = g.SITE.Build.postFromObject(postData, thread.board.ID);\n      post = new Post(root, thread, thread.board);\n      if ('file' in post) { filesCount++; }\n      posts.push(post);\n      postsRoot.push(root);\n    }\n    Main.callbackNodes('Post', posts);\n    $.after(a, postsRoot);\n    $.event('PostsInserted', null, a.parentNode);\n\n    const postsCount    = postsRoot.length;\n    a.textContent = g.SITE.Build.summaryText('-', postsCount, filesCount);\n\n    if (root) {\n      const a2 = a.cloneNode(true);\n      a2.classList.add('summary-bottom');\n      $.on(a2, 'click', ExpandThread.cbToggleBottom);\n      return $.after(root, a2);\n    }\n  }\n};\nexport default ExpandThread;\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport Index from \"../General/Index\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport ExpandThread from \"../Miscellaneous/ExpandThread\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport ThreadWatcher from \"./ThreadWatcher\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar UnreadIndex = {\n  lastReadPost: dict(),\n  hr:           dict(),\n  markReadLink: dict(),\n\n  init() {\n    if ((g.VIEW !== 'index') || !Conf['Remember Last Read Post'] || !Conf['Unread Line in Index']) { return; }\n\n    this.enabled = true;\n    this.db = new DataBoard('lastReadPosts', this.sync);\n\n    Callbacks.Thread.push({\n      name: 'Unread Line in Index',\n      cb:   this.node\n    });\n\n    $.on(d, 'IndexRefreshInternal', this.onIndexRefresh);\n    return $.on(d, 'PostsInserted PostsRemoved', this.onPostsInserted);\n  },\n\n  node() {\n    UnreadIndex.lastReadPost[this.fullID] = UnreadIndex.db.get({\n      boardID: this.board.ID,\n      threadID: this.ID\n    }) || 0;\n    if (!Index.enabled) { // let onIndexRefresh handle JSON Index\n      return UnreadIndex.update(this);\n    }\n  },\n\n  onIndexRefresh(e) {\n    if (e.detail.isCatalog) { return; }\n    return (() => {\n      const result = [];\n      for (var threadID of e.detail.threadIDs) {\n        var thread = g.threads.get(threadID);\n        result.push(UnreadIndex.update(thread));\n      }\n      return result;\n    })();\n  },\n\n  onPostsInserted(e) {\n    if (e.target === Index.root) { return; } // onIndexRefresh handles this case\n    const thread = Get.threadFromNode(e.target);\n    if (!thread || (thread.nodes.root !== e.target)) { return; }\n    const wasVisible = !!UnreadIndex.hr[thread.fullID]?.parentNode;\n    UnreadIndex.update(thread);\n    if (Conf['Scroll to Last Read Post'] && (e.type === 'PostsInserted') && !wasVisible && !!UnreadIndex.hr[thread.fullID]?.parentNode) {\n      return Header.scrollToIfNeeded(UnreadIndex.hr[thread.fullID], true);\n    }\n  },\n\n  sync() {\n    return g.threads.forEach(function(thread) {\n      const lastReadPost = UnreadIndex.db.get({\n        boardID: thread.board.ID,\n        threadID: thread.ID\n      }) || 0;\n      if (lastReadPost !== UnreadIndex.lastReadPost[thread.fullID]) {\n        UnreadIndex.lastReadPost[thread.fullID] = lastReadPost;\n        if (thread.nodes.root?.parentNode) {\n          return UnreadIndex.update(thread);\n        }\n      }\n    });\n  },\n\n  update(thread) {\n    let divider;\n    const lastReadPost = UnreadIndex.lastReadPost[thread.fullID];\n    let repliesShown = 0;\n    let repliesRead = 0;\n    let firstUnread = null;\n    thread.posts.forEach(function(post) {\n      if (post.isReply && thread.nodes.root.contains(post.nodes.root)) {\n        repliesShown++;\n        if (post.ID <= lastReadPost) {\n          return repliesRead++;\n        } else if ((!firstUnread || (post.ID < firstUnread.ID)) && !post.isHidden && !QuoteYou.isYou(post)) {\n          return firstUnread = post;\n        }\n      }\n    });\n\n    let hr = UnreadIndex.hr[thread.fullID];\n    if (firstUnread && (repliesRead || ((lastReadPost === thread.OP.ID) && (!$(g.SITE.selectors.summary, thread.nodes.root) || thread.ID in ExpandThread.statuses)))) {\n      if (!hr) {\n        hr = (UnreadIndex.hr[thread.fullID] = $.el('hr',\n          {className: 'unread-line'}));\n      }\n      $.before(firstUnread.nodes.root, hr);\n    } else {\n      $.rm(hr);\n    }\n\n    const hasUnread = repliesShown ?\n      firstUnread || !repliesRead\n    : Index.enabled ?\n      thread.lastPost > lastReadPost\n    :\n      thread.OP.ID > lastReadPost;\n    thread.nodes.root.classList.toggle('unread-thread', hasUnread);\n\n    let link = UnreadIndex.markReadLink[thread.fullID];\n    if (!link) {\n      link = (UnreadIndex.markReadLink[thread.fullID] = $.el('a', {\n        className: 'unread-mark-read brackets-wrap',\n        href: 'javascript:;',\n        textContent: 'Mark Read'\n      }\n      ));\n      $.on(link, 'click', UnreadIndex.markRead);\n    }\n    if (divider = $(g.SITE.selectors.threadDivider, thread.nodes.root)) { // divider inside thread as in Tinyboard\n      return $.before(divider, link);\n    } else {\n      return $.add(thread.nodes.root, link);\n    }\n  },\n\n  markRead() {\n    const thread = Get.threadFromNode(this);\n    UnreadIndex.lastReadPost[thread.fullID] = thread.lastPost;\n    UnreadIndex.db.set({\n      boardID:  thread.board.ID,\n      threadID: thread.ID,\n      val:      thread.lastPost\n    });\n    $.rm(UnreadIndex.hr[thread.fullID]);\n    thread.nodes.root.classList.remove('unread-thread');\n    return ThreadWatcher.update(g.SITE.ID, thread.board.ID, thread.ID, {\n      last: thread.lastPost,\n      unread: 0,\n      quotingYou: 0\n    }\n    );\n  }\n};\nexport default UnreadIndex;\n","import ThreadWatcherPage from './ThreadWatcher/ThreadWatcher.html';\nimport $ from \"../platform/$\";\nimport Board from '../classes/Board';\nimport Callbacks from '../classes/Callbacks';\nimport DataBoard from '../classes/DataBoard';\nimport Thread from '../classes/Thread';\nimport Filter from '../Filtering/Filter';\nimport Main from '../main/Main';\nimport $$ from '../platform/$$';\nimport Config from '../config/Config';\nimport CrossOrigin from '../platform/CrossOrigin';\nimport PostRedirect from '../Posting/PostRedirect';\nimport QuoteYou from '../Quotelinks/QuoteYou';\nimport Unread from './Unread';\nimport UnreadIndex from './UnreadIndex';\nimport Header from '../General/Header';\nimport Index from '../General/Index';\nimport { Conf, d, doc, g } from '../globals/globals';\nimport Menu from '../Menu/Menu';\nimport UI from '../General/UI';\nimport Get from '../General/Get';\nimport { dict, HOUR, MINUTE } from '../platform/helpers';\nimport Icon from '../Icons/icon';\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar ThreadWatcher = {\n  init() {\n    let sc;\n    if (!(this.enabled = Conf['Thread Watcher'])) { return; }\n\n    this.shortcut = (sc = $.el('a', {\n      id:    'watcher-link',\n      title: 'Thread Watcher',\n      href:  'javascript:;',\n    }));\n    Icon.set(this.shortcut, 'eye', 'watcher');\n\n    this.db     = new DataBoard('watchedThreads', this.refresh, true);\n    this.dbLM   = new DataBoard('watcherLastModified', null, true);\n    this.dialog = UI.dialog('thread-watcher', { innerHTML: ThreadWatcherPage });\n    Icon.set(this.dialog.firstElementChild.firstElementChild, 'refresh');\n    this.status = $('#watcher-status', this.dialog);\n    this.list   = this.dialog.lastElementChild;\n    this.refreshButton = $('.refresh', this.dialog);\n    this.closeButton = $('.move > .close', this.dialog);\n    this.unreaddb = Unread.db || UnreadIndex.db || new DataBoard('lastReadPosts');\n    this.unreadEnabled = Conf['Remember Last Read Post'];\n\n    $.on(d, 'QRPostSuccessful',   this.cb.post);\n    $.on(sc, 'click', this.toggleWatcher);\n    $.on(this.refreshButton, 'click', this.buttonFetchAll);\n    $.on(this.closeButton, 'click', this.toggleWatcher);\n\n    this.menu.addHeaderMenuEntry();\n    $.onExists(doc, 'body', this.addDialog);\n\n    switch (g.VIEW) {\n      case 'index':\n        $.on(d, 'IndexUpdate', this.cb.onIndexUpdate);\n        break;\n      case 'thread':\n        $.on(d, 'ThreadUpdate', this.cb.onThreadRefresh);\n        break;\n    }\n\n    if (Conf['Fixed Thread Watcher']) {\n      $.addClass(doc, 'fixed-watcher');\n    }\n    if (!Conf['Persistent Thread Watcher']) {\n      $.addClass(ThreadWatcher.shortcut, 'disabled');\n      this.dialog.hidden = true;\n    }\n\n    Header.addShortcut('watcher', sc, 510,);\n\n    ThreadWatcher.initLastModified();\n    ThreadWatcher.fetchAuto();\n    $.on(window, 'visibilitychange focus', () => $.queueTask(ThreadWatcher.fetchAuto));\n\n    if (Conf['Menu'] && Index.enabled) {\n      Menu.menu.addEntry({\n        el: $.el('a', {\n          href:      'javascript:;',\n          className: 'has-shortcut-text'\n        }\n        , {innerHTML: '<span></span><span class=\"shortcut-text\">Alt+click</span>'}),\n        order: 6,\n        open({thread}) {\n          if (Conf['Index Mode'] !== 'catalog') { return false; }\n          this.el.firstElementChild.textContent = ThreadWatcher.isWatched(thread) ?\n            'Unwatch'\n          :\n            'Watch';\n          if (this.cb) { $.off(this.el, 'click', this.cb); }\n          this.cb = function() {\n            $.event('CloseMenu');\n            return ThreadWatcher.toggle(thread);\n          };\n          $.on(this.el, 'click', this.cb);\n          return true;\n        }\n      });\n    }\n\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n\n    Callbacks.Post.push({\n      name: 'Thread Watcher',\n      cb:   this.node\n    });\n    return Callbacks.CatalogThread.push({\n      name: 'Thread Watcher',\n      cb:   this.catalogNode\n    });\n  },\n\n  isWatched(thread) {\n    return !!ThreadWatcher.db?.get({boardID: thread.board.ID, threadID: thread.ID});\n  },\n\n  isWatchedRaw(boardID, threadID) {\n    return !!ThreadWatcher.db?.get({boardID, threadID});\n  },\n\n  setToggler(toggler, isWatched) {\n    toggler.classList.toggle('watched', isWatched);\n    return toggler.title = `${isWatched ? 'Unwatch' : 'Watch'} Thread`;\n  },\n\n  node() {\n    let toggler;\n    if (this.isReply) { return; }\n    if (this.isClone) {\n      toggler = $('.watch-thread-link', this.nodes.info);\n    } else {\n      toggler = $.el('a', {\n        href: 'javascript:;',\n        className: 'watch-thread-link'\n      }\n      );\n      $.before($('input', this.nodes.info), toggler);\n    }\n    const siteID = g.SITE.ID;\n    const boardID = this.board.ID;\n    const threadID = this.thread.ID;\n    const data = ThreadWatcher.db.get({siteID, boardID, threadID});\n    ThreadWatcher.setToggler(toggler, !!data);\n    $.on(toggler, 'click', ThreadWatcher.cb.toggle);\n    // Add missing excerpt for threads added by Auto Watch\n    if (data && (data.excerpt == null)) {\n      return $.queueTask(() => {\n        return ThreadWatcher.update(siteID, boardID, threadID, {excerpt: Get.threadExcerpt(this.thread)});\n    });\n    }\n  },\n\n  catalogNode() {\n    if (ThreadWatcher.isWatched(this.thread)) { $.addClass(this.nodes.root, 'watched'); }\n    return $.on(this.nodes.root, 'mousedown click', e => {\n      if ((e.button !== 0) || !e.altKey) { return; }\n      if (e.type === 'click') { ThreadWatcher.toggle(this.thread); }\n      return e.preventDefault();\n    });\n  }, // Also on mousedown to prevent highlighting thumbnail in Firefox.\n\n  addDialog() {\n    if (!Main.isThisPageLegit()) { return; }\n    ThreadWatcher.build();\n    return $.prepend(d.body, ThreadWatcher.dialog);\n  },\n\n  toggleWatcher() {\n    $.toggleClass(ThreadWatcher.shortcut, 'disabled');\n    return ThreadWatcher.dialog.hidden = !ThreadWatcher.dialog.hidden;\n  },\n\n  cb: {\n    openAll() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var a of $$('a.watcher-link', ThreadWatcher.list)) {\n        $.open(a.href);\n      }\n      return $.event('CloseMenu');\n    },\n    openUnread() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var a of $$('.replies-unread > a.watcher-link', ThreadWatcher.list)) {\n        $.open(a.href);\n      }\n      return $.event('CloseMenu');\n    },\n    openDeads() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var a of $$('.dead-thread > a.watcher-link', ThreadWatcher.list)) {\n        $.open(a.href);\n      }\n      return $.event('CloseMenu');\n    },\n    pruneDeads() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var {siteID, boardID, threadID, data} of ThreadWatcher.getAll()) {\n        if (data.isDead) {\n          ThreadWatcher.db.delete({siteID, boardID, threadID});\n        }\n      }\n      ThreadWatcher.refresh();\n      return $.event('CloseMenu');\n    },\n    dismiss() {\n      for (var {siteID, boardID, threadID, data} of ThreadWatcher.getAll()) {\n        if (data.quotingYou) {\n          ThreadWatcher.update(siteID, boardID, threadID, {dismiss: data.quotingYou || 0});\n        }\n      }\n      return $.event('CloseMenu');\n    },\n    toggle() {\n      const {thread} = Get.postFromNode(this);\n      return ThreadWatcher.toggle(thread);\n    },\n    rm() {\n      const {siteID} = this.parentNode.dataset;\n      const [boardID, threadID] = this.parentNode.dataset.fullID.split('.');\n      return ThreadWatcher.rm(siteID, boardID, +threadID);\n    },\n    post(e) {\n      const {boardID, threadID, postID} = e.detail;\n      const cb = PostRedirect.delay();\n      if (postID === threadID) {\n        if (Conf['Auto Watch']) {\n          return ThreadWatcher.addRaw(boardID, threadID, {}, cb);\n        }\n      } else if (Conf['Auto Watch Reply']) {\n        return ThreadWatcher.add((g.threads.get(boardID + '.' + threadID) || new Thread(threadID, g.boards[boardID] || new Board(boardID))), cb);\n      }\n    },\n    onIndexUpdate(e) {\n      const {db}    = ThreadWatcher;\n      const siteID  = g.SITE.ID;\n      const boardID = g.BOARD.ID;\n      let nKilled = 0;\n      for (var threadID in db.data[siteID].boards[boardID]) {\n        // Don't prune threads that have yet to appear in index.\n        var data = db.data[siteID].boards[boardID][threadID];\n        if (!data?.isDead && !e.detail.threads.includes(`${boardID}.${threadID}`)) {\n          if (!e.detail.threads.some(fullID => +fullID.split('.')[1] > threadID)) { continue; }\n          if (Conf['Auto Prune'] || !(data && (typeof data === 'object'))) { // corrupt data\n            db.delete({boardID, threadID});\n            nKilled++;\n          } else {\n            ThreadWatcher.fetchStatus({siteID, boardID, threadID, data});\n          }\n        }\n      }\n      if (nKilled) { return ThreadWatcher.refresh(); }\n    },\n    onThreadRefresh(e) {\n      const thread = g.threads.get(e.detail.threadID);\n      if (!e.detail[404] || !ThreadWatcher.isWatched(thread)) { return; }\n      // Update dead status.\n      return ThreadWatcher.add(thread);\n    }\n  },\n\n  requests: [],\n  fetched:  0,\n\n  fetch(url, {siteID, force}, args, cb) {\n    if (ThreadWatcher.requests.length === 0) {\n      ThreadWatcher.status.textContent = '...';\n      $.addClass(ThreadWatcher.refreshButton, 'spin');\n    }\n    const onloadend = function() {\n      if (this.finished) { return; }\n      this.finished = true;\n      ThreadWatcher.fetched++;\n      if (ThreadWatcher.fetched === ThreadWatcher.requests.length) {\n        ThreadWatcher.clearRequests();\n      } else {\n        ThreadWatcher.status.textContent = `${Math.round((ThreadWatcher.fetched / ThreadWatcher.requests.length) * 100)}%`;\n      }\n      return cb.apply(this, args);\n    };\n    const ajax = siteID === g.SITE.ID ? $.ajax : CrossOrigin.ajax;\n    if (force) {\n      delete $.lastModified.ThreadWatcher?.[url];\n    }\n    const req = $.whenModified(\n      url,\n      'ThreadWatcher',\n      onloadend,\n      { timeout: MINUTE, ajax }\n    );\n    return ThreadWatcher.requests.push(req);\n  },\n\n  clearRequests() {\n    ThreadWatcher.requests = [];\n    ThreadWatcher.fetched = 0;\n    ThreadWatcher.status.textContent = '';\n    return $.rmClass(ThreadWatcher.refreshButton, 'spin');\n  },\n\n  abort() {\n    delete ThreadWatcher.syncing;\n    for (var req of ThreadWatcher.requests) {\n      if (!req.finished) {\n        req.finished = true;\n        req.abort();\n      }\n    }\n    return ThreadWatcher.clearRequests();\n  },\n\n  initLastModified() {\n    const lm = ($.lastModified['ThreadWatcher'] || ($.lastModified['ThreadWatcher'] = dict()));\n    for (var siteID in ThreadWatcher.dbLM.data) {\n      var boards = ThreadWatcher.dbLM.data[siteID];\n      for (var boardID in boards.boards) {\n        var data = boards.boards[boardID];\n        if (ThreadWatcher.db.get({siteID, boardID})) {\n          for (var url in data) {\n            var date = data[url];\n            lm[url] = date;\n          }\n        } else {\n          ThreadWatcher.dbLM.delete({siteID, boardID});\n        }\n      }\n    }\n  },\n\n  fetchAuto() {\n    let middle;\n    clearTimeout(ThreadWatcher.timeout);\n    if (!Conf['Auto Update Thread Watcher']) { return; }\n    const {db} = ThreadWatcher;\n    const interval = Conf['Show Page'] || (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) ? 5 * MINUTE : 2 * HOUR;\n    const now = Date.now();\n    if ((now - interval >= ((middle = db.data.lastChecked || 0)) || middle > now) && !d.hidden && !!d.hasFocus()) {\n      ThreadWatcher.fetchAllStatus(interval);\n    }\n    return ThreadWatcher.timeout = setTimeout(ThreadWatcher.fetchAuto, interval);\n  },\n\n  buttonFetchAll() {\n    if (ThreadWatcher.syncing || ThreadWatcher.requests.length) {\n      return ThreadWatcher.abort();\n    } else {\n      return ThreadWatcher.fetchAllStatus();\n    }\n  },\n\n  fetchAllStatus(interval=0) {\n    ThreadWatcher.status.textContent = '...';\n    $.addClass(ThreadWatcher.refreshButton, 'spin');\n    ThreadWatcher.syncing = true;\n    const dbs = [ThreadWatcher.db, ThreadWatcher.unreaddb, QuoteYou.db].filter(x => x);\n    let n = 0;\n    return dbs.map((dbi) =>\n      dbi.forceSync(function() {\n        if ((++n) === dbs.length) {\n          let middle;\n          if (!ThreadWatcher.syncing) { return; } // aborted\n          delete ThreadWatcher.syncing;\n          if (0 > (middle = Date.now() - (ThreadWatcher.db.data.lastChecked || 0)) || middle >= interval) { // not checked in another tab\n            // XXX On vichan boards, last_modified field of threads.json does not account for sage posts.\n            // Occasionally check replies field of catalog.json to find these posts.\n            let middle1;\n            const {db} = ThreadWatcher;\n            const now = Date.now();\n            const deep = !(now - (2 * HOUR) < ((middle1 = db.data.lastChecked2 || 0)) && middle1 <= now);\n            const boards = ThreadWatcher.getAll(true);\n            for (var board of boards) {\n              ThreadWatcher.fetchBoard(board, deep);\n            }\n            db.setLastChecked();\n            if (deep) { db.setLastChecked('lastChecked2'); }\n          }\n          if (ThreadWatcher.fetched === ThreadWatcher.requests.length) {\n            return ThreadWatcher.clearRequests();\n          }\n        }\n      }));\n  },\n\n  fetchBoard(board, deep) {\n    if (!board.some(thread => !thread.data.isDead)) { return; }\n    let force = false;\n    for (var thread of board) {\n      var {data} = thread;\n      if (!data.isDead && (data.last !== -1)) {\n        if (Conf['Show Page'] && (data.page == null)) { force = true; }\n        if ((data.modified == null)) { force = (thread.force = true); }\n      }\n    }\n    const {siteID, boardID} = board[0];\n    const site = g.sites[siteID];\n    if (!site) { return; }\n    const urlF = deep && site.threadModTimeIgnoresSage ? 'catalogJSON' : 'threadsListJSON';\n    const url = site.urls[urlF]?.({siteID, boardID});\n    if (!url) { return; }\n    return ThreadWatcher.fetch(url, {siteID, force}, [board, url], ThreadWatcher.parseBoard);\n  },\n\n  parseBoard(board, url) {\n    let page, thread;\n    if (this.status !== 200) { return; }\n    const {siteID, boardID} = board[0];\n    const lmDate = this.getResponseHeader('Last-Modified');\n    ThreadWatcher.dbLM.extend({siteID, boardID, val: $.item(url, lmDate)});\n    const threads = dict();\n    let pageLength = 0;\n    let nThreads = 0;\n    let oldest = null;\n    try {\n      pageLength = this.response[0]?.threads.length || 0;\n      for (let i = 0; i < this.response.length; i++) {\n        page = this.response[i];\n        for (var item of page.threads) {\n          threads[item.no] = {\n            page: i + 1,\n            index: nThreads,\n            modified: item.last_modified,\n            replies: item.replies\n          };\n          nThreads++;\n          if ((oldest == null) || (item.no < oldest)) {\n            oldest = item.no;\n          }\n        }\n      }\n    } catch (error) {\n      for (thread of board) {\n        ThreadWatcher.fetchStatus(thread);\n      }\n    }\n    for (thread of board) {\n      var {threadID, data} = thread;\n      if (threads[threadID]) {\n        var index, modified, replies;\n        ({page, index, modified, replies} = threads[threadID]);\n        if (Conf['Show Page']) {\n          var lastPage = g.sites[siteID].isPrunedByAge?.({siteID, boardID}) ?\n            threadID === oldest\n          :\n            index >= (nThreads - pageLength);\n          ThreadWatcher.update(siteID, boardID, threadID, {page, lastPage});\n        }\n        if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) {\n          if ((modified !== data.modified) || ((replies != null) && (replies !== data.replies))) {\n            (thread.newData || (thread.newData = {})).modified = modified;\n            ThreadWatcher.fetchStatus(thread);\n          }\n        }\n      } else {\n        ThreadWatcher.fetchStatus(thread);\n      }\n    }\n  },\n\n  fetchStatus(thread) {\n    const {siteID, boardID, threadID, data, force} = thread;\n    const url = g.sites[siteID]?.urls.threadJSON?.({siteID, boardID, threadID});\n    if (!url) { return; }\n    if (data.isDead && !force) { return; }\n    if (data.last === -1) { return; } // 404 or no JSON API\n    return ThreadWatcher.fetch(url, {siteID, force}, [thread], ThreadWatcher.parseStatus);\n  },\n\n  parseStatus(thread, isArchiveURL) {\n    let isDead, last;\n    let {siteID, boardID, threadID, data, newData, force} = thread;\n    const site = g.sites[siteID];\n    if ((this.status === 200) && this.response) {\n      let isArchived;\n      last = this.response.posts[this.response.posts.length-1].no;\n      const replies = this.response.posts.length-1;\n      isDead = (isArchived = !!(this.response.posts[0].archived || isArchiveURL));\n      if (isDead && Conf['Auto Prune']) {\n        ThreadWatcher.rm(siteID, boardID, threadID);\n        return;\n      }\n\n      if ((last === data.last) && (isDead === data.isDead) && (isArchived === data.isArchived)) { return; }\n\n      const lastReadPost = ThreadWatcher.unreaddb.get({siteID, boardID, threadID, defaultValue: 0});\n      let unread = data.unread || 0;\n      let quotingYou = data.quotingYou || 0;\n      const youOP = !!QuoteYou.db?.get({siteID, boardID, threadID, postID: threadID});\n\n      for (var postObj of this.response.posts) {\n        if ((postObj.no <= (data.last || 0)) || (postObj.no <= lastReadPost)) { continue; }\n        if (QuoteYou.db?.get({siteID, boardID, threadID, postID: postObj.no})) { continue; }\n\n        var quotesYou = false;\n        if (!Conf['Require OP Quote Link'] && youOP) {\n          quotesYou = true;\n        } else if (QuoteYou.db && postObj.com) {\n          var match;\n          var regexp = site.regexp.quotelinkHTML;\n          regexp.lastIndex = 0;\n          while (match = regexp.exec(postObj.com)) {\n            if (QuoteYou.db.get({\n              siteID,\n              boardID:  match[1] ? encodeURIComponent(match[1]) : boardID,\n              threadID: match[2] || threadID,\n              postID:   match[3] || match[2] || threadID\n            })) {\n              quotesYou = true;\n              break;\n            }\n          }\n        }\n\n        if (!unread || (!quotingYou && quotesYou)) {\n          if (Filter.isHidden(site.Build.parseJSON(postObj, {siteID, boardID}))) { continue; }\n        }\n\n        unread++;\n        if (quotesYou) { quotingYou = postObj.no; }\n      }\n\n      if (!newData) { newData = {}; }\n      $.extend(newData, {last, replies, isDead, isArchived, unread, quotingYou});\n      return ThreadWatcher.update(siteID, boardID, threadID, newData);\n\n    } else if (this.status === 404) {\n      const archiveURL = g.sites[siteID]?.urls.archivedThreadJSON?.({siteID, boardID, threadID});\n      if (!isArchiveURL && archiveURL) {\n        return ThreadWatcher.fetch(archiveURL, {siteID, force}, [thread, true], ThreadWatcher.parseStatus);\n      } else if (site.mayLackJSON && (data.last == null)) {\n        return ThreadWatcher.update(siteID, boardID, threadID, {last: -1});\n      } else {\n        return ThreadWatcher.update(siteID, boardID, threadID, {isDead: true});\n      }\n    }\n  },\n\n  getAll(groupByBoard) {\n    const all = [];\n    for (var siteID in ThreadWatcher.db.data) {\n      var boards = ThreadWatcher.db.data[siteID];\n      for (var boardID in boards.boards) {\n        var cont;\n        var threads = boards.boards[boardID];\n        if (Conf['Current Board'] && ((siteID !== g.SITE.ID) || (boardID !== g.BOARD.ID))) {\n          continue;\n        }\n        if (groupByBoard) {\n          all.push((cont = []));\n        }\n        for (var threadID in threads) {\n          var data = threads[threadID];\n          if (data && (typeof data === 'object')) {\n            (groupByBoard ? cont : all).push({siteID, boardID, threadID, data});\n          }\n        }\n      }\n    }\n    return all;\n  },\n\n  makeLine(siteID, boardID, threadID, data) {\n    let page;\n    const x = $.el('a', {\n      textContent: '✕',\n      href: 'javascript:;'\n    }\n    );\n    $.on(x, 'click', ThreadWatcher.cb.rm);\n\n    let {excerpt, isArchived} = data;\n    if (!excerpt) { excerpt = `/${boardID}/ - No.${threadID}`; }\n    if (Conf['Show Site Prefix']) { excerpt = ThreadWatcher.prefixes[siteID] + excerpt; }\n\n    const link = $.el('a', {\n      href: g.sites[siteID]?.urls.thread({siteID, boardID, threadID}, isArchived) || '',\n      title: excerpt,\n      className: 'watcher-link'\n    }\n    );\n\n    if (Conf['Show Page'] && (data.page != null)) {\n      page = $.el('span', {\n        textContent: `[${data.page}]`,\n        className: 'watcher-page'\n      }\n      );\n      $.add(link, page);\n    }\n\n    if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count'] && (data.unread != null)) {\n      const count = $.el('span', {\n        textContent: `(${data.unread})`,\n        className: 'watcher-unread'\n      }\n      );\n      $.add(link, count);\n    }\n\n    const title = $.el('span', {\n      textContent: excerpt,\n      className: 'watcher-title'\n    }\n    );\n    $.add(link, title);\n\n    const div = $.el('div');\n    const fullID = `${boardID}.${threadID}`;\n    div.dataset.fullID = fullID;\n    div.dataset.siteID = siteID;\n    if ((g.VIEW === 'thread') && (fullID === `${g.BOARD}.${g.THREADID}`)) { $.addClass(div, 'current'); }\n    if (data.isDead) { $.addClass(div, 'dead-thread'); }\n    if (Conf['Show Page']) {\n      if (data.lastPage) { $.addClass(div, 'last-page'); }\n      if (data.page != null) { div.dataset.page = data.page; }\n    }\n    if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) {\n      if (data.unread === 0) { $.addClass(div, 'replies-read'); }\n      if (data.unread) { $.addClass(div, 'replies-unread'); }\n      if ((data.quotingYou || 0) > (data.dismiss || 0)) { $.addClass(div, 'replies-quoting-you'); }\n    }\n    $.add(div, [x, $.tn(' '), link]);\n    return div;\n  },\n\n  setPrefixes(threads) {\n    const prefixes = dict();\n    for (var {siteID} of threads) {\n      if (siteID in prefixes) { continue; }\n      var len = 0;\n      var prefix = '';\n      var conflicts = Object.keys(prefixes);\n      while (conflicts.length > 0) {\n        len++;\n        prefix = siteID.slice(0, len);\n        var conflicts2 = [];\n        for (var siteID2 of conflicts) {\n          if (siteID2.slice(0, len) === prefix) {\n            conflicts2.push(siteID2);\n          } else if (prefixes[siteID2].length < len) {\n            prefixes[siteID2] = siteID2.slice(0, len);\n          }\n        }\n        conflicts = conflicts2;\n      }\n      prefixes[siteID] = prefix;\n    }\n    return ThreadWatcher.prefixes = prefixes;\n  },\n\n  build() {\n    const nodes = [];\n    const threads = ThreadWatcher.getAll();\n    ThreadWatcher.setPrefixes(threads);\n    for (var {siteID, boardID, threadID, data} of threads) {\n      // Add missing excerpt for threads added by Auto Watch\n      var thread;\n      if ((data.excerpt == null) && (siteID === g.SITE.ID) && (thread = g.threads.get(`${boardID}.${threadID}`)) && thread.OP) {\n        ThreadWatcher.db.extend({boardID, threadID, val: {excerpt: Get.threadExcerpt(thread)}});\n      }\n      nodes.push(ThreadWatcher.makeLine(siteID, boardID, threadID, data));\n    }\n    const {list} = ThreadWatcher;\n    $.rmAll(list);\n    $.add(list, nodes);\n\n    return ThreadWatcher.refreshIcon();\n  },\n\n  refresh() {\n    ThreadWatcher.build();\n\n    g.threads.forEach(function(thread) {\n      const isWatched = ThreadWatcher.isWatched(thread);\n      if (thread.OP) {\n        for (var post of [thread.OP, ...thread.OP.clones]) {\n          var toggler;\n          if (toggler = $('.watch-thread-link', post.nodes.info)) {\n            ThreadWatcher.setToggler(toggler, isWatched);\n          }\n        }\n      }\n      if (thread.catalogView) { return thread.catalogView.nodes.root.classList.toggle('watched', isWatched); }\n    });\n\n    if (Conf['Pin Watched Threads']) {\n      return $.event('SortIndex', {deferred: Conf['Index Mode'] !== 'catalog'});\n    }\n  },\n\n  refreshIcon() {\n    for (var className of ['replies-unread', 'replies-quoting-you']) {\n      ThreadWatcher.shortcut.classList.toggle(className, !!$(`.${className}`, ThreadWatcher.dialog));\n    }\n  },\n\n  update(siteID, boardID, threadID, newData) {\n    let data, key, line, val;\n    if (!(data = ThreadWatcher.db?.get({siteID, boardID, threadID}))) { return; }\n    if (newData.isDead && Conf['Auto Prune']) {\n      ThreadWatcher.rm(siteID, boardID, threadID);\n      return;\n    }\n    if (newData.isDead || (newData.last === -1)) {\n      for (key of ['isArchived', 'page', 'lastPage', 'unread', 'quotingyou']) {\n        if (!(key in newData)) {\n          newData[key] = undefined;\n        }\n      }\n    }\n    if ((newData.last != null) && (newData.last < data.last)) {\n      newData.modified = undefined;\n    }\n    let n = 0;\n    for (key in newData) { val = newData[key]; if (data[key] !== val) { n++; } }\n    if (!n) { return; }\n    ThreadWatcher.db.extend({siteID, boardID, threadID, val: newData});\n    if (line = $(`#watched-threads > [data-site-i-d='${siteID}'][data-full-i-d='${boardID}.${threadID}']`, ThreadWatcher.dialog)) {\n      const newLine = ThreadWatcher.makeLine(siteID, boardID, threadID, data);\n      $.replace(line, newLine);\n      return ThreadWatcher.refreshIcon();\n    } else {\n      return ThreadWatcher.refresh();\n    }\n  },\n\n  set404(boardID, threadID, cb) {\n    let data;\n    if (!(data = ThreadWatcher.db?.get({boardID, threadID}))) { return cb(); }\n    if (Conf['Auto Prune']) {\n      ThreadWatcher.db.delete({boardID, threadID});\n      return cb();\n    }\n    if (data.isDead && !((data.isArchived != null) || (data.page != null) || (data.lastPage != null) || (data.unread != null) || (data.quotingYou != null))) { return cb(); }\n    return ThreadWatcher.db.extend({boardID, threadID, val: {isDead: true, isArchived: undefined, page: undefined, lastPage: undefined, unread: undefined, quotingYou: undefined}}, cb);\n  },\n\n  toggle(thread) {\n    const siteID   = g.SITE.ID;\n    const boardID  = thread.board.ID;\n    const threadID = thread.ID;\n    if (ThreadWatcher.db.get({boardID, threadID})) {\n      return ThreadWatcher.rm(siteID, boardID, threadID);\n    } else {\n      return ThreadWatcher.add(thread);\n    }\n  },\n\n  add(thread, cb) {\n    const data     = {};\n    const siteID   = g.SITE.ID;\n    const boardID  = thread.board.ID;\n    const threadID = thread.ID;\n    if (thread.isDead) {\n      if (Conf['Auto Prune'] && ThreadWatcher.db.get({boardID, threadID})) {\n        ThreadWatcher.rm(siteID, boardID, threadID, cb);\n        return;\n      }\n      data.isDead = true;\n    }\n    if (thread.OP) { data.excerpt = Get.threadExcerpt(thread); }\n    return ThreadWatcher.addRaw(boardID, threadID, data, cb);\n  },\n\n  addRaw(boardID, threadID, data, cb) {\n    const oldData = ThreadWatcher.db.get({ boardID, threadID, defaultValue: dict() });\n    delete oldData.last;\n    delete oldData.modified;\n    $.extend(oldData, data);\n    ThreadWatcher.db.set({boardID, threadID, val: oldData}, cb);\n    ThreadWatcher.refresh();\n    const thread = {siteID: g.SITE.ID, boardID, threadID, data, force: true};\n    if (Conf['Show Page'] && !data.isDead) {\n      return ThreadWatcher.fetchBoard([thread]);\n    } else if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) {\n      return ThreadWatcher.fetchStatus(thread);\n    }\n  },\n\n  rm(siteID, boardID, threadID, cb) {\n    ThreadWatcher.db.delete({siteID, boardID, threadID}, cb);\n    return ThreadWatcher.refresh();\n  },\n\n  menu: {\n    init() {\n      if (!Conf['Thread Watcher']) { return; }\n      const menu = (this.menu = new UI.Menu('thread watcher'));\n      $.on($('.menu-button', ThreadWatcher.dialog), 'click', function(e) {\n        return menu.toggle(e, this, ThreadWatcher);\n      });\n      return this.addMenuEntries();\n    },\n\n    addHeaderMenuEntry() {\n      if (g.VIEW !== 'thread') { return; }\n      const entryEl = $.el('a',\n        {href: 'javascript:;'});\n      Header.menu.addEntry({\n        el: entryEl,\n        order: 60,\n        open() {\n          const [addClass, rmClass, text] = !!ThreadWatcher.db.get({boardID: g.BOARD.ID, threadID: g.THREADID}) ?\n            ['unwatch-thread', 'watch-thread', 'Unwatch thread']\n          :\n            ['watch-thread', 'unwatch-thread', 'Watch thread'];\n          $.addClass(entryEl, addClass);\n          $.rmClass(entryEl, rmClass);\n          entryEl.textContent = text;\n          return true;\n        }\n      });\n      return $.on(entryEl, 'click', () => ThreadWatcher.toggle(g.threads.get(`${g.BOARD}.${g.THREADID}`)));\n    },\n\n    addMenuEntries() {\n      const entries = [];\n\n      // `Open all` entry\n      entries.push({\n        text: 'Open all threads',\n        cb: ThreadWatcher.cb.openAll,\n        open() {\n          this.el.classList.toggle('disabled', !ThreadWatcher.list.firstElementChild);\n          return true;\n        }\n      });\n\n      // `Open Unread` entry\n      entries.push({\n        text: 'Open unread threads',\n        cb: ThreadWatcher.cb.openUnread,\n        open() {\n          this.el.classList.toggle('disabled', !$('.replies-unread', ThreadWatcher.list));\n          return true;\n        }\n      });\n\n      // `Open dead threads` entry\n      entries.push({\n        text: 'Open dead threads',\n        cb: ThreadWatcher.cb.openDeads,\n        open() {\n          this.el.classList.toggle('disabled', !$('.dead-thread', ThreadWatcher.list));\n          return true;\n        }\n      });\n\n      // `Prune dead threads` entry\n      entries.push({\n        text: 'Prune dead threads',\n        cb: ThreadWatcher.cb.pruneDeads,\n        open() {\n          this.el.classList.toggle('disabled', !$('.dead-thread', ThreadWatcher.list));\n          return true;\n        }\n      });\n\n      // `Dismiss posts quoting you` entry\n      entries.push({\n        text: 'Dismiss posts quoting you',\n        title: 'Unhighlight the thread watcher icon and threads until there are new replies quoting you.',\n        cb: ThreadWatcher.cb.dismiss,\n        open() {\n          this.el.classList.toggle('disabled', !$.hasClass(ThreadWatcher.shortcut, 'replies-quoting-you'));\n          return true;\n        }\n      });\n\n      for (var {text, title, cb, open} of entries) {\n        var entry = {\n          el: $.el('a', {\n            textContent: text,\n            href: 'javascript:;'\n          }\n          )\n        };\n        if (title) { entry.el.title = title; }\n        $.on(entry.el, 'click', cb);\n        entry.open = open.bind(entry);\n        this.menu.addEntry(entry);\n      }\n\n      // Settings checkbox entries:\n      for (var name in Config.threadWatcher) {\n        var conf = Config.threadWatcher[name];\n        this.addCheckbox(name, conf[1]);\n      }\n\n    },\n\n    addCheckbox(name, desc) {\n      const entry = {\n        type: 'thread watcher',\n        el: UI.checkbox(name, name.replace(' Thread Watcher', ''))\n      };\n      entry.el.title = desc;\n      const input = entry.el.firstElementChild;\n      if ((name === 'Show Unread Count') && !ThreadWatcher.unreadEnabled) {\n        input.disabled = true;\n        $.addClass(entry.el, 'disabled');\n        entry.el.title += '\\n[Remember Last Read Post is disabled.]';\n      }\n      $.on(input, 'change', $.cb.checked);\n      if (['Current Board', 'Show Page', 'Show Unread Count', 'Show Site Prefix'].includes(name)) { $.on(input, 'change', ThreadWatcher.refresh); }\n      if (['Show Page', 'Show Unread Count', 'Auto Update Thread Watcher'].includes(name)) { $.on(input, 'change', ThreadWatcher.fetchAuto); }\n      return this.menu.addEntry(entry);\n    }\n  }\n};\nexport default ThreadWatcher;\n",null,"import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, E, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport QuoteThreading from \"../Quotelinks/QuoteThreading\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ReplyPruning = {\n  init() {\n    if ((g.VIEW !== 'thread') || !Conf['Reply Pruning']) { return; }\n\n    this.container = $.frag();\n\n    this.summary = $.el('span', {\n      hidden:    true,\n      className: 'summary'\n    }\n    );\n    this.summary.style.cursor = 'pointer';\n    $.on(this.summary, 'click', () => {\n      this.inputs.enabled.checked = !this.inputs.enabled.checked;\n      return $.event('change', null, this.inputs.enabled);\n    });\n\n    const label = UI.checkbox('Prune Replies', 'Show Last', Conf['Prune All Threads']);\n    const el = $.el('span',\n      {title: 'Maximum number of replies to show.'}\n    ,\n      {innerHTML: \" <input type=\\\"number\\\" name=\\\"Max Replies\\\" min=\\\"0\\\" step=\\\"1\\\" value=\\\"\" + E(Conf[\"Max Replies\"]) + \"\\\" class=\\\"field\\\">\"});\n    $.prepend(el, label);\n\n    this.inputs = {\n      enabled: label.firstElementChild,\n      replies: el.lastElementChild\n    };\n\n    this.setEnabled.call(this.inputs.enabled);\n    $.on(this.inputs.enabled, 'change', this.setEnabled);\n    $.on(this.inputs.replies, 'change', $.cb.value);\n\n    Header.menu.addEntry({\n      el,\n      order: 190\n    });\n\n    return Callbacks.Thread.push({\n      name: 'Reply Pruning',\n      cb:   this.node\n    });\n  },\n\n  position: 0,\n  hidden: 0,\n  hiddenFiles: 0,\n  total: 0,\n  totalFiles: 0,\n\n  setEnabled() {\n    const other = QuoteThreading.input;\n    if (this.checked && other?.checked) {\n      other.checked = false;\n      $.event('change', null, other);\n    }\n    return ReplyPruning.active = this.checked;\n  },\n\n  showIfHidden(id) {\n    if (ReplyPruning.container && $(`#${id}`, ReplyPruning.container)) {\n      ReplyPruning.inputs.enabled.checked = false;\n      return $.event('change', null, ReplyPruning.inputs.enabled);\n    }\n  },\n\n  node() {\n    let middle;\n    ReplyPruning.thread = this;\n\n    if (this.isSticky) {\n      ReplyPruning.active = (ReplyPruning.inputs.enabled.checked = true);\n      if (QuoteThreading.input) {\n        // Disable Quote Threading for this thread but don't save the setting.\n        Conf['Thread Quotes'] = (QuoteThreading.input.checked = false);\n      }\n    }\n\n    this.posts.forEach(function(post) {\n      if (post.isReply) {\n        ReplyPruning.total++;\n        if (post.file) { return ReplyPruning.totalFiles++; }\n      }\n    });\n\n    // If we're linked to a post that we would hide, don't hide the posts in the first place.\n    if (\n      ReplyPruning.active &&\n      /^#p\\d+$/.test(location.hash) &&\n      (1 <= (middle = this.posts.keys.indexOf(location.hash.slice(2))) && middle < 1 + Math.max(ReplyPruning.total - +Conf[\"Max Replies\"], 0))\n    ) {\n      ReplyPruning.active = (ReplyPruning.inputs.enabled.checked = false);\n    }\n\n    $.after(this.OP.nodes.root, ReplyPruning.summary);\n\n    $.on(ReplyPruning.inputs.enabled, 'change', ReplyPruning.update);\n    $.on(ReplyPruning.inputs.replies, 'change', ReplyPruning.update);\n    $.on(d, 'ThreadUpdate', ReplyPruning.updateCount);\n    $.on(d, 'ThreadUpdate', ReplyPruning.update);\n\n    return ReplyPruning.update();\n  },\n\n  updateCount(e) {\n    if (e.detail[404]) { return; }\n    for (var fullID of e.detail.newPosts) {\n      ReplyPruning.total++;\n      if (g.posts.get(fullID).file) { ReplyPruning.totalFiles++; }\n    }\n  },\n\n  update() {\n    let boardTop, node, post;\n    const hidden1 = ReplyPruning.hidden;\n    const hidden2 = ReplyPruning.active ?\n      Math.max(ReplyPruning.total - +Conf[\"Max Replies\"], 0)\n    :\n      0;\n\n    // Record position from bottom of document\n    const oldPos = d.body.clientHeight - window.scrollY;\n\n    const {posts} = ReplyPruning.thread;\n\n    if (ReplyPruning.hidden < hidden2) {\n      while ((ReplyPruning.hidden < hidden2) && (ReplyPruning.position < posts.keys.length)) {\n        post = posts.get(posts.keys[ReplyPruning.position++]);\n        if (post.isReply && !post.isFetchedQuote) {\n          while ((node = ReplyPruning.summary.nextSibling) && (node !== post.nodes.root)) { $.add(ReplyPruning.container, node); }\n          $.add(ReplyPruning.container, post.nodes.root);\n          ReplyPruning.hidden++;\n          if (post.file) { ReplyPruning.hiddenFiles++; }\n        }\n      }\n\n    } else if (ReplyPruning.hidden > hidden2) {\n      const frag = $.frag();\n      while ((ReplyPruning.hidden > hidden2) && (ReplyPruning.position > 0)) {\n        post = posts.get(posts.keys[--ReplyPruning.position]);\n        if (post.isReply && !post.isFetchedQuote) {\n          while ((node = ReplyPruning.container.lastChild) && (node !== post.nodes.root)) { $.prepend(frag, node); }\n          $.prepend(frag, post.nodes.root);\n          ReplyPruning.hidden--;\n          if (post.file) { ReplyPruning.hiddenFiles--; }\n        }\n      }\n      $.after(ReplyPruning.summary, frag);\n      $.event('PostsInserted', null, ReplyPruning.summary.parentNode);\n    }\n\n    ReplyPruning.summary.textContent = ReplyPruning.active ?\n      g.SITE.Build.summaryText('+', ReplyPruning.hidden, ReplyPruning.hiddenFiles)\n    :\n      g.SITE.Build.summaryText('-', ReplyPruning.total, ReplyPruning.totalFiles);\n    ReplyPruning.summary.hidden = (ReplyPruning.total <= +Conf[\"Max Replies\"]);\n\n    // Maintain position in thread when posts are added/removed above\n    if ((hidden1 !== hidden2) && ((boardTop = Header.getTopOf($('.board'))) < 0)) {\n      return window.scrollBy(0, Math.max(d.body.clientHeight - oldPos, window.scrollY + boardTop) - window.scrollY);\n    }\n  }\n};\nexport default ReplyPruning;\n",null,null,"import Callbacks from \"../classes/Callbacks\";\nimport Fetcher from \"../classes/Fetcher\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { Conf, d, doc, g } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuotePreview = {\n  init() {\n    if (!Conf['Quote Previewing']) { return; }\n\n    if (g.VIEW === 'archive') {\n      $.on(d, 'mouseover', function(e) {\n        if ((e.target.nodeName === 'A') && $.hasClass(e.target, 'quotelink')) {\n          return QuotePreview.mouseover.call(e.target, e);\n        }\n      });\n    }\n\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    return Callbacks.Post.push({\n      name: 'Quote Previewing',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    for (var link of this.nodes.quotelinks.concat([...this.nodes.backlinks], this.nodes.archivelinks)) {\n      $.on(link, 'mouseover', QuotePreview.mouseover);\n    }\n  },\n\n  mouseover(e) {\n    let origin;\n    if (($.hasClass(this, 'inlined') && !$.hasClass(doc, 'catalog-mode')) || !d.contains(this)) { return; }\n\n    const {boardID, threadID, postID} = Get.postDataFromLink(this);\n\n    const qp = $.el('div', {\n      id: 'qp',\n      className: 'dialog'\n    }\n    );\n\n    $.add(Header.hover, qp);\n    new Fetcher(boardID, threadID, postID, qp, Get.postFromNode(this));\n\n    UI.hover({\n      root: this,\n      el: qp,\n      latestEvent: e,\n      endEvents: 'mouseout click',\n      cb: QuotePreview.mouseout\n    });\n\n    if (Conf['Quote Highlighting'] && (origin = g.posts.get(`${boardID}.${postID}`))) {\n      const posts = [origin].concat(origin.clones);\n      // Remove the clone that's in the qp from the array.\n      posts.pop();\n      for (var post of posts) {\n        $.addClass(post.nodes.post, 'qphl');\n      }\n    }\n  },\n\n  mouseout() {\n    // Stop if it only contains text.\n    let root;\n    if (!(root = this.el.firstElementChild)) { return; }\n\n    $.event('PostsRemoved', null, Header.hover);\n\n    const clone = Get.postFromRoot(root);\n    let post  = clone.origin;\n    post.rmClone(root.dataset.clone);\n\n    if (!Conf['Quote Highlighting']) { return; }\n    for (post of [post].concat(post.clones)) {\n      $.rmClass(post.nodes.post, 'qphl');\n    }\n  }\n};\nexport default QuotePreview;\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nimport Callbacks from '../classes/Callbacks';\nimport CatalogThread from '../classes/CatalogThread';\nimport Notice from '../classes/Notice';\nimport Post from '../classes/Post';\nimport Thread from '../classes/Thread';\nimport Config from '../config/Config';\nimport Filter from '../Filtering/Filter';\nimport PostHiding from '../Filtering/PostHiding';\nimport ThreadHiding from '../Filtering/ThreadHiding';\nimport Main from '../main/Main';\nimport CatalogLinks from '../Miscellaneous/CatalogLinks';\nimport RelativeDates from '../Miscellaneous/RelativeDates';\nimport ThreadWatcher from '../Monitoring/ThreadWatcher';\nimport $$ from '../platform/$$';\nimport $ from '../platform/$';\nimport QuotePreview from '../Quotelinks/QuotePreview';\nimport { c, Conf, d, doc, g } from '../globals/globals';\nimport Header from './Header';\nimport UI from './UI';\nimport Menu from '../Menu/Menu';\n\nimport NavLinksPage from './Index/NavLinks.html';\nimport PageList from './Index/PageList.html';\nimport BoardConfig from './BoardConfig';\nimport Get from './Get';\nimport { dict, SECOND } from '../platform/helpers';\nimport Icon from '../Icons/icon';\n\nvar Index = {\n  showHiddenThreads: false,\n  changed: {},\n\n  enabledOn({siteID, boardID}) {\n    return Conf['JSON Index'] && (g.sites[siteID].software === 'yotsuba') && (boardID !== 'f');\n  },\n\n  init() {\n    let input, inputs, name;\n    if (g.VIEW !== 'index') { return; }\n\n    // For IndexRefresh events\n    $.one(d, '4chanXInitFinished', this.cb.initFinished);\n    $.on(d, 'PostsInserted', this.cb.postsInserted);\n\n    if (!this.enabledOn(g.BOARD)) { return; }\n\n    this.enabled = true;\n\n    Callbacks.Post.push({\n      name: 'Index Page Numbers',\n      cb:   this.node\n    });\n    Callbacks.CatalogThread.push({\n      name: 'Catalog Features',\n      cb:   this.catalogNode\n    });\n\n    this.search = history.state?.searched || '';\n    if (history.state?.mode) {\n      Conf['Index Mode'] = history.state?.mode;\n    }\n    this.currentSort = history.state?.sort;\n    if (!this.currentSort) { this.currentSort = typeof Conf['Index Sort'] === 'object' ? (\n        Conf['Index Sort'][g.BOARD.ID] || 'bump'\n      ) : (\n        Conf['Index Sort']\n      ); }\n    this.currentPage = this.getCurrentPage();\n    this.processHash();\n\n    $.addClass(doc, 'index-loading', `${Conf['Index Mode'].replace(/\\ /g, '-')}-mode`);\n    $.on(window, 'popstate', this.cb.popstate);\n    $.on(d, 'scroll', this.scroll);\n    $.on(d, 'SortIndex', this.cb.resort);\n\n    // Header refresh button\n    this.button = $.el('a', {\n      title: 'Refresh',\n      href: 'javascript:;',\n    });\n    Icon.set(this.button, 'refresh', 'Refresh')\n    $.on(this.button, 'click', () => Index.update());\n    Header.addShortcut('index-refresh', this.button, 590);\n\n    // Header \"Index Navigation\" submenu\n    const entries = [];\n    this.inputs = (inputs = dict());\n    for (name in Config.Index) {\n      var arr = Config.Index[name];\n      if (arr instanceof Array) {\n        var label = UI.checkbox(name, `${name[0]}${name.slice(1).toLowerCase()}`);\n        label.title = arr[1];\n        entries.push({el: label});\n        input = label.firstChild;\n        $.on(input, 'change', $.cb.checked);\n        inputs[name] = input;\n      }\n    }\n    $.on(inputs['Show Replies'], 'change', this.cb.replies);\n    $.on(inputs['Catalog Hover Expand'], 'change', this.cb.hover);\n    $.on(inputs['Pin Watched Threads'], 'change', this.cb.resort);\n    $.on(inputs['Anchor Hidden Threads'], 'change', this.cb.resort);\n\n    const watchSettings = function(e) {\n      if (input = $.getOwn(inputs, e.target.name)) {\n        input.checked = e.target.checked;\n        return $.event('change', null, input);\n      }\n    };\n    $.on(d, 'OpenSettings', () => $.on($.id('fourchanx-settings'), 'change', watchSettings));\n\n    const sortEntry = UI.checkbox('Per-Board Sort Type', 'Per-board sort type', (typeof Conf['Index Sort'] === 'object'));\n    sortEntry.title = 'Set the sorting order of each board independently.';\n    $.on(sortEntry.firstChild, 'change', this.cb.perBoardSort);\n    entries.splice(3, 0, {el: sortEntry});\n\n    Header.menu.addEntry({\n      el: $.el('span',\n        {textContent: 'Index Navigation'}),\n      order: 100,\n      subEntries: entries\n    });\n\n    // Navigation links at top of index\n    this.navLinks = $.el('div', {className: 'navLinks json-index'});\n    $.extend(this.navLinks, {innerHTML: NavLinksPage});\n    $('.cataloglink a', this.navLinks).href = CatalogLinks.catalog();\n    if (!BoardConfig.isArchived(g.BOARD.ID)) { $('.archlistlink', this.navLinks).hidden = true; }\n    $.on($('#index-last-refresh a', this.navLinks), 'click', this.cb.refreshFront);\n\n    // Search field\n    this.searchInput = $('#index-search', this.navLinks);\n    this.setupSearch();\n    $.on(this.searchInput, 'input', this.onSearchInput);\n    $.on($('#index-search-clear', this.navLinks), 'click', this.clearSearch);\n\n    // Hidden threads toggle\n    this.hideLabel = $('#hidden-label', this.navLinks);\n    $.on($('#hidden-toggle a', this.navLinks), 'click', this.cb.toggleHiddenThreads);\n\n    // Drop-down menus and reverse sort toggle\n    this.selectRev   = $('#index-rev',  this.navLinks);\n    this.selectMode  = $('#index-mode', this.navLinks);\n    this.selectSort  = $('#index-sort', this.navLinks);\n    this.selectSize  = $('#index-size', this.navLinks);\n    $.on(this.selectRev,  'change', this.cb.sort);\n    $.on(this.selectMode, 'change', this.cb.mode);\n    $.on(this.selectSort, 'change', this.cb.sort);\n    $.on(this.selectSize, 'change', $.cb.value);\n    $.on(this.selectSize, 'change', this.cb.size);\n    for (var select of [this.selectMode, this.selectSize]) {\n      select.value = Conf[select.name];\n    }\n    this.selectRev.checked = /-rev$/.test(Index.currentSort);\n    this.selectSort.value  = Index.currentSort.replace(/-rev$/, '');\n\n    // Last Long Reply options\n    this.lastLongOptions = $('#lastlong-options', this.navLinks);\n    this.lastLongInputs = $$('input', this.lastLongOptions);\n    this.lastLongThresholds = [0, 0];\n    this.lastLongOptions.hidden = (this.selectSort.value !== 'lastlong');\n    for (let i = 0; i < this.lastLongInputs.length; i++) {\n      input = this.lastLongInputs[i];\n      $.on(input, 'change', this.cb.lastLongThresholds);\n      var tRaw = Conf[`Last Long Reply Thresholds ${i}`];\n      input.value = (this.lastLongThresholds[i] =\n        typeof tRaw === 'object' ? (tRaw[g.BOARD.ID] ?? 100) : tRaw);\n    }\n\n    // Thread container\n    this.root = $.el('div', {className: 'board json-index'});\n    $.on(this.root, 'click', this.cb.hoverToggle);\n    this.cb.size();\n    this.cb.hover();\n\n    // Page list\n    this.pagelist = $.el('div', {className: 'pagelist json-index'});\n    $.extend(this.pagelist, {innerHTML: PageList});\n    $('.cataloglink a', this.pagelist).href = CatalogLinks.catalog();\n    $.on(this.pagelist, 'click', this.cb.pageNav);\n\n    this.update(true);\n\n    $.onExists(doc, 'title + *', () => d.title = d.title.replace(/\\ -\\ Page\\ \\d+/, ''));\n\n    $.onExists(doc, '.board > .thread > .postContainer, .board + *', function() {\n      let el;\n      g.SITE.Build.hat = $('.board > .thread > img:first-child');\n      if (g.SITE.Build.hat) {\n        g.BOARD.threads.forEach(function(thread) {\n          if (thread.nodes.root) {\n            return $.prepend(thread.nodes.root, g.SITE.Build.hat.cloneNode(false));\n          }\n        });\n        $.addClass(doc, 'hats-enabled');\n        $.addStyle(`.catalog-thread::after {background-image: url(${g.SITE.Build.hat.src});}`);\n      }\n\n      const board = $('.board');\n      $.replace(board, Index.root);\n      if (Index.loaded) {\n        $.event('PostsInserted', null, Index.root);\n      }\n      // Hacks:\n      // - When removing an element from the document during page load,\n      //   its ancestors will still be correctly created inside of it.\n      // - Creating loadable elements inside of an origin-less document\n      //   will not download them.\n      // - Combine the two and you get a download canceller!\n      //   Does not work on Firefox unfortunately. bugzil.la/939713\n      try {\n        d.implementation.createDocument(null, null, null).appendChild(board);\n      } catch (error) {}\n\n      for (el of $$('.navLinks')) { $.rm(el); }\n      $.rm($.id('ctrl-top'));\n      const topNavPos = $.id('delform').previousElementSibling;\n      $.before(topNavPos, $.el('hr'));\n      $.before(topNavPos, Index.navLinks);\n      const timeEl = $('#index-last-refresh time', Index.navLinks);\n      if (timeEl.dataset.utc) { return RelativeDates.update(timeEl); }\n    });\n\n    return Main.ready(function() {\n      let pagelist;\n      if (pagelist = $('.pagelist')) {\n        $.replace(pagelist, Index.pagelist);\n      }\n      return $.rmClass(doc, 'index-loading');\n    });\n  },\n\n  scroll() {\n    if (Index.req || !Index.liveThreadData || (Conf['Index Mode'] !== 'infinite') || (window.scrollY <= (doc.scrollHeight - (300 + window.innerHeight)))) { return; }\n    if (Index.pageNum == null) { Index.pageNum = Index.currentPage; } // Avoid having to pushState to keep track of the current page\n\n    const pageNum = ++Index.pageNum;\n    if (pageNum > Index.pagesNum) { return Index.endNotice(); }\n\n    const threadIDs = Index.threadsOnPage(pageNum);\n    return Index.buildStructure(threadIDs);\n  },\n\n  endNotice: (function() {\n    let notify = false;\n    const reset = () => notify = false;\n    return function() {\n      if (notify) { return; }\n      notify = true;\n      new Notice('info', \"Last page reached.\", 2);\n      return setTimeout(reset, 3 * SECOND);\n    };\n  })(),\n\n  menu: {\n    init() {\n      if ((g.VIEW !== 'index') || !Conf['Menu'] || !Conf['Thread Hiding Link'] || !Index.enabledOn(g.BOARD)) { return; }\n\n      return Menu.menu.addEntry({\n        el: $.el('a', {\n          href:      'javascript:;',\n          className: 'has-shortcut-text'\n        }\n        , {innerHTML: \"<span></span><span class=\\\"shortcut-text\\\">Shift+click</span>\"}),\n        order: 20,\n        open({thread}) {\n          if (Conf['Index Mode'] !== 'catalog') { return false; }\n          this.el.firstElementChild.textContent = thread.isHidden ?\n            'Unhide'\n          :\n            'Hide';\n          if (this.cb) { $.off(this.el, 'click', this.cb); }\n          this.cb = function() {\n            $.event('CloseMenu');\n            return Index.toggleHide(thread);\n          };\n          $.on(this.el, 'click', this.cb);\n          return true;\n        }\n      });\n    }\n  },\n\n  node() {\n    if (this.isReply || this.isClone || (Index.threadPosition[this.ID] == null)) { return; }\n    return this.thread.setPage(Math.floor(Index.threadPosition[this.ID] / Index.threadsNumPerPage) + 1);\n  },\n\n  catalogNode() {\n    return $.on(this.nodes.root, 'mousedown click', e => {\n      if ((e.button !== 0) || !e.shiftKey) { return; }\n      if (e.type === 'click') {\n        e.preventDefault();\n        if (Conf['MD5 Quick Filter in the Catalog'] && e.target.classList.contains('catalog-thumb')) {\n          Filter.quickFilterMD5.call(this.thread.OP);\n        } else {\n          Index.toggleHide(this.thread);\n        }\n      }\n    });\n  }, // Also on mousedown to prevent highlighting text.\n\n  toggleHide(thread) {\n    if (Index.showHiddenThreads) {\n      ThreadHiding.show(thread);\n      if (!ThreadHiding.db.get({boardID: thread.board.ID, threadID: thread.ID})) { return; }\n      // Don't save when un-hiding filtered threads.\n    } else {\n      ThreadHiding.hide(thread);\n    }\n    return ThreadHiding.saveHiddenState(thread);\n  },\n\n  cycleSortType() {\n    let i;\n    const types = Index.selectSort.options.filter(option => !option.disabled);\n    for (i = 0; i < types.length; i++) {\n      var type = types[i];\n      if (type.selected) { break; }\n    }\n    types[(i + 1) % types.length].selected = true;\n    return $.event('change', null, Index.selectSort);\n  },\n\n  cb: {\n    initFinished() {\n      Index.initFinishedFired = true;\n      return $.queueTask(() => Index.cb.postsInserted());\n    },\n\n    postsInserted() {\n      if (!Index.initFinishedFired) { return; }\n      let n = 0;\n      g.posts.forEach(function(post) {\n        if (!post.isFetchedQuote && !post.indexRefreshSeen && doc.contains(post.nodes.root)) {\n          post.indexRefreshSeen = true;\n          return n++;\n        }\n      });\n      if (n) { return $.event('IndexRefresh'); }\n    },\n\n    toggleHiddenThreads() {\n      $('#hidden-toggle a', Index.navLinks).textContent = (Index.showHiddenThreads = !Index.showHiddenThreads) ?\n        'Hide'\n      :\n        'Show';\n      Index.sort();\n      return Index.buildIndex();\n    },\n\n    mode() {\n      Index.pushState({mode: this.value});\n      return Index.pageLoad(false);\n    },\n\n    sort() {\n      const value = Index.selectRev.checked ? Index.selectSort.value + \"-rev\" : Index.selectSort.value;\n      Index.pushState({sort: value});\n      return Index.pageLoad(false);\n    },\n\n    resort(e) {\n      Index.changed.order = true;\n      if (!e?.detail?.deferred) { return Index.pageLoad(false); }\n    },\n\n    perBoardSort() {\n      Conf['Index Sort'] = this.checked ? dict() : '';\n      Index.saveSort();\n      for (let i = 0; i < 2; i++) {\n        Conf[`Last Long Reply Thresholds ${i}`] = this.checked ? dict() : '';\n        Index.saveLastLongThresholds(i);\n      }\n    },\n\n    lastLongThresholds() {\n      const i = [...this.parentNode.children].indexOf(this);\n      const value = +this.value;\n      if (!Number.isFinite(value)) {\n        this.value = Index.lastLongThresholds[i];\n        return;\n      }\n      Index.lastLongThresholds[i] = value;\n      Index.saveLastLongThresholds(i);\n      Index.changed.order = true;\n      return Index.pageLoad(false);\n    },\n\n    size(e) {\n      if (Conf['Index Mode'] !== 'catalog') {\n        $.rmClass(Index.root, 'catalog-small');\n        $.rmClass(Index.root, 'catalog-large');\n      } else if (Conf['Index Size'] === 'small') {\n        $.addClass(Index.root, 'catalog-small');\n        $.rmClass(Index.root,  'catalog-large');\n      } else {\n        $.addClass(Index.root, 'catalog-large');\n        $.rmClass(Index.root,  'catalog-small');\n      }\n      if (e) { return Index.buildIndex(); }\n    },\n\n    replies() {\n      return Index.buildIndex();\n    },\n\n    hover() {\n      return doc.classList.toggle('catalog-hover-expand', Conf['Catalog Hover Expand']);\n    },\n\n    hoverToggle(e) {\n      if (Conf['Catalog Hover Toggle'] && $.hasClass(doc, 'catalog-mode') && !$.modifiedClick(e) && !$.x('ancestor-or-self::a', e.target)) {\n        let thread;\n        const input = Index.inputs['Catalog Hover Expand'];\n        input.checked = !input.checked;\n        $.event('change', null, input);\n        if (thread = Get.threadFromNode(e.target)) {\n          Index.cb.catalogReplies.call(thread);\n          return Index.cb.hoverAdjust.call(thread.OP.nodes);\n        }\n      }\n    },\n\n    popstate(e) {\n      if (e?.state) {\n        const {searched, mode, sort} = e.state;\n        const page = Index.getCurrentPage();\n        Index.setState({search: searched, mode, sort, page});\n        return Index.pageLoad(false);\n      } else {\n        // page load or hash change\n        const nCommands = Index.processHash();\n        if (Conf['Refreshed Navigation'] && nCommands) {\n          return Index.update();\n        } else {\n          return Index.pageLoad();\n        }\n      }\n    },\n\n    pageNav(e) {\n      let a;\n      if ($.modifiedClick(e)) { return; }\n      switch (e.target.nodeName) {\n        case 'BUTTON':\n          e.target.blur();\n          a = e.target.parentNode;\n          break;\n        case 'A':\n          a = e.target;\n          break;\n        default:\n          return;\n      }\n      if (a.textContent === 'Catalog') { return; }\n      e.preventDefault();\n      return Index.userPageNav(+a.pathname.split(/\\/+/)[2] || 1);\n    },\n\n    refreshFront() {\n      Index.pushState({page: 1});\n      return Index.update();\n    },\n\n    catalogReplies() {\n      if (Conf['Show Replies'] && $.hasClass(doc, 'catalog-hover-expand') && !this.catalogView.nodes.replies) {\n        return Index.buildCatalogReplies(this);\n      }\n    },\n\n    hoverAdjust() {\n      // Prevent hovered catalog threads from going offscreen.\n      let x;\n      if (!$.hasClass(doc, 'catalog-hover-expand')) { return; }\n      const rect = this.post.getBoundingClientRect();\n      if (x = $.minmax(0, -rect.left, doc.clientWidth - rect.right)) {\n        const {style} = this.post;\n        style.left = `${x}px`;\n        style.right = `${-x}px`;\n        return $.one(this.root, 'mouseleave', () => style.left = (style.right = null));\n      }\n    }\n  },\n\n  scrollToIndex() {\n    // Scroll to navlinks, or top of board if navlinks are hidden.\n    return Header.scrollToIfNeeded((Index.navLinks.getBoundingClientRect().height ? Index.navLinks : Index.root));\n  },\n\n  getCurrentPage() {\n    return +window.location.pathname.split(/\\/+/)[2] || 1;\n  },\n\n  userPageNav(page) {\n    Index.pushState({page});\n    if (Conf['Refreshed Navigation']) {\n      return Index.update();\n    } else {\n      return Index.pageLoad();\n    }\n  },\n\n  hashCommands: {\n    mode: {\n      'paged':         'paged',\n      'infinite-scrolling': 'infinite',\n      'infinite':      'infinite',\n      'all-threads':   'all pages',\n      'all-pages':     'all pages',\n      'catalog':       'catalog'\n    },\n    sort: {\n      'bump-order':        'bump',\n      'last-reply':        'lastreply',\n      'last-long-reply':   'lastlong',\n      'creation-date':     'birth',\n      'reply-count':       'replycount',\n      'file-count':        'filecount',\n      'posts-per-minute':  'activity'\n    }\n  },\n\n  processHash() {\n    // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=483304\n    let hash = location.href.match(/#.*/)?.[0] || '';\n    const state =\n      {replace: true};\n    const commands = hash.slice(1).split('/');\n    const leftover = [];\n    for (var command of commands) {\n      var mode, sort;\n      if (mode = $.getOwn(Index.hashCommands.mode, command)) {\n        state.mode = mode;\n      } else if (command === 'index') {\n        state.mode = Conf['Previous Index Mode'];\n        state.page = 1;\n      } else if (sort = $.getOwn(Index.hashCommands.sort, command.replace(/-rev$/, ''))) {\n        state.sort = sort;\n        if (/-rev$/.test(command)) { state.sort += '-rev'; }\n      } else if (/^s=/.test(command)) {\n        state.search = decodeURIComponent(command.slice(2)).replace(/\\+/g, ' ').trim();\n      } else {\n        leftover.push(command);\n      }\n    }\n    hash = leftover.join('/');\n    if (hash) { state.hash = `#${hash}`; }\n    Index.pushState(state);\n    return commands.length - leftover.length;\n  },\n\n  pushState(state) {\n    let {search, hash, replace} = state;\n    let pageBeforeSearch = history.state?.oldpage;\n    if ((search != null) && (search !== Index.search)) {\n      state.page = search ? 1 : (pageBeforeSearch || 1);\n      if (!search) {\n        pageBeforeSearch = undefined;\n      } else if (!Index.search) {\n        pageBeforeSearch = Index.currentPage;\n      }\n    }\n    Index.setState(state);\n    const pathname = Index.currentPage === 1 ? `/${g.BOARD}/` : `/${g.BOARD}/${Index.currentPage}`;\n    if (!hash) { hash = ''; }\n    return history[replace ? 'replaceState' : 'pushState']({\n      mode:     Conf['Index Mode'],\n      sort:     Index.currentSort,\n      searched: Index.search,\n      oldpage:  pageBeforeSearch\n    }\n    , '', `${location.protocol}//${location.host}${pathname}${hash}`);\n  },\n\n  setState({search, mode, sort, page, hash}) {\n    if ((search != null) && (search !== Index.search)) {\n      Index.changed.search = true;\n      Index.search = search;\n    }\n    if ((mode != null) && (mode !== Conf['Index Mode'])) {\n      Index.changed.mode = true;\n      Conf['Index Mode'] = mode;\n      $.set('Index Mode', mode);\n      if ((mode !== 'catalog') && (Conf['Previous Index Mode'] !== mode)) {\n        Conf['Previous Index Mode'] = mode;\n        $.set('Previous Index Mode', mode);\n      }\n    }\n    if ((sort != null) && (sort !== Index.currentSort)) {\n      Index.changed.sort = true;\n      Index.currentSort = sort;\n      Index.saveSort();\n    }\n    if (['all pages', 'catalog'].includes(Conf['Index Mode'])) { page = 1; }\n    if ((page != null) && (page !== Index.currentPage)) {\n      Index.changed.page = true;\n      Index.currentPage = page;\n    }\n    if (hash != null) {\n      return Index.changed.hash = true;\n    }\n  },\n\n  savePerBoard(key, value) {\n    if (typeof Conf[key] === 'object') {\n      Conf[key][g.BOARD.ID] = value;\n    } else {\n      Conf[key] = value;\n    }\n    return $.set(key, Conf[key]);\n  },\n\n  saveSort() {\n    return Index.savePerBoard('Index Sort', Index.currentSort);\n  },\n\n  saveLastLongThresholds(i) {\n    return Index.savePerBoard(`Last Long Reply Thresholds ${i}`, Index.lastLongThresholds[i]);\n  },\n\n  pageLoad(scroll=true) {\n    if (!Index.liveThreadData) { return; }\n    let {threads, order, search, mode, sort, page, hash} = Index.changed;\n    if (!threads) { threads = search; }\n    if (!order) { order = sort; }\n    if (threads || order) { Index.sort(); }\n    if (threads) { Index.buildPagelist(); }\n    if (search) { Index.setupSearch(); }\n    if (mode) { Index.setupMode(); }\n    if (sort) { Index.setupSort(); }\n    if (threads || mode || page || order) { Index.buildIndex(); }\n    if (threads || page) { Index.setPage(); }\n    if (scroll && !hash) { Index.scrollToIndex(); }\n    return Index.changed = {};\n  },\n\n  setupMode() {\n    for (var mode of ['paged', 'infinite', 'all pages', 'catalog']) {\n      $[mode === Conf['Index Mode'] ? 'addClass' : 'rmClass'](doc, `${mode.replace(/\\ /g, '-')}-mode`);\n    }\n    Index.selectMode.value = Conf['Index Mode'];\n    Index.cb.size();\n    Index.showHiddenThreads = false;\n    return $('#hidden-toggle a', Index.navLinks).textContent = 'Show';\n  },\n\n  setupSort() {\n    Index.selectRev.checked = /-rev$/.test(Index.currentSort);\n    Index.selectSort.value  = Index.currentSort.replace(/-rev$/, '');\n    return Index.lastLongOptions.hidden = (Index.selectSort.value !== 'lastlong');\n  },\n\n  getPagesNum() {\n    if (Index.search) {\n      return Math.ceil(Index.sortedThreadIDs.length / Index.threadsNumPerPage);\n    } else {\n      return Index.pagesNum;\n    }\n  },\n\n  getMaxPageNum() {\n    return Math.max(1, Index.getPagesNum());\n  },\n\n  buildPagelist() {\n    const pagesRoot = $('.pages', Index.pagelist);\n    const maxPageNum = Index.getMaxPageNum();\n    if (pagesRoot.childElementCount !== maxPageNum) {\n      const nodes = [];\n      for (let i = 1, end = maxPageNum; i <= end; i++) {\n        var a = $.el('a', {\n          textContent: i,\n          href: i === 1 ? './' : i\n        }\n        );\n        nodes.push($.tn('['), a, $.tn('] '));\n      }\n      $.rmAll(pagesRoot);\n      return $.add(pagesRoot, nodes);\n    }\n  },\n\n  setPage() {\n    let a, strong;\n    const pageNum    = Index.currentPage;\n    const maxPageNum = Index.getMaxPageNum();\n    const pagesRoot  = $('.pages', Index.pagelist);\n\n    // Previous/Next buttons\n    const prev = pagesRoot.previousElementSibling.firstElementChild;\n    const next = pagesRoot.nextElementSibling.firstElementChild;\n    let href = Math.max(pageNum - 1, 1);\n    prev.href = href === 1 ? './' : href;\n    prev.firstElementChild.disabled = href === pageNum;\n    href = Math.min(pageNum + 1, maxPageNum);\n    next.href = href === 1 ? './' : href;\n    next.firstElementChild.disabled = href === pageNum;\n\n    // <strong> current page\n    if (strong = $('strong', pagesRoot)) {\n      if (+strong.textContent === pageNum) { return; }\n      $.replace(strong, strong.firstChild);\n    } else {\n      strong = $.el('strong');\n    }\n\n    if (a = pagesRoot.children[pageNum - 1]) {\n      $.before(a, strong);\n      return $.add(strong, a);\n    }\n  },\n\n  updateHideLabel() {\n    if (!Index.hideLabel) { return; }\n    let hiddenCount = 0;\n    for (var threadID of Index.liveThreadIDs) {\n      if (Index.isHidden(threadID)) {\n        hiddenCount++;\n      }\n    }\n    if (!hiddenCount) {\n      Index.hideLabel.hidden = true;\n      if (Index.showHiddenThreads) { Index.cb.toggleHiddenThreads(); }\n      return;\n    }\n    Index.hideLabel.hidden = false;\n    return $('#hidden-count', Index.navLinks).textContent = hiddenCount === 1 ?\n      '1 hidden thread'\n    :\n      `${hiddenCount} hidden threads`;\n  },\n\n  update(firstTime) {\n    let oldReq;\n    if (oldReq = Index.req) {\n      delete Index.req;\n      oldReq.abort();\n    }\n\n    if (Conf['Index Refresh Notifications']) {\n      // Optional notification for manual refreshes\n      if (!Index.notice) { Index.notice = new Notice('info', 'Refreshing index...'); }\n      if (!Index.nTimeout) { Index.nTimeout = setTimeout(() => {\n          if (Index.notice) {\n            Index.notice.el.lastElementChild.textContent += ' (disable JSON Index if this takes too long)';\n          }\n        }\n        , 3 * SECOND); }\n    } else {\n      // Also display notice if Index Refresh is taking too long\n      if (!Index.nTimeout) { Index.nTimeout = setTimeout(() => Index.notice || (Index.notice = new Notice('info', 'Refreshing index... (disable JSON Index if this takes too long)'))\n      , 3 * SECOND); }\n    }\n\n    // Hard refresh in case of incomplete page load.\n    if (!firstTime && (d.readyState !== 'loading') && !$('.board + *')) {\n      location.reload();\n      return;\n    }\n\n    Index.req = $.whenModified(\n      g.SITE.urls.catalogJSON({boardID: g.BOARD.ID}),\n      'Index',\n      Index.load\n    );\n    return $.addClass(Index.button, 'spin');\n  },\n\n  load() {\n    let err;\n    if (this !== Index.req) { return; } // aborted\n\n    $.rmClass(Index.button, 'spin');\n    const {notice, nTimeout} = Index;\n    if (nTimeout) { clearTimeout(nTimeout); }\n    delete Index.nTimeout;\n    delete Index.req;\n    delete Index.notice;\n\n    if (![200, 304].includes(this.status)) {\n      err = `Index refresh failed. ${this.status ? `Error ${this.statusText} (${this.status})` : 'Connection Error'}`;\n      if (notice) {\n        notice.setType('warning');\n        notice.el.lastElementChild.textContent = err;\n        setTimeout(notice.close, SECOND);\n      } else {\n        new Notice('warning', err, 1);\n      }\n      return;\n    }\n\n    try {\n      if (this.status === 200) {\n        Index.parse(this.response);\n      } else if (this.status === 304) {\n        Index.pageLoad();\n      }\n    } catch (error) {\n      err = error;\n      c.error(`Index failure: ${err.message}`, err.stack);\n      if (notice) {\n        notice.setType('error');\n        notice.el.lastElementChild.textContent = 'Index refresh failed.';\n        setTimeout(notice.close, SECOND);\n      } else {\n        new Notice('error', 'Index refresh failed.', 1);\n      }\n      return;\n    }\n\n    if (notice) {\n      if (Conf['Index Refresh Notifications']) {\n        notice.setType('success');\n        notice.el.lastElementChild.textContent = 'Index refreshed!';\n        setTimeout(notice.close, SECOND);\n      } else {\n        notice.close();\n      }\n    }\n\n    const timeEl = $('#index-last-refresh time', Index.navLinks);\n    timeEl.dataset.utc = Date.parse(this.getResponseHeader('Last-Modified'));\n    return RelativeDates.update(timeEl);\n  },\n\n  parse(pages) {\n    $.cleanCache(url => /^https?:\\/\\/a\\.4cdn\\.org\\//.test(url));\n    Index.parseThreadList(pages);\n    Index.changed.threads = true;\n    return Index.pageLoad();\n  },\n\n  parseThreadList(pages) {\n    Index.pagesNum          = pages.length;\n    Index.threadsNumPerPage = pages[0]?.threads.length || 1;\n    Index.liveThreadData    = pages.reduce(((arr, next) => arr.concat(next.threads)), []);\n    Index.liveThreadIDs     = Index.liveThreadData.map(data => data.no);\n    Index.liveThreadDict    = dict();\n    Index.threadPosition    = dict();\n    Index.parsedThreads     = dict();\n    Index.replyData         = dict();\n    for (let i = 0; i < Index.liveThreadData.length; i++) {\n      var obj, results;\n      var data = Index.liveThreadData[i];\n      Index.liveThreadDict[data.no] = data;\n      Index.threadPosition[data.no] = i;\n      Index.parsedThreads[data.no] = (obj = g.SITE.Build.parseJSON(data, g.BOARD));\n      obj.filterResults = (results = Filter.test(obj));\n      obj.isOnTop  = results.top;\n      obj.isHidden = results.hide || ThreadHiding.isHidden(obj.boardID, obj.threadID);\n      if (data.last_replies) {\n        for (var reply of data.last_replies) {\n          Index.replyData[`${g.BOARD}.${reply.no}`] = reply;\n        }\n      }\n    }\n    if (Index.liveThreadData[0]) {\n      g.SITE.Build.spoilerRange[g.BOARD.ID] = Index.liveThreadData[0].custom_spoiler;\n    }\n    g.BOARD.threads.forEach(function(thread) {\n      if (!Index.liveThreadIDs.includes(thread.ID)) { return thread.collect(); }\n    });\n    $.event('IndexUpdate',\n      {threads: ((Index.liveThreadIDs.map((ID) => `${g.BOARD}.${ID}`)))});\n  },\n\n  isHidden(threadID) {\n    let thread;\n    if ((thread = g.BOARD.threads.get(threadID)) && thread.OP && !thread.OP.isFetchedQuote) {\n      return thread.isHidden;\n    } else {\n      return Index.parsedThreads[threadID].isHidden;\n    }\n  },\n\n  isHiddenReply(threadID, replyData) {\n    return PostHiding.isHidden(g.BOARD.ID, threadID, replyData.no) || Filter.isHidden(g.SITE.Build.parseJSON(replyData, g.BOARD));\n  },\n\n  buildThreads(threadIDs, isCatalog, withReplies) {\n    let errors;\n    const threads    = [];\n    const newThreads = [];\n    let newPosts   = [];\n    for (var ID of threadIDs) {\n      var opRoot, thread;\n      try {\n        var OP;\n        var threadData = Index.liveThreadDict[ID];\n\n        if (thread = g.BOARD.threads.get(ID)) {\n          var isStale = (thread.json !== threadData) && (JSON.stringify(thread.json) !== JSON.stringify(threadData));\n          if (isStale) {\n            thread.setCount('post', threadData.replies + 1,                threadData.bumplimit);\n            thread.setCount('file', threadData.images  + !!threadData.ext, threadData.imagelimit);\n            thread.setStatus('Sticky', !!threadData.sticky);\n            thread.setStatus('Closed', !!threadData.closed);\n          }\n          if (thread.catalogView) {\n            $.rm(thread.catalogView.nodes.replies);\n            thread.catalogView.nodes.replies = null;\n          }\n        } else {\n          thread = new Thread(ID, g.BOARD);\n          newThreads.push(thread);\n        }\n        var lastPost = threadData.last_replies && threadData.last_replies.length ? threadData.last_replies[threadData.last_replies.length - 1].no : ID;\n        if (lastPost > thread.lastPost) { thread.lastPost = lastPost; }\n        thread.json = threadData;\n        threads.push(thread);\n\n        if ((OP = thread.OP) && !OP.isFetchedQuote) {\n          OP.setCatalogOP(isCatalog);\n          thread.setPage(Math.floor(Index.threadPosition[ID] / Index.threadsNumPerPage) + 1);\n        } else {\n          var obj = Index.parsedThreads[ID];\n          opRoot = g.SITE.Build.post(obj);\n          OP = new Post(opRoot, thread, g.BOARD);\n          OP.filterResults = obj.filterResults;\n          newPosts.push(OP);\n        }\n\n        if (!isCatalog || !thread.nodes.root) {\n          g.SITE.Build.thread(thread, threadData, withReplies);\n        }\n      } catch (err) {\n        // Skip posts that we failed to parse.\n        if (!errors) { errors = []; }\n        errors.push({\n          message: `Parsing of Thread No.${thread} failed. Thread will be skipped.`,\n          error: err,\n          html: opRoot?.outerHTML\n        });\n      }\n    }\n    if (errors) { Main.handleErrors(errors); }\n\n    if (withReplies) {\n      newPosts = newPosts.concat(Index.buildReplies(threads));\n    }\n\n    Main.callbackNodes('Thread', newThreads);\n    Main.callbackNodes('Post',   newPosts);\n    Index.updateHideLabel();\n    $.event('IndexRefreshInternal', {threadIDs: (threads.map((t) => t.fullID)), isCatalog});\n\n    return threads;\n  },\n\n  buildReplies(threads) {\n    let errors;\n    const posts = [];\n    for (var thread of threads) {\n      var lastReplies;\n      if (!(lastReplies = Index.liveThreadDict[thread.ID].last_replies)) { continue; }\n      var nodes = [];\n      for (var data of lastReplies) {\n        var node, post;\n        if ((post = thread.posts.get(data.no)) && !post.isFetchedQuote) {\n          nodes.push(post.nodes.root);\n          continue;\n        }\n        nodes.push(node = g.SITE.Build.postFromObject(data, thread.board.ID));\n        try {\n          posts.push(new Post(node, thread, thread.board));\n        } catch (err) {\n          // Skip posts that we failed to parse.\n          if (!errors) { errors = []; }\n          errors.push({\n            message: `Parsing of Post No.${data.no} failed. Post will be skipped.`,\n            error: err,\n            html: node?.outerHTML\n          });\n        }\n      }\n      $.add(thread.nodes.root, nodes);\n    }\n\n    if (errors) { Main.handleErrors(errors); }\n    return posts;\n  },\n\n  buildCatalogViews(threads) {\n    const catalogThreads = [];\n    for (var thread of threads) {\n      if (!thread.catalogView) {\n        var {ID} = thread;\n        var page = Math.floor(Index.threadPosition[ID] / Index.threadsNumPerPage) + 1;\n        var root = g.SITE.Build.catalogThread(thread, Index.liveThreadDict[ID], page);\n        catalogThreads.push(new CatalogThread(root, thread));\n      }\n    }\n    Main.callbackNodes('CatalogThread', catalogThreads);\n  },\n\n  sizeCatalogViews(threads) {\n    // XXX When browsers support CSS3 attr(), use it instead.\n    const size = Conf['Index Size'] === 'small' ? 150 : 250;\n    for (var thread of threads) {\n      var {thumb} = thread.catalogView.nodes;\n      var {width, height} = thumb.dataset;\n      if (!width) { continue; }\n      var ratio = size / Math.max(width, height);\n      thumb.style.width  = (width  * ratio) + 'px';\n      thumb.style.height = (height * ratio) + 'px';\n    }\n  },\n\n  buildCatalogReplies(thread) {\n    let lastReplies;\n    const {nodes} = thread.catalogView;\n    if (!(lastReplies = Index.liveThreadDict[thread.ID].last_replies)) { return; }\n\n    const replies = [];\n    for (var data of lastReplies) {\n      if (Index.isHiddenReply(thread.ID, data)) { continue; }\n      var reply = g.SITE.Build.catalogReply(thread, data);\n      RelativeDates.update($('time', reply));\n      $.on($('.catalog-reply-preview', reply), 'mouseover', QuotePreview.mouseover);\n      replies.push(reply);\n    }\n\n    nodes.replies = $.el('div', {className: 'catalog-replies'});\n    $.add(nodes.replies, replies);\n    $.add(thread.OP.nodes.post, nodes.replies);\n  },\n\n  sort() {\n    let threadIDs;\n    const {liveThreadIDs, liveThreadData} = Index;\n    if (!liveThreadData) { return; }\n    const tmp_time = new Date().getTime()/1000;\n    const sortType = Index.currentSort.replace(/-rev$/, '');\n    Index.sortedThreadIDs = (() => { switch (sortType) {\n      case 'lastreply': case 'lastlong':\n        var repliesAvailable = liveThreadData.some(thread => thread.last_replies?.length);\n        var lastlong = function(thread) {\n          if (!repliesAvailable) {\n            return thread.last_modified;\n          }\n          const iterable = thread.last_replies || [];\n          for (let i = iterable.length - 1; i >= 0; i--) {\n            var r = iterable[i];\n            if (Index.isHiddenReply(thread.no, r)) { continue; }\n            if (sortType === 'lastreply') {\n              return r;\n            }\n            var len = r.com ? g.SITE.Build.parseComment(r.com).replace(/[^a-z]/ig, '').length : 0;\n            if (len >= Index.lastLongThresholds[+!!r.ext]) {\n              return r;\n            }\n          }\n          if (thread.omitted_posts && thread.last_replies?.length) { return thread.last_replies[0]; } else { return thread; }\n        };\n        var lastlongD = dict();\n        for (var thread of liveThreadData) {\n          lastlongD[thread.no] = lastlong(thread).no;\n        }\n        return [...liveThreadData].sort((a, b) => lastlongD[b.no] - lastlongD[a.no]).map(post => post.no);\n      case 'bump':       return liveThreadIDs;\n      case 'birth':      return [...liveThreadIDs ].sort((a, b) => b - a);\n      case 'replycount': return [...liveThreadData].sort((a, b) => b.replies - a.replies).map(post => post.no);\n      case 'filecount':  return [...liveThreadData].sort((a, b) => b.images  - a.images).map(post => post.no);\n      case 'activity':   return [...liveThreadData].sort((a, b) => ((tmp_time-a.time)/(a.replies+1)) - ((tmp_time-b.time)/(b.replies+1))).map(post => post.no);\n      default: return liveThreadIDs;\n    } })();\n    if (/-rev$/.test(Index.currentSort)) {\n      Index.sortedThreadIDs.reverse();\n    }\n    if (Index.search && (threadIDs = Index.querySearch(Index.search))) {\n      Index.sortedThreadIDs = threadIDs;\n    }\n    // Sticky threads\n    Index.sortOnTop(obj => obj.isSticky);\n    // Highlighted threads\n    Index.sortOnTop(obj => obj.isOnTop || (Conf['Pin Watched Threads'] && ThreadWatcher.isWatchedRaw(obj.boardID, obj.threadID)));\n    // Non-hidden threads\n    if (Conf['Anchor Hidden Threads']) { return Index.sortOnTop(obj => !Index.isHidden(obj.threadID)); }\n  },\n\n  sortOnTop(match) {\n    const topThreads    = [];\n    const bottomThreads = [];\n    for (var ID of Index.sortedThreadIDs) {\n      (match(Index.parsedThreads[ID]) ? topThreads : bottomThreads).push(ID);\n    }\n    return Index.sortedThreadIDs = topThreads.concat(bottomThreads);\n  },\n\n  buildIndex() {\n    let threadIDs;\n    if (!Index.liveThreadData) { return; }\n    switch (Conf['Index Mode']) {\n      case 'all pages':\n        threadIDs = Index.sortedThreadIDs;\n        break;\n      case 'catalog':\n        threadIDs = Index.sortedThreadIDs.filter(ID => !Index.isHidden(ID) !== Index.showHiddenThreads);\n        break;\n      default:\n        threadIDs = Index.threadsOnPage(Index.currentPage);\n    }\n    delete Index.pageNum;\n    $.rmAll(Index.root);\n    $.rmAll(Header.hover);\n    if (Index.loaded && Index.root.parentNode) {\n      $.event('PostsRemoved', null, Index.root);\n    }\n    if (Conf['Index Mode'] === 'catalog') {\n      Index.buildCatalog(threadIDs);\n    } else {\n      Index.buildStructure(threadIDs);\n    }\n  },\n\n  threadsOnPage(pageNum) {\n    const nodesPerPage = Index.threadsNumPerPage;\n    const offset = nodesPerPage * (pageNum - 1);\n    return Index.sortedThreadIDs.slice(offset ,  offset + nodesPerPage);\n  },\n\n  buildStructure(threadIDs) {\n    const threads = Index.buildThreads(threadIDs, false, Conf['Show Replies']);\n    const nodes = [];\n    for (var thread of threads) {\n      nodes.push(thread.nodes.root, $.el('hr'));\n    }\n    $.add(Index.root, nodes);\n    if (Index.root.parentNode) {\n      $.event('PostsInserted', null, Index.root);\n    }\n    Index.loaded = true;\n  },\n\n  buildCatalog(threadIDs) {\n    let i = 0;\n    const n = threadIDs.length;\n    let node0 = null;\n    var fn = function() {\n      if (node0 && !node0.parentNode) { return; } // Index.root cleared\n      const j = (i > 0) && Index.root.parentNode ? n : i + 30;\n      node0 = Index.buildCatalogPart(threadIDs.slice(i, j))[0];\n      i = j;\n      if (i < n) {\n        return $.queueTask(fn);\n      } else {\n        if (Index.root.parentNode) {\n          $.event('PostsInserted', null, Index.root);\n        }\n        return Index.loaded = true;\n      }\n    };\n    fn();\n  },\n\n  buildCatalogPart(threadIDs) {\n    const threads = Index.buildThreads(threadIDs, true);\n    Index.buildCatalogViews(threads);\n    Index.sizeCatalogViews(threads);\n    const nodes = [];\n    for (var thread of threads) {\n      thread.OP.setCatalogOP(true);\n      $.add(thread.catalogView.nodes.root, thread.OP.nodes.root);\n      nodes.push(thread.catalogView.nodes.root);\n      $.on(thread.catalogView.nodes.root, 'mouseenter', Index.cb.catalogReplies.bind(thread));\n      $.on(thread.OP.nodes.root, 'mouseenter', Index.cb.hoverAdjust.bind(thread.OP.nodes));\n    }\n    $.add(Index.root, nodes);\n    return nodes;\n  },\n\n  clearSearch() {\n    Index.searchInput.value = '';\n    Index.onSearchInput();\n    return Index.searchInput.focus();\n  },\n\n  setupSearch() {\n    Index.searchInput.value = Index.search;\n    if (Index.search) {\n      return Index.searchInput.dataset.searching = 1;\n    } else {\n      // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=1021289\n      return Index.searchInput.removeAttribute('data-searching');\n    }\n  },\n\n  onSearchInput() {\n    const search = Index.searchInput.value.trim();\n    if (search === Index.search) { return; }\n    Index.pushState({\n      search,\n      replace: !!search === !!Index.search\n    });\n    return Index.pageLoad(false);\n  },\n\n  querySearch(query) {\n    let keywords, match;\n    if (match = query.match(/^([\\w+]+):\\/(.*)\\/(\\w*)$/)) {\n      let regexp;\n      try {\n        regexp = RegExp(match[2], match[3]);\n      } catch (error) {\n        return [];\n      }\n      return Index.sortedThreadIDs.filter(ID => regexp.test(Filter.values(match[1], Index.parsedThreads[ID]).join('\\n')));\n    }\n    if (!(keywords = query.toLowerCase().match(/\\S+/g))) { return; }\n    return Index.sortedThreadIDs.filter(ID => Index.searchMatch(Index.parsedThreads[ID], keywords));\n  },\n\n  searchMatch(obj, keywords) {\n    const {info, file} = obj;\n    if (info.comment == null) { info.comment = g.SITE.Build.parseComment(info.commentHTML.innerHTML); }\n    let text = [];\n    for (var key of ['comment', 'subject', 'name', 'tripcode']) {\n      if (key in info) { text.push(info[key]); }\n    }\n    if (file) { text.push(file.name); }\n    text = text.join(' ').toLowerCase();\n    for (var keyword of keywords) {\n      if (-1 === text.indexOf(keyword)) { return false; }\n    }\n    return true;\n  }\n};\nexport default Index;\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Thread from \"../classes/Thread\";\nimport Index from \"../General/Index\";\nimport UI from \"../General/UI\";\nimport { g, Conf, d, doc } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport Menu from \"../Menu/Menu\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ThreadHiding = {\n  init() {\n    if (!['index', 'catalog'].includes(g.VIEW) || (!Conf['Thread Hiding Buttons'] && !(Conf['Menu'] && Conf['Thread Hiding Link']) && !Conf['JSON Index'])) { return; }\n    this.db = new DataBoard('hiddenThreads');\n    if (g.VIEW === 'catalog') { return this.catalogWatch(); }\n    this.catalogSet(g.BOARD);\n    $.on(d, 'IndexRefreshInternal', this.onIndexRefresh);\n    if (Conf['Thread Hiding Buttons']) {\n      $.addClass(doc, 'thread-hide');\n    }\n    return Callbacks.Post.push({\n      name: 'Thread Hiding',\n      cb:   this.node\n    });\n  },\n\n  catalogSet(board) {\n    if (!$.hasStorage || (g.SITE.software !== 'yotsuba')) { return; }\n    const hiddenThreads = ThreadHiding.db.get({\n      boardID: board.ID,\n      defaultValue: dict()\n    });\n    for (var threadID in hiddenThreads) { hiddenThreads[threadID] = true; }\n    return localStorage.setItem(`4chan-hide-t-${board}`, JSON.stringify(hiddenThreads));\n  },\n\n  catalogWatch() {\n    if (!$.hasStorage || (g.SITE.software !== 'yotsuba')) { return; }\n    this.hiddenThreads = JSON.parse(localStorage.getItem(`4chan-hide-t-${g.BOARD}`)) || {};\n    return Main.ready(() => // 4chan's catalog sets the style to \"display: none;\" when hiding or unhiding a thread.\n    new MutationObserver(ThreadHiding.catalogSave).observe($.id('threads'), {\n      attributes: true,\n      subtree: true,\n      attributeFilter: ['style']\n    }));\n  },\n\n  catalogSave() {\n    let threadID;\n    const hiddenThreads2 = JSON.parse(localStorage.getItem(`4chan-hide-t-${g.BOARD}`)) || {};\n    for (threadID in hiddenThreads2) {\n      if (!$.hasOwn(ThreadHiding.hiddenThreads, threadID)) {\n        ThreadHiding.db.set({\n          boardID:  g.BOARD.ID,\n          threadID,\n          val:      {makeStub: Conf['Stubs']}});\n      }\n    }\n    for (threadID in ThreadHiding.hiddenThreads) {\n      if (!$.hasOwn(hiddenThreads2, threadID)) {\n        ThreadHiding.db.delete({\n          boardID:  g.BOARD.ID,\n          threadID\n        });\n      }\n    }\n    return ThreadHiding.hiddenThreads = hiddenThreads2;\n  },\n\n  isHidden(boardID, threadID) {\n    return !!(ThreadHiding.db && ThreadHiding.db.get({boardID, threadID}));\n  },\n\n  node() {\n    let data;\n    if (this.isReply || this.isClone || this.isFetchedQuote) { return; }\n\n    if (Conf['Thread Hiding Buttons']) {\n      $.prepend(this.nodes.root, ThreadHiding.makeButton(this.thread, 'hide'));\n    }\n\n    if (data = ThreadHiding.db.get({boardID: this.board.ID, threadID: this.ID})) {\n      return ThreadHiding.hide(this.thread, data.makeStub);\n    }\n  },\n\n  onIndexRefresh() {\n    return g.BOARD.threads.forEach(function(thread) {\n      const {root} = thread.nodes;\n      if (thread.isHidden && thread.stub && !root.contains(thread.stub)) {\n        return ThreadHiding.makeStub(thread, root);\n      }\n    });\n  },\n\n  menu: {\n    init() {\n      if ((g.VIEW !== 'index') || !Conf['Menu'] || !Conf['Thread Hiding Link']) { return; }\n\n      let div = $.el('div', {\n        className: 'hide-thread-link',\n        textContent: 'Hide'\n      }\n      );\n\n      const apply = $.el('a', {\n        textContent: 'Apply',\n        href: 'javascript:;'\n      }\n      );\n      $.on(apply, 'click', ThreadHiding.menu.hide);\n\n      const makeStub = UI.checkbox('Stubs', 'Make stub');\n\n      Menu.menu.addEntry({\n        el: div,\n        order: 20,\n        open({thread, isReply}) {\n          if (isReply || thread.isHidden || (Conf['JSON Index'] && (Conf['Index Mode'] === 'catalog'))) {\n            return false;\n          }\n          ThreadHiding.menu.thread = thread;\n          return true;\n        },\n        subEntries: [{el: apply}, {el: makeStub}]});\n\n      div = $.el('a', {\n        className: 'show-thread-link',\n        textContent: 'Show',\n        href: 'javascript:;'\n      }\n      );\n      $.on(div, 'click', ThreadHiding.menu.show);\n\n      Menu.menu.addEntry({\n        el: div,\n        order: 20,\n        open({thread, isReply}) {\n          if (isReply || !thread.isHidden || (Conf['JSON Index'] && (Conf['Index Mode'] === 'catalog'))) {\n            return false;\n          }\n          ThreadHiding.menu.thread = thread;\n          return true;\n        }\n      });\n\n      const hideStubLink = $.el('a', {\n        textContent: 'Hide stub',\n        href: 'javascript:;'\n      }\n      );\n      $.on(hideStubLink, 'click', ThreadHiding.menu.hideStub);\n\n      return Menu.menu.addEntry({\n        el: hideStubLink,\n        order: 15,\n        open({thread, isReply}) {\n          if (isReply || !thread.isHidden || (Conf['JSON Index'] && (Conf['Index Mode'] === 'catalog'))) {\n            return false;\n          }\n          return ThreadHiding.menu.thread = thread;\n        }\n      });\n    },\n\n    hide() {\n      const makeStub = $('input', this.parentNode).checked;\n      const {thread} = ThreadHiding.menu;\n      ThreadHiding.hide(thread, makeStub);\n      ThreadHiding.saveHiddenState(thread, makeStub);\n      return $.event('CloseMenu');\n    },\n\n    show() {\n      const {thread} = ThreadHiding.menu;\n      ThreadHiding.show(thread);\n      ThreadHiding.saveHiddenState(thread);\n      return $.event('CloseMenu');\n    },\n\n    hideStub() {\n      const {thread} = ThreadHiding.menu;\n      ThreadHiding.show(thread);\n      ThreadHiding.hide(thread, false);\n      ThreadHiding.saveHiddenState(thread, false);\n      $.event('CloseMenu');\n    }\n  },\n\n  makeButton(thread, type) {\n    const a = $.el('a', {\n      className: `${type}-thread-button`,\n      href:      'javascript:;'\n    });\n    $.add(a, $.el('span', { textContent: type === 'hide' ? '➖︎' : '➕︎' }));\n    a.dataset.fullID = thread.fullID;\n    $.on(a, 'click', ThreadHiding.toggle);\n    return a;\n  },\n\n  makeStub(thread, root) {\n    let summary, threadDivider;\n    let numReplies  = $$(g.SITE.selectors.replyOriginal, root).length;\n    if (summary = $(g.SITE.selectors.summary, root)) { numReplies += +summary.textContent.match(/\\d+/); }\n\n    const a = ThreadHiding.makeButton(thread, 'show');\n    $.add(a, $.tn(` ${thread.OP.info.nameBlock} (${numReplies === 1 ? '1 reply' : `${numReplies} replies`})`));\n    thread.stub = $.el('div',\n      {className: 'stub'});\n    if (Conf['Menu']) {\n      $.add(thread.stub, [a, Menu.makeButton(thread.OP)]);\n    } else {\n      $.add(thread.stub, a);\n    }\n    $.prepend(root, thread.stub);\n\n    // Prevent hiding of thread divider on sites that put it inside the thread\n    if (threadDivider = $(g.SITE.selectors.threadDivider, root)) {\n      return $.addClass(threadDivider, 'threadDivider');\n    }\n  },\n\n  saveHiddenState(thread, makeStub) {\n    if (thread.isHidden) {\n      ThreadHiding.db.set({\n        boardID:  thread.board.ID,\n        threadID: thread.ID,\n        val: {makeStub}});\n    } else {\n      ThreadHiding.db.delete({\n        boardID:  thread.board.ID,\n        threadID: thread.ID\n      });\n    }\n    return ThreadHiding.catalogSet(thread.board);\n  },\n\n  toggle(thread) {\n    if (!(thread instanceof Thread)) {\n      thread = g.threads.get(this.dataset.fullID);\n    }\n    if (thread.isHidden) {\n      ThreadHiding.show(thread);\n    } else {\n      ThreadHiding.hide(thread);\n    }\n    return ThreadHiding.saveHiddenState(thread);\n  },\n\n  hide(thread, makeStub=Conf['Stubs']) {\n    if (thread.isHidden) { return; }\n    const threadRoot = thread.nodes.root;\n    thread.isHidden = true;\n    Index.updateHideLabel();\n    if (thread.catalogView && !Index.showHiddenThreads) {\n      $.rm(thread.catalogView.nodes.root);\n      $.event('PostsRemoved', null, Index.root);\n    }\n\n    if (!makeStub) { return threadRoot.hidden = true; }\n\n    return ThreadHiding.makeStub(thread, threadRoot);\n  },\n\n  show(thread) {\n    if (thread.stub) {\n      $.rm(thread.stub);\n      delete thread.stub;\n    }\n    const threadRoot = thread.nodes.root;\n    threadRoot.hidden = (thread.isHidden = false);\n    Index.updateHideLabel();\n    if (thread.catalogView) {\n      const { root } = thread.catalogView.nodes;\n\n      if (Index.showHiddenThreads) {\n        $.rm(root);\n        $.event('PostsRemoved', null, Index.root);\n      } else {\n        let i = Index.sortedThreadIDs.indexOf(thread.ID) - 1;\n\n        while (true) {\n          if (i < 0) {\n            $('.board').insertAdjacentElement('afterbegin', root);\n            break;\n          }\n          const rootPrevious = d.getElementById(`t${Index.sortedThreadIDs[i]}`);\n          if (rootPrevious) {\n            rootPrevious.insertAdjacentElement('afterend', root)\n            break;\n          }\n          --i;\n        }\n\n        $.event('PostsInserted', null, Index.root);\n      }\n    }\n  }\n};\nexport default ThreadHiding;\n",null,null,null,"import $ from \"../platform/$\";\nimport CSS from \"../css/CSS\";\nimport { Conf } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst CustomCSS = {\n  init() {\n    if (!Conf['Custom CSS']) { return; }\n    return this.addStyle();\n  },\n\n  addStyle() {\n    return this.style = $.addStyle(CSS.sub(Conf['usercss']), 'custom-css', '#fourchanx-css');\n  },\n\n  rmStyle() {\n    if (this.style) {\n      $.rm(this.style);\n      return delete this.style;\n    }\n  },\n\n  update() {\n    if (!this.style) {\n      return this.addStyle();\n    }\n    return this.style.textContent = CSS.sub(Conf['usercss']);\n  }\n};\nexport default CustomCSS;\n",null,"import { Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport PassMessagePage from './PassMessage/PassMessageHtml';\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nconst PassMessage = {\n  init() {\n    if (Conf['passMessageClosed']) { return; }\n    const msg = $.el('div',\n      {className: 'box-outer top-box'}\n    ,\n      PassMessagePage);\n    msg.style.cssText = 'padding-bottom: 0;';\n    const close = $('a', msg);\n    $.on(close, 'click', function() {\n      $.rm(msg);\n      return $.set('passMessageClosed', true);\n    });\n    return $.ready(function() {\n      let hd;\n      if (hd = $.id('hd')) {\n        return $.after(hd, msg);\n      } else {\n        return $.prepend(d.body, msg);\n      }\n    });\n  }\n};\nexport default PassMessage;\n","import Redirect from \"../Archive/Redirect\";\nimport $ from \"../platform/$\";\nimport ReportPage from './Report/ArchiveReport.html';\nimport CSS from \"../css/CSS\";\nimport Captcha from \"../Posting/Captcha\";\nimport { Conf, d, doc, g } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar Report = {\n  init() {\n    let match;\n    if (!(match = location.search.match(/\\bno=(\\d+)/))) { return; }\n    Captcha.replace.init();\n    this.postID = +match[1];\n    return $.ready(this.ready);\n  },\n\n  ready() {\n    $.addStyle(CSS.report);\n\n    if (Conf['Archive Report']) { Report.archive(); }\n\n    new MutationObserver(function() {\n      Report.fit('iframe[src^=\"https://www.google.com/recaptcha/api2/frame\"]');\n      return Report.fit('body');\n    }).observe(d.body, {\n      childList:  true,\n      attributes: true,\n      subtree:    true\n    }\n    );\n    return Report.fit('body');\n  },\n\n  fit(selector) {\n    let el;\n    if (!((el = $(selector, doc)) && (getComputedStyle(el).visibility !== 'hidden'))) { return; }\n    const dy = (el.getBoundingClientRect().bottom - doc.clientHeight) + 8;\n    if (dy > 0) { return window.resizeBy(0, dy); }\n  },\n\n  archive() {\n    let match, urls;\n    if (!(urls = Redirect.report(g.BOARD.ID)).length) { return; }\n\n    const form    = $('form');\n    const types   = $.id('reportTypes');\n    const message = $('h3');\n\n    const fieldset = $.el('fieldset', {\n      id: 'archive-report',\n      hidden: true\n    }\n    ,\n      { innerHTML: ReportPage });\n    const enabled = $('#archive-report-enabled', fieldset);\n    const reason  = $('#archive-report-reason',  fieldset);\n    const submit  = $('#archive-report-submit',  fieldset);\n\n    $.on(enabled, 'change', function() {\n      return reason.disabled = !this.checked;\n    });\n\n    if (form && types) {\n      fieldset.hidden = !$('[value=\"31\"]', types).checked;\n      $.on(types, 'change', function(e) {\n        fieldset.hidden = (e.target.value !== '31');\n        return Report.fit('body');\n      });\n      $.after(types, fieldset);\n      Report.fit('body');\n      $.one(form, 'submit', function(e) {\n        if (!fieldset.hidden && enabled.checked) {\n          e.preventDefault();\n          return Report.archiveSubmit(urls, reason.value, results => {\n            this.action = '#archiveresults=' + encodeURIComponent(JSON.stringify(results));\n            return this.submit();\n          });\n        }\n      });\n    } else if (message) {\n      fieldset.hidden = /Report submitted!/.test(message.textContent);\n      $.on(enabled, 'change', function() {\n        return submit.hidden = !this.checked;\n      });\n      $.after(message, fieldset);\n      $.on(submit, 'click', () => Report.archiveSubmit(urls, reason.value, Report.archiveResults));\n    }\n\n    if (match = location.hash.match(/^#archiveresults=(.*)$/)) {\n      try {\n        return Report.archiveResults(JSON.parse(decodeURIComponent(match[1])));\n      } catch (error) {}\n    }\n  },\n\n  archiveSubmit(urls, reason, cb) {\n    const form = $.formData({\n      board:  g.BOARD.ID,\n      num:    Report.postID,\n      reason\n    });\n    const results = [];\n    for (var [name, url] of urls) {\n      (function(name, url) {\n        return $.ajax(url, {\n          onloadend() {\n            results.push([name, this.response || {error: ''}]);\n            if (results.length === urls.length) {\n              return cb(results);\n            }\n          },\n          form\n        });\n      })(name, url);\n    }\n  },\n\n  archiveResults(results) {\n    const fieldset = $.id('archive-report');\n    for (var [name, response] of results) {\n      var line = $.el('h3',\n        {className: 'archive-report-response'});\n      if ('success' in response) {\n        $.addClass(line, 'archive-report-success');\n        line.textContent = `${name}: ${response.success}`;\n      } else {\n        $.addClass(line, 'archive-report-error');\n        line.textContent = `${name}: ${response.error || 'Error reporting post.'}`;\n      }\n      if (fieldset) {\n        $.before(fieldset, line);\n      } else {\n        $.add(d.body, line);\n      }\n    }\n  }\n};\nexport default Report;\n","import DataBoard from \"../classes/DataBoard\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PostSuccessful = {\n  init() {\n    if (!Conf['Remember Your Posts']) { return; }\n    return $.ready(this.ready);\n  },\n\n  ready() {\n    if (d.title !== 'Post successful!') { return; }\n\n    let [_, threadID, postID] = $('h1').nextSibling.textContent.match(/thread:(\\d+),no:(\\d+)/);\n    postID   = +postID;\n    threadID = +threadID || postID;\n\n    const db = new DataBoard('yourPosts');\n    return db.set({\n      boardID: g.BOARD.ID,\n      threadID,\n      postID,\n      val: true\n    });\n  }\n};\nexport default PostSuccessful;\n",null,null,null,null,"import { Conf, d } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\nimport SWYotsuba from \"./SW.yotsuba\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst SWTinyboard = {\n  isOPContainerThread: true,\n  mayLackJSON: true,\n  threadModTimeIgnoresSage: true,\n\n  disabledFeatures: [\n    'Resurrect Quotes',\n    'Quick Reply Personas',\n    'Quick Reply',\n    'Cooldown',\n    'Report Link',\n    'Delete Link',\n    'Edit Link',\n    'Quote Inlining',\n    'Quote Previewing',\n    'Quote Backlinks',\n    'File Info Formatting',\n    'Image Expansion',\n    'Image Expansion (Menu)',\n    'Comment Expansion',\n    'Thread Expansion',\n    'Favicon',\n    'Quote Threading',\n    'Thread Updater',\n    'Banner',\n    'Flash Features',\n    'Reply Pruning'\n  ],\n\n  detect() {\n    for (var script of $$('script:not([src])', d.head)) {\n      var m;\n      if (m = script.textContent.match(/\\bvar configRoot=(\".*?\")/)) {\n        var properties = dict();\n        try {\n          var root = JSON.parse(m[1]);\n          if (root[0] === '/') {\n            properties.root = location.origin + root;\n          } else if (/^https?:/.test(root)) {\n            properties.root = root;\n          }\n        } catch (error) {}\n        return properties;\n      }\n    }\n    return false;\n  },\n\n  awaitBoard(cb) {\n    let reactUI;\n    if (reactUI = $.id('react-ui')) {\n      const s = (this.selectors = Object.create(this.selectors));\n      s.boardFor = {index: '.page-container'};\n      s.thread = 'div[id^=\"thread_\"]';\n      return Main.mounted(cb);\n    } else {\n      return cb();\n    }\n  },\n\n  urls: {\n    thread({siteID, boardID, threadID}, isArchived) {\n      return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/${isArchived ? 'archive/' : ''}res/${threadID}.html`;\n    },\n    post({postID})                   { return `#${postID}`; },\n    index({siteID, boardID})          { return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/`; },\n    catalog({siteID, boardID})          { return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/catalog.html`; },\n    threadJSON({siteID, boardID, threadID}, isArchived) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/${isArchived ? 'archive/' : ''}res/${threadID}.json`; } else { return ''; }\n    },\n    archivedThreadJSON(thread) {\n      return SWTinyboard.urls.threadJSON(thread, true);\n    },\n    threadsListJSON({siteID, boardID}) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/threads.json`; } else { return ''; }\n    },\n    archiveListJSON({siteID, boardID}) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/archive/archive.json`; } else { return ''; }\n    },\n    catalogJSON({siteID, boardID}) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/catalog.json`; } else { return ''; }\n    },\n    file({siteID, boardID}, filename) {\n      return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/${filename}`;\n    },\n    thumb(board, filename) {\n      return SWTinyboard.urls.file(board, filename);\n    }\n  },\n\n  selectors: {\n    board:         'form[name=\"postcontrols\"]',\n    thread:        'input[name=\"board\"] ~ div[id^=\"thread_\"]',\n    threadDivider: 'div[id^=\"thread_\"] > hr:last-child',\n    summary:       '.omitted',\n    postContainer: 'div[id^=\"reply_\"]:not(.hidden)', // postContainer is thread for OP\n    opBottom:      '.op',\n    replyOriginal: 'div[id^=\"reply_\"]:not(.hidden)',\n    infoRoot:      '.intro',\n    info: {\n      subject:   '.subject',\n      name:      '.name',\n      email:     '.email',\n      tripcode:  '.trip',\n      uniqueID:  '.poster_id',\n      capcode:   '.capcode',\n      flag:      '.flag',\n      date:      'time',\n      nameBlock: 'label',\n      quote:     'a[href*=\"#q\"]',\n      reply:     'a[href*=\"/res/\"]:not([href*=\"#\"])'\n    },\n    icons: {\n      isSticky:   '.fa-thumb-tack',\n      isClosed:   '.fa-lock'\n    },\n    file: {\n      text:  '.fileinfo',\n      link:  '.fileinfo > a',\n      thumb: 'a > .post-image'\n    },\n    thumbLink: '.file > a',\n    multifile: '.files > .file',\n    highlightable: {\n      op:      ' > .op',\n      reply:   '.reply',\n      catalog: ' > .thread'\n    },\n    comment:   '.body',\n    spoiler:   '.spoiler',\n    quotelink: 'a[onclick*=\"highlightReply(\"]',\n    catalog: {\n      board:  '#Grid',\n      thread: '.mix',\n      thumb:  '.thread-image'\n    },\n    boardList: '.boardlist',\n    boardListBottom: '.boardlist.bottom',\n    styleSheet: '#stylesheet',\n    psa:       '.blotter',\n    nav: {\n      prev: '.pages > form > [value=Previous]',\n      next: '.pages > form > [value=Next]'\n    }\n  },\n\n  classes: {\n    highlight: 'highlighted'\n  },\n\n  xpath: {\n    thread:         'div[starts-with(@id,\"thread_\")]',\n    postContainer:  'div[starts-with(@id,\"reply_\") or starts-with(@id,\"thread_\")]',\n    replyContainer: 'div[starts-with(@id,\"reply_\")]'\n  },\n\n  regexp: {\n    quotelink:\n      new RegExp(`\\\n/\\\n([^/]+)\\\n/res/\\\n(\\\\d+)\\\n(?:\\\\.\\\\w+)?#\\\n(\\\\d+)\\\n$\\\n`),\n    quotelinkHTML:\n      /<a [^>]*\\bhref=\"[^\"]*\\/([^\\/]+)\\/res\\/(\\d+)(?:\\.\\w+)?#(\\d+)\"/g\n  },\n\n  Build: {\n    parseJSON(data, board) {\n      const o = SWYotsuba.Build.parseJSON(data, board);\n      if (data.ext === 'deleted') {\n        delete o.file;\n        $.extend(o, {\n          files: [],\n          fileDeleted: true,\n          filesDeleted: [0]\n        });\n      }\n      if (data.extra_files) {\n        let file;\n        for (let i = 0; i < data.extra_files.length; i++) {\n          var extra_file = data.extra_files[i];\n          if (extra_file.ext === 'deleted') {\n            o.filesDeleted.push(i);\n          } else {\n            file = SWYotsuba.Build.parseJSONFile(data, board);\n            o.files.push(file);\n          }\n        }\n        if (o.files.length) {\n          o.file = o.files[0];\n        }\n      }\n      return o;\n    },\n\n    parseComment(html) {\n      html = html\n        .replace(/<br\\b[^<]*>/gi, '\\n')\n        .replace(/<[^>]*>/g, '');\n      return $.unescape(html);\n    }\n  },\n\n  bgColoredEl() {\n    return $.el('div', {className: 'post reply'});\n  },\n\n  isFileURL(url) {\n    return /\\/src\\/[^\\/]+/.test(url.pathname);\n  },\n\n  preParsingFixes(board) {\n    // fixes effects of unclosed link in announcement\n    let broken;\n    if (broken = $('a > input[name=\"board\"]', board)) {\n      return $.before(broken.parentNode, broken);\n    }\n  },\n\n  parseNodes(post, nodes) {\n    // Add vichan's span.poster_id around the ID if not already present.\n    let m;\n    if (nodes.uniqueID) { return; }\n    let text = '';\n    let node = nodes.nameBlock.nextSibling;\n    while (node && (node.nodeType === 3)) {\n      text += node.textContent;\n      node = node.nextSibling;\n    }\n    if (m = text.match(/(\\s*ID:\\s*)(\\S+)/)) {\n      let uniqueID;\n      nodes.info.normalize();\n      let {nextSibling} = nodes.nameBlock;\n      nextSibling = nextSibling.splitText(m[1].length);\n      nextSibling.splitText(m[2].length);\n      nodes.uniqueID = (uniqueID = $.el('span', {className: 'poster_id'}));\n      $.replace(nextSibling, uniqueID);\n      return $.add(uniqueID, nextSibling);\n    }\n  },\n\n  parseDate(node) {\n    let date = Date.parse(node.getAttribute('datetime')?.trim());\n    if (!isNaN(date)) { return new Date(date); }\n    date = Date.parse(node.textContent.trim() + ' UTC'); // e.g. onesixtwo.club\n    if (!isNaN(date)) { return new Date(date); }\n    return undefined;\n  },\n\n  parseFile(post, file) {\n    let info, infoNode;\n    const {text, link, thumb} = file;\n    if ($.x(`ancestor::${this.xpath.postContainer}[1]`, text) !== post.nodes.root) { return false; } // file belongs to a reply\n    if (!(infoNode = link.nextSibling?.textContent.includes('(') ? link.nextSibling : link.nextElementSibling)) { return false; }\n    if (!(info = infoNode.textContent.match(/\\((.*,\\s*)?([\\d.]+ ?[KMG]?B).*\\)/))) { return false; }\n    const nameNode = $('.postfilename', text);\n    $.extend(file, {\n      name:       nameNode ? (nameNode.title || nameNode.textContent) : link.pathname.match(/[^/]*$/)[0],\n      size:       info[2],\n      dimensions: info[0].match(/\\d+x\\d+/)?.[0]\n    });\n    if (thumb) {\n      $.extend(file, {\n        thumbURL:  /\\/static\\//.test(thumb.src) && $.isImage(link.href) ? link.href : thumb.src,\n        isSpoiler: /^Spoiler/i.test(info[1] || '') || (link.textContent === 'Spoiler Image')\n      }\n      );\n    }\n    return true;\n  },\n\n  isThumbExpanded(file) {\n    // Detect old Tinyboard image expansion that changes src attribute on thumbnail.\n    return $.hasClass(file.thumb.parentNode, 'expanded') || (file.thumb.parentNode.dataset.expanded === 'true');\n  },\n\n  isLinkified(link) {\n    return /\\bnofollow\\b/.test(link.rel);\n  },\n\n  catalogPin(threadRoot) {\n    return threadRoot.dataset.sticky = 'true';\n  }\n};\nexport default SWTinyboard;\n","import SWTinyboard from \"./SW.tinyboard\";\nimport SWYotsuba from \"./SW.yotsuba\";\n\nconst SW = { tinyboard: SWTinyboard, yotsuba: SWYotsuba };\nexport default SW;\n",null,null,null,null,"import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { Conf, doc, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar FappeTyme = {\n  init() {\n    if ((!Conf['Fappe Tyme'] && !Conf['Werk Tyme']) || !['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n\n    this.nodes = {};\n    this.enabled = {\n      fappe: false,\n      werk:  Conf['werk']\n    };\n\n    for (var type of [\"Fappe\", \"Werk\"]) {\n      if (Conf[`${type} Tyme`]) {\n        var lc = type.toLowerCase();\n        var el = UI.checkbox(lc, `${type} Tyme`, false);\n        el.title = `${type} Tyme`;\n\n        this.nodes[lc] = el.firstElementChild;\n        if (Conf[lc]) { this.set(lc, true); }\n        $.on(this.nodes[lc], 'change', this.toggle.bind(this, lc));\n\n        Header.menu.addEntry({\n          el,\n          order: 97\n        });\n\n        var indicator = $.el('span', {\n          className: 'indicator',\n          textContent: type[0],\n          title: `${type} Tyme active`\n        }\n        );\n        $.on(indicator, 'click', function() {\n          const check = $.getOwn(FappeTyme.nodes, this.parentNode.id.replace('shortcut-', ''));\n          check.checked = !check.checked;\n          return $.event('change', null, check);\n        });\n        Header.addShortcut(lc, indicator, 410);\n      }\n    }\n\n    if (Conf['Werk Tyme']) {\n      $.sync('werk', this.set.bind(this, 'werk'));\n    }\n\n    Callbacks.Post.push({\n      name: 'Fappe Tyme',\n      cb:   this.node\n    });\n\n    return Callbacks.CatalogThread.push({\n      name: 'Werk Tyme',\n      cb:   this.catalogNode\n    });\n  },\n\n  node() {\n    return this.nodes.root.classList.toggle('noFile', !this.files.length);\n  },\n\n  catalogNode() {\n    const file = this.thread.OP.files[0];\n    if (!file) { return; }\n    const filename = $.el('div', {\n      textContent: file.name,\n      className:   'werkTyme-filename'\n    }\n    );\n    return $.add(this.nodes.thumb.parentNode, filename);\n  },\n\n  set(type, enabled) {\n    this.enabled[type] = (this.nodes[type].checked = enabled);\n    return $[`${enabled ? 'add' : 'rm'}Class`](doc, `${type}Tyme`);\n  },\n\n  toggle(type) {\n    this.set(type, !this.enabled[type]);\n    if (type === 'werk') { return $.cb.checked.call(this.nodes[type]); }\n  }\n};\nexport default FappeTyme;\n","import Callbacks from \"../classes/Callbacks\";\nimport Notice from \"../classes/Notice\";\nimport Filter from \"../Filtering/Filter\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS204: Change includes calls to have a more natural evaluation order\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Sauce = {\n  init() {\n    let link;\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Sauce']) { return; }\n    $.addClass(doc, 'show-sauce');\n\n    const links = [];\n    for (link of Conf['sauces'].split('\\n')) {\n      var linkData;\n      if ((link[0] !== '#') && (linkData = this.parseLink(link))) {\n        links.push(linkData);\n      }\n    }\n    if (!links.length) { return; }\n\n    this.links = links;\n    this.link  = $.el('a', {\n      target:    '_blank',\n      className: 'sauce'\n    }\n    );\n    return Callbacks.Post.push({\n      name: 'Sauce',\n      cb:   this.node\n    });\n  },\n\n  parseLink(link) {\n    if (!(link = link.trim())) { return null; }\n    const parts = dict();\n    const iterable = link.split(/;(?=(?:text|boards|types|regexp|sandbox):?)/);\n    for (let i = 0; i < iterable.length; i++) {\n      var part = iterable[i];\n      if (i === 0) {\n        parts['url'] = part;\n      } else {\n        var m = part.match(/^(\\w*):?(.*)$/);\n        parts[m[1]] = m[2];\n      }\n    }\n    if (!parts['text']) { parts['text'] = parts['url'].match(/(\\w+)\\.\\w+\\//)?.[1] || '?'; }\n    if ('boards' in parts) {\n      parts['boards'] = Filter.parseBoards(parts['boards']);\n    }\n    if ('regexp' in parts) {\n      try {\n        let regexp;\n        if (regexp = parts['regexp'].match(/^\\/(.*)\\/(\\w*)$/)) {\n          parts['regexp'] = RegExp(regexp[1], regexp[2]);\n        } else {\n          parts['regexp'] = RegExp(parts['regexp']);\n        }\n      } catch (err) {\n        new Notice('warning', [\n          $.tn(\"Invalid regexp for Sauce link:\"),\n          $.el('br'),\n          $.tn(link),\n          $.el('br'),\n          $.tn(err.message)\n        ], 60);\n        return null;\n      }\n    }\n    return parts;\n  },\n\n  createSauceLink(link, post, file) {\n    let a, matches, needle;\n    const ext = file.url.match(/[^.]*$/)[0];\n    const parts = dict();\n    $.extend(parts, link);\n\n    if (!!parts['boards'] && !parts['boards'][`${post.siteID}/${post.boardID}`] && !parts['boards'][`${post.siteID}/*`]) { return null; }\n    if (!!parts['types']  && (needle = ext, !parts['types'].split(',').includes(needle))) { return null; }\n    if (!!parts['regexp'] && (!(matches = file.name.match(parts['regexp'])))) { return null; }\n\n    const missing = [];\n    for (var key of ['url', 'text']) {\n      parts[key] = parts[key].replace(/%(T?URL|IMG|[sh]?MD5|board|name|%|semi|\\$\\d+)/g, function(orig, parameter) {\n        let type;\n        if (parameter[0] === '$') {\n          if (!matches) { return orig; }\n          type = matches[parameter.slice(1)] || '';\n        } else {\n          type = Sauce.formatters[parameter](post, file, ext);\n          if ((type == null)) {\n            missing.push(parameter);\n            return '';\n          }\n        }\n\n        if ((key === 'url') && !['%', 'semi'].includes(parameter)) {\n          if (/^javascript:/i.test(parts['url'])) { type = JSON.stringify(type); }\n          type = encodeURIComponent(type);\n        }\n        return type;\n      });\n    }\n\n    if (g.SITE.areMD5sDeferred?.(post.board) && missing.length && !missing.filter(x => !/^.?MD5$/.test(x)).length) {\n      a = Sauce.link.cloneNode(false);\n      a.dataset.skip = '1';\n      return a;\n    }\n\n    if (missing.length) { return null; }\n\n    a = Sauce.link.cloneNode(false);\n    a.href = parts['url'];\n    a.textContent = parts['text'];\n    if (/^javascript:/i.test(parts['url'])) { a.removeAttribute('target'); }\n    return a;\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var file of this.files) {\n      Sauce.file(this, file);\n    }\n  },\n\n  file(post, file) {\n    let link, node;\n    const nodes = [];\n    const skipped = [];\n    for (link of Sauce.links) {\n      if (node = Sauce.createSauceLink(link, post, file)) {\n        nodes.push($.tn(' '), node);\n        if (node.dataset.skip) { skipped.push([link, node]); }\n      }\n    }\n    $.add(file.text, nodes);\n\n    if (skipped.length) {\n      var observer = new MutationObserver(function() {\n        if (file.text.dataset.md5) {\n          for ([link, node] of skipped) {\n            var node2;\n            if (node2 = Sauce.createSauceLink(link, post, file)) {\n              $.replace(node, node2);\n            }\n          }\n          return observer.disconnect();\n        }\n      });\n      return observer.observe(file.text, {attributes: true});\n    }\n  },\n\n  formatters: {\n    TURL(post, file) { return file.thumbURL; },\n    URL(post, file) { return file.url; },\n    IMG(post, file, ext) { if (['gif', 'jpg', 'jpeg', 'png'].includes(ext)) { return file.url; } else { return file.thumbURL; } },\n    MD5(post, file) { return file.MD5; },\n    sMD5(post, file) { return file.MD5?.replace(/[+/=]/g, c => ({'+': '-', '/': '_', '=': ''})[c]); },\n    hMD5(post, file) { if (file.MD5) { return (atob(file.MD5).map((c) => `0${c.charCodeAt(0).toString(16)}`.slice(-2))).join(''); } },\n    board(post) { return post.board.ID; },\n    name(post, file) { return file.name; },\n    '%'() { return '%'; },\n    semi() { return ';'; }\n  }\n};\nexport default Sauce;\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nimport galleryPage from './Gallery/Gallery.html';\nimport $ from '../platform/$';\nimport Callbacks from '../classes/Callbacks';\nimport Notice from '../classes/Notice';\nimport Main from '../main/Main';\nimport Keybinds from '../Miscellaneous/Keybinds';\nimport $$ from '../platform/$$';\nimport ImageCommon from './ImageCommon';\nimport Sauce from './Sauce';\nimport Volume from './Volume';\nimport Header from '../General/Header';\nimport { Conf, d, doc, g } from '../globals/globals';\nimport UI from '../General/UI';\nimport Get from '../General/Get';\nimport { debounce, dict, SECOND } from '../platform/helpers';\nimport Icon from '../Icons/icon';\n\nvar Gallery = {\n  init() {\n    if (!(this.enabled = Conf['Gallery'] && ['index', 'thread'].includes(g.VIEW))) { return; }\n\n    this.delay = Conf['Slide Delay'];\n\n    const el = $.el('a', {\n      href: 'javascript:;',\n      title: 'Gallery',\n    });\n    Icon.set(el, 'image', 'Gallery');\n\n    $.on(el, 'click', this.cb.toggle);\n\n    Header.addShortcut('gallery', el, 530);\n\n    return Callbacks.Post.push({\n      name: 'Gallery',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    return (() => {\n      const result = [];\n      for (var file of this.files) {\n        if (file.thumb) {\n          if (Gallery.nodes) {\n            Gallery.generateThumb(this, file);\n            Gallery.nodes.total.textContent = Gallery.images.length;\n          }\n\n          if (!Conf['Image Expansion'] && ((g.SITE.software !== 'tinyboard') || !Main.jsEnabled)) {\n            result.push($.on(file.thumbLink, 'click', Gallery.cb.image));\n          } else {\n            result.push(undefined);\n          }\n        }\n      }\n      return result;\n    })();\n  },\n\n  build(image) {\n    let dialog, thumb;\n    const {cb} = Gallery;\n\n    if (Conf['Fullscreen Gallery']) {\n      $.one(d, 'fullscreenchange mozfullscreenchange webkitfullscreenchange', () => $.on(d, 'fullscreenchange mozfullscreenchange webkitfullscreenchange', cb.close));\n      doc.mozRequestFullScreen?.();\n      doc.webkitRequestFullScreen?.(Element.ALLOW_KEYBOARD_INPUT);\n    }\n\n    Gallery.images  = [];\n    const nodes = (Gallery.nodes = {});\n    Gallery.fileIDs = dict();\n    Gallery.slideshow = false;\n\n    nodes.el = (dialog = $.el('div',\n      {id: 'a-gallery'}));\n    $.extend(dialog, {innerHTML: galleryPage });\n\n    const object = {\n      buttons: '.gal-buttons',\n      frame:   '.gal-image',\n      name:    '.gal-name',\n      count:   '.count',\n      total:   '.total',\n      sauce:   '.gal-sauce',\n      thumbs:  '.gal-thumbnails',\n      next:    '.gal-image a',\n      current: '.gal-image img'\n    };\n    for (var key in object) { var value = object[key]; nodes[key] = $(value, dialog); }\n\n    const menuButton = $('.menu-button', dialog);\n    nodes.menu = new UI.Menu('gallery');\n\n    $.on(nodes.frame, 'click', cb.blank);\n    if (Conf['Mouse Wheel Volume']) { $.on(nodes.frame, 'wheel', Volume.wheel); }\n    $.on(nodes.next,  'click', cb.click);\n    $.on(nodes.name,  'click', ImageCommon.download);\n\n    $.on($('.gal-prev',  dialog), 'click', cb.prev);\n    $.on($('.gal-next',  dialog), 'click', cb.next);\n    $.on($('.gal-start', dialog), 'click', cb.start);\n    $.on($('.gal-stop',  dialog), 'click', cb.stop);\n    $.on($('.gal-close', dialog), 'click', cb.close);\n\n    $.on(menuButton, 'click', function(e) {\n      return nodes.menu.toggle(e, this, g);\n    });\n\n    for (var entry of Gallery.menu.createSubEntries()) {\n      entry.order = 0;\n      nodes.menu.addEntry(entry);\n    }\n\n    $.on(d, 'keydown', cb.keybinds);\n    if (Conf['Keybinds']) { $.off(d, 'keydown', Keybinds.keydown); }\n\n    $.on(window, 'resize', Gallery.cb.setHeight);\n\n    for (var postThumb of $$(g.SITE.selectors.file.thumb)) {\n      var post;\n      if (!(post = Get.postFromNode(postThumb))) { continue; }\n      for (var file of post.files) {\n        if (file.thumb) {\n          Gallery.generateThumb(post, file);\n          // If no image to open is given, pick image we have scrolled to.\n          if (!image && Gallery.fileIDs[`${post.fullID}.${file.index}`]) {\n            var candidate = file.thumbLink;\n            if ((Header.getTopOf(candidate) + candidate.getBoundingClientRect().height) >= 0) {\n              image = candidate;\n            }\n          }\n        }\n      }\n    }\n    $.addClass(doc, 'gallery-open');\n\n    $.add(d.body, dialog);\n\n    nodes.thumbs.scrollTop = 0;\n    nodes.current.parentElement.scrollTop = 0;\n\n    if (image) { thumb = $(`[href='${image.href}']`, nodes.thumbs); }\n    if (!thumb) { thumb = Gallery.images[Gallery.images.length-1]; }\n    if (thumb) { Gallery.open(thumb); }\n\n    doc.style.overflow = 'hidden';\n    return nodes.total.textContent = Gallery.images.length;\n  },\n\n  generateThumb(post, file) {\n    if (post.isClone || post.isHidden) { return; }\n    if (!file || !file.thumb || (!file.isImage && !file.isVideo && !Conf['PDF in Gallery'])) { return; }\n    if (Gallery.fileIDs[`${post.fullID}.${file.index}`]) { return; }\n\n    Gallery.fileIDs[`${post.fullID}.${file.index}`] = true;\n\n    const thumb = $.el('a', {\n      className: 'gal-thumb',\n      href:      file.url,\n      target:    '_blank',\n      title:     file.name\n    }\n    );\n\n    thumb.dataset.id   = Gallery.images.length;\n    thumb.dataset.post = post.fullID;\n    thumb.dataset.file = file.index;\n\n    const thumbImg = file.thumb.cloneNode(false);\n    thumbImg.style.cssText = '';\n    $.add(thumb, thumbImg);\n\n    $.on(thumb, 'click', Gallery.cb.open);\n\n    Gallery.images.push(thumb);\n    return $.add(Gallery.nodes.thumbs, thumb);\n  },\n\n  load(thumb, errorCB) {\n    const ext = thumb.href.match(/\\w*$/);\n    const elType = $.getOwn({'webm': 'video', 'mp4': 'video', 'ogv': 'video', 'pdf': 'iframe'}, ext) || 'img';\n    const file = $.el(elType);\n    $.extend(file.dataset, thumb.dataset);\n    $.on(file, 'error', errorCB);\n    file.src = thumb.href;\n    return file;\n  },\n\n  open(thumb) {\n    let el, file, post;\n    const {nodes} = Gallery;\n    const oldID = +nodes.current.dataset.id;\n    const newID = +thumb.dataset.id;\n\n    // Highlight, center selected thumbnail\n    if (el = Gallery.images[oldID]) { $.rmClass(el,    'gal-highlight'); }\n    $.addClass(thumb, 'gal-highlight');\n    nodes.thumbs.scrollTop = (thumb.offsetTop + (thumb.offsetHeight/2)) - (nodes.thumbs.clientHeight/2);\n\n    // Load image or use preloaded image\n    if (Gallery.cache?.dataset.id === (''+newID)) {\n      file = Gallery.cache;\n      $.off(file, 'error', Gallery.cacheError);\n      $.on(file, 'error', Gallery.error);\n    } else {\n      file = Gallery.load(thumb, Gallery.error);\n    }\n\n    // Replace old image with new one\n    $.off(nodes.current, 'error', Gallery.error);\n    ImageCommon.pause(nodes.current);\n    $.replace(nodes.current, file);\n    nodes.current = file;\n\n    if (file.nodeName === 'VIDEO') {\n      file.loop = true;\n      Volume.setup(file);\n      if (Conf['Autoplay']) { file.play(); }\n      if (Conf['Show Controls']) { ImageCommon.addControls(file); }\n    }\n\n    doc.classList.toggle('gal-pdf', file.nodeName === 'IFRAME');\n    Gallery.cb.setHeight();\n    nodes.count.textContent = +thumb.dataset.id + 1;\n    nodes.name.download     = (nodes.name.textContent = thumb.title);\n    nodes.name.href         = thumb.href;\n    nodes.frame.scrollTop   = 0;\n    nodes.next.focus();\n\n    // Set sauce links\n    $.rmAll(nodes.sauce);\n    if (Conf['Sauce'] && Sauce.links && (post = g.posts.get(file.dataset.post))) {\n      const sauces = [];\n      for (var link of Sauce.links) {\n        var node;\n        if (node = Sauce.createSauceLink(link, post, post.files[+file.dataset.file])) {\n          sauces.push($.tn(' '), node);\n        }\n      }\n      $.add(nodes.sauce, sauces);\n    }\n\n    // Continue slideshow if moving forward, stop otherwise\n    if (Gallery.slideshow && ((newID > oldID) || ((oldID === (Gallery.images.length-1)) && (newID === 0)))) {\n      Gallery.setupTimer();\n    } else {\n      Gallery.cb.stop();\n    }\n\n    // Scroll to post\n    if (Conf['Scroll to Post'] && (post = g.posts.get(file.dataset.post))) {\n      Header.scrollTo(post.nodes.root);\n    }\n\n    // Preload next image\n    if (isNaN(oldID) || (newID === ((oldID + 1) % Gallery.images.length))) {\n      return Gallery.cache = Gallery.load(Gallery.images[(newID + 1) % Gallery.images.length], Gallery.cacheError);\n    }\n  },\n\n  error() {\n    if (this.error?.code === MediaError.MEDIA_ERR_DECODE) {\n      return new Notice('error', 'Corrupt or unplayable video', 30);\n    }\n    if (ImageCommon.isFromArchive(this)) { return; }\n    const post = g.posts.get(this.dataset.post);\n    const file = post.files[+this.dataset.file];\n    return ImageCommon.error(this, post, file, null, url => {\n      if (!url) { return; }\n      Gallery.images[+this.dataset.id].href = url;\n      if (Gallery.nodes.current === this) { return this.src = url; }\n    });\n  },\n\n  cacheError() {\n    return delete Gallery.cache;\n  },\n\n  cleanupTimer() {\n    clearTimeout(Gallery.timeoutID);\n    const {current} = Gallery.nodes;\n    $.off(current, 'canplaythrough load', Gallery.startTimer);\n    return $.off(current, 'ended', Gallery.cb.next);\n  },\n\n  startTimer() {\n    return Gallery.timeoutID = setTimeout(Gallery.checkTimer, Gallery.delay * SECOND);\n  },\n\n  setupTimer() {\n    Gallery.cleanupTimer();\n    const {current} = Gallery.nodes;\n    const isVideo = current.nodeName === 'VIDEO';\n    if (isVideo) { current.play(); }\n    if ((isVideo ? current.readyState >= 4 : current.complete) || (current.nodeName === 'IFRAME')) {\n      return Gallery.startTimer();\n    } else {\n      return $.on(current, (isVideo ? 'canplaythrough' : 'load'), Gallery.startTimer);\n    }\n  },\n\n  checkTimer() {\n    const {current} = Gallery.nodes;\n    if ((current.nodeName === 'VIDEO') && !current.paused) {\n      $.on(current, 'ended', Gallery.cb.next);\n      return current.loop = false;\n    } else {\n      return Gallery.cb.next();\n    }\n  },\n\n  cb: {\n    keybinds(e) {\n      let key;\n      if (!(key = Keybinds.keyCode(e))) { return; }\n\n      const cb = (() => { switch (key) {\n        case Conf['Close']: case Conf['Open Gallery']:\n          return Gallery.cb.close;\n        case Conf['Next Gallery Image']:\n          return Gallery.cb.next;\n        case Conf['Advance Gallery']:\n          return Gallery.cb.advance;\n        case Conf['Previous Gallery Image']:\n          return Gallery.cb.prev;\n        case Conf['Pause']:\n          return Gallery.cb.pause;\n        case Conf['Slideshow']:\n          return Gallery.cb.toggleSlideshow;\n        case Conf['Rotate image anticlockwise']:\n          return Gallery.cb.rotateLeft;\n        case Conf['Rotate image clockwise']:\n          return Gallery.cb.rotateRight;\n        case Conf['Download Gallery Image']:\n          return Gallery.cb.download;\n      } })();\n\n      if (!cb) { return; }\n      e.stopPropagation();\n      e.preventDefault();\n      return cb();\n    },\n\n    open(e) {\n      if (e) { e.preventDefault(); }\n      if (this) { return Gallery.open(this); }\n    },\n\n    image(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      return Gallery.build(this);\n    },\n\n    prev() {\n      return Gallery.cb.open.call(\n        Gallery.images[+Gallery.nodes.current.dataset.id - 1] || Gallery.images[Gallery.images.length - 1]\n      );\n    },\n    next() {\n      return Gallery.cb.open.call(\n        Gallery.images[+Gallery.nodes.current.dataset.id + 1] || Gallery.images[0]\n      );\n    },\n\n    click(e) {\n      if (ImageCommon.onControls(e)) { return; }\n      e.preventDefault();\n      return Gallery.cb.advance();\n    },\n\n    advance() { if (!Conf['Autoplay'] && Gallery.nodes.current.paused) { return Gallery.nodes.current.play(); } else { return Gallery.cb.next(); } },\n    toggle() { return (Gallery.nodes ? Gallery.cb.close : Gallery.build)(); },\n    blank(e) { if (e.target === this) { return Gallery.cb.close(); } },\n    toggleSlideshow() {  return Gallery.cb[Gallery.slideshow ? 'stop' : 'start'](); },\n\n    download() {\n      const name = $('.gal-name');\n      return name.click();\n    },\n\n    pause() {\n      Gallery.cb.stop();\n      const {current} = Gallery.nodes;\n      if (current.nodeName === 'VIDEO') { return current[current.paused ? 'play' : 'pause'](); }\n    },\n\n    start() {\n      $.addClass(Gallery.nodes.buttons, 'gal-playing');\n      Gallery.slideshow = true;\n      return Gallery.setupTimer();\n    },\n\n    stop() {\n      if (!Gallery.slideshow) { return; }\n      Gallery.cleanupTimer();\n      const {current} = Gallery.nodes;\n      if (current.nodeName === 'VIDEO') { current.loop = true; }\n      $.rmClass(Gallery.nodes.buttons, 'gal-playing');\n      return Gallery.slideshow = false;\n    },\n\n    rotateLeft() { return Gallery.cb.rotate(270); },\n    rotateRight() { return Gallery.cb.rotate(90); },\n\n    rotate: debounce(100, function(delta) {\n      const {current} = Gallery.nodes;\n      if (current.nodeName === 'IFRAME') { return; }\n      current.dataRotate = ((current.dataRotate || 0) + delta) % 360;\n      current.style.transform = `rotate(${current.dataRotate}deg)`;\n      return Gallery.cb.setHeight();\n    }),\n\n    close() {\n      $.off(Gallery.nodes.current, 'error', Gallery.error);\n      ImageCommon.pause(Gallery.nodes.current);\n      $.rm(Gallery.nodes.el);\n      $.rmClass(doc, 'gallery-open');\n      if (Conf['Fullscreen Gallery']) {\n        $.off(d, 'fullscreenchange mozfullscreenchange webkitfullscreenchange', Gallery.cb.close);\n        d.mozCancelFullScreen?.();\n        d.webkitExitFullscreen?.();\n      }\n      delete Gallery.nodes;\n      delete Gallery.fileIDs;\n      doc.style.overflow = '';\n\n      $.off(d, 'keydown', Gallery.cb.keybinds);\n      if (Conf['Keybinds']) { $.on(d, 'keydown', Keybinds.keydown); }\n      $.off(window, 'resize', Gallery.cb.setHeight);\n      return clearTimeout(Gallery.timeoutID);\n    },\n\n    setFitness() {\n      return (this.checked ? $.addClass : $.rmClass)(doc, `gal-${this.name.toLowerCase().replace(/\\s+/g, '-')}`);\n    },\n\n    setHeight: debounce(100, function () {\n      let dim, margin, minHeight;\n      const {current, frame} = Gallery.nodes;\n      const {style} = current;\n\n      if (Conf['Stretch to Fit'] && (dim = g.posts.get(current.dataset.post)?.files[+current.dataset.file].dimensions)) {\n        const [width, height] = dim.split('x');\n        let containerWidth = frame.clientWidth;\n        let containerHeight = doc.clientHeight - 25;\n        if (((current.dataRotate || 0) % 180) === 90) {\n          [containerWidth, containerHeight] = [containerHeight, containerWidth];\n        }\n        minHeight = Math.min(containerHeight, (height / width) * containerWidth);\n        style.minHeight = minHeight + 'px';\n        style.minWidth = ((width / height) * minHeight) + 'px';\n      } else {\n        style.minHeight = (style.minWidth = '');\n      }\n\n      if (((current.dataRotate || 0) % 180) === 90) {\n        style.maxWidth  = Conf['Fit Height'] ? `${doc.clientHeight - 25}px` : 'none';\n        style.maxHeight = Conf['Fit Width']  ? `${frame.clientWidth}px`     : 'none';\n        margin = (current.clientWidth - current.clientHeight)/2;\n        return style.margin = `${margin}px ${-margin}px`;\n      } else {\n        return style.maxWidth = (style.maxHeight = (style.margin = ''));\n      }\n    }),\n\n    setDelay() { return Gallery.delay = +this.value; }\n  },\n\n  menu: {\n    init() {\n      if (!Gallery.enabled) { return; }\n\n      const el = $.el('span', {\n        textContent: 'Gallery',\n        className: 'gallery-link'\n      }\n      );\n\n      return Header.menu.addEntry({\n        el,\n        order: 105,\n        subEntries: Gallery.menu.createSubEntries()\n      });\n    },\n\n    createSubEntry(name) {\n      const label = UI.checkbox(name, name);\n      const input = label.firstElementChild;\n      if (['Hide Thumbnails', 'Fit Width', 'Fit Height'].includes(name)) { $.on(input, 'change', Gallery.cb.setFitness); }\n      $.event('change', null, input);\n      $.on(input, 'change', $.cb.checked);\n      if (['Hide Thumbnails', 'Fit Width', 'Fit Height', 'Stretch to Fit'].includes(name)) { $.on(input, 'change', Gallery.cb.setHeight); }\n      return {el: label};\n    },\n\n    createSubEntries() {\n      const subEntries = (['Hide Thumbnails', 'Fit Width', 'Fit Height', 'Stretch to Fit', 'Scroll to Post'].map((item) => Gallery.menu.createSubEntry(item)));\n\n      const delayLabel = $.el('label', {innerHTML: 'Slide Delay: <input type=\"number\" name=\"Slide Delay\" min=\"0\" step=\"any\" class=\"field\">'});\n      const delayInput = delayLabel.firstElementChild;\n      delayInput.value = Gallery.delay;\n      $.on(delayInput, 'change', Gallery.cb.setDelay);\n      $.on(delayInput, 'change', $.cb.value);\n      subEntries.push({el: delayLabel});\n\n      return subEntries;\n    }\n  }\n};\nexport default Gallery;\n","import Get from '../General/Get';\nimport Header from '../General/Header';\nimport UI from '../General/UI';\nimport { g, Conf, d, doc, E } from '../globals/globals';\nimport ImageHost from '../Images/ImageHost';\nimport Main from '../main/Main';\nimport $ from '../platform/$';\nimport $$ from '../platform/$$';\nimport CrossOrigin from '../platform/CrossOrigin';\nimport { dict } from '../platform/helpers';\nimport EmbeddingPage from './Embedding/Embed.html';\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar Embedding = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW) || !Conf['Linkify'] || (!Conf['Embedding'] && !Conf['Link Title'] && !Conf['Cover Preview'])) { return; }\n    this.types = dict();\n    for (var type of this.ordered_types) { this.types[type.key] = type; }\n\n    if (Conf['Embedding'] && (g.VIEW !== 'archive')) {\n      this.dialog = UI.dialog('embedding',\n        { innerHTML: EmbeddingPage });\n      this.media = $('#media-embed', this.dialog);\n      $.one(d, '4chanXInitFinished', this.ready);\n      $.on(d, 'IndexRefreshInternal', () => g.posts.forEach(function(post) {\n        for (post of [post, ...post.clones]) {\n          for (var embed of post.nodes.embedlinks) {\n            Embedding.cb.catalogRemove.call(embed);\n          }\n        }\n      }));\n    }\n    if (Embedding.shouldFetchTitles()) {\n      $.on(d, '4chanXInitFinished PostsInserted', function() {\n        for (const service of Object.values(Embedding.types)) {\n          if (service.title?.batchSize) {\n            Embedding.flushTitles(service.title);\n          }\n        }\n      });\n    }\n  },\n\n  events(post) {\n    let el, i, items;\n    if (g.VIEW === 'archive') { return; }\n    if (Conf['Embedding']) {\n      i = 0;\n      items = (post.nodes.embedlinks = $$('.embedder', post.nodes.comment));\n      while ((el = items[i++])) {\n        $.on(el, 'click', Embedding.cb.click);\n        if ($.hasClass(el, 'embedded')) { Embedding.cb.toggle.call(el); }\n      }\n    }\n    if (Conf['Cover Preview']) {\n      i = 0;\n      items = $$('.linkify', post.nodes.comment);\n      while ((el = items[i++])) {\n        var data;\n        if (data = Embedding.services(el)) {\n          Embedding.preview(data);\n        }\n      }\n      return;\n    }\n  },\n\n  process(link, post) {\n    let data;\n    if (!Conf['Embedding'] && !Conf['Link Title'] && !Conf['Cover Preview']) { return; }\n    if ($.x('ancestor::pre', link)) { return; }\n    if (data = Embedding.services(link)) {\n      data.post = post;\n      if (Conf['Embedding'] && (g.VIEW !== 'archive')) { Embedding.embed(data); }\n      if (Embedding.shouldFetchTitles()) Embedding.title(data);\n      if (Conf['Cover Preview'] && (g.VIEW !== 'archive')) { return Embedding.preview(data); }\n    }\n  },\n\n  services(link) {\n    const {href} = link;\n    for (var type of Embedding.ordered_types) {\n      var match;\n      if (match = type.regExp.exec(href)) {\n        return {key: type.key, uid: match[1], options: match[2], link};\n      }\n    }\n  },\n\n  embed(data) {\n    const {key, uid, options, link, post} = data;\n    const {href} = link;\n\n    $.addClass(link, key.toLowerCase());\n\n    const embed = $.el('a', {\n      className:   'embedder',\n      href:        'javascript:;'\n    }\n    ,\n      {innerHTML: '(<span>un</span>embed)'});\n\n    const object = {key, uid, options, href};\n    for (var name in object) { var value = object[name]; embed.dataset[name] = value; }\n\n    $.on(embed, 'click', Embedding.cb.click);\n    $.after(link, [$.tn(' '), embed]);\n    post.nodes.embedlinks.push(embed);\n\n    if (Conf['Auto-embed'] && !Conf['Floating Embeds'] && !post.isFetchedQuote) {\n      if ($.hasClass(doc, 'catalog-mode')) {\n        return $.addClass(embed, 'embed-removed');\n      } else {\n        return Embedding.cb.toggle.call(embed);\n      }\n    }\n  },\n\n  ready() {\n    if (!Main.isThisPageLegit()) { return; }\n    $.addClass(Embedding.dialog, 'empty');\n    $.on($('.close', Embedding.dialog), 'click',     Embedding.closeFloat);\n    $.on($('.move',  Embedding.dialog), 'mousedown', Embedding.dragEmbed);\n    $.on($('.jump',  Embedding.dialog), 'click', function() {\n      if (doc.contains(Embedding.lastEmbed)) { return Header.scrollTo(Embedding.lastEmbed); }\n    });\n    return $.add(d.body, Embedding.dialog);\n  },\n\n  closeFloat() {\n    delete Embedding.lastEmbed;\n    $.addClass(Embedding.dialog, 'empty');\n    return $.replace(Embedding.media.firstChild, $.el('div'));\n  },\n\n  dragEmbed() {\n    // only webkit can handle a blocking div\n    const {style} = Embedding.media;\n    if (Embedding.dragEmbed.mouseup) {\n      $.off(d, 'mouseup', Embedding.dragEmbed);\n      Embedding.dragEmbed.mouseup = false;\n      style.pointerEvents = '';\n      return;\n    }\n    $.on(d, 'mouseup', Embedding.dragEmbed);\n    Embedding.dragEmbed.mouseup = true;\n    return style.pointerEvents = 'none';\n  },\n\n  title(data) {\n    let service;\n    const {key, uid, options, link, post} = data;\n    if (!(service = Embedding.types[key].title)) { return; }\n    $.addClass(link, key.toLowerCase());\n    if (service.batchSize) {\n      (service.queue || (service.queue = [])).push(data);\n      if (service.queue.length >= service.batchSize) {\n        return Embedding.flushTitles(service);\n      }\n    } else {\n      return CrossOrigin.cache(service.api(uid), (function() { return Embedding.cb.title(this, data); }));\n    }\n  },\n\n  flushTitles(service) {\n    let data;\n    const {queue} = service;\n    if (!queue?.length) { return; }\n    service.queue = [];\n    const cb = function() {\n      for (data of queue) { Embedding.cb.title(this, data); }\n    };\n    return CrossOrigin.cache(service.api((() => {\n      const result = [];\n      for (data of queue) {         result.push(data.uid);\n      }\n      return result;\n    })()), cb);\n  },\n\n  preview(data) {\n    let service;\n    const {key, uid, link} = data;\n    if (!(service = Embedding.types[key].preview)) { return; }\n    return $.on(link, 'mouseover', function(e) {\n      const src = service.url(uid);\n      const {height} = service;\n      const el = $.el('img', {\n        src,\n        id: 'ihover'\n      }\n      );\n      $.add(Header.hover, el);\n      return UI.hover({\n        root: link,\n        el,\n        latestEvent: e,\n        endEvents: 'mouseout click',\n        height\n      });\n    });\n  },\n\n  cb: {\n    click(e) {\n      e.preventDefault();\n      if (!$.hasClass(this, 'embedded') && (Conf['Floating Embeds'] || $.hasClass(doc, 'catalog-mode'))) {\n        let div;\n        if (!(div = Embedding.media.firstChild)) { return; }\n        $.replace(div, Embedding.cb.embed(this));\n        Embedding.lastEmbed = Get.postFromNode(this).nodes.root;\n        return $.rmClass(Embedding.dialog, 'empty');\n      } else {\n        return Embedding.cb.toggle.call(this);\n      }\n    },\n\n    toggle() {\n      if ($.hasClass(this, \"embedded\")) {\n        $.rm(this.nextElementSibling);\n      } else {\n        $.after(this, Embedding.cb.embed(this));\n      }\n      return $.toggleClass(this, 'embedded');\n    },\n\n    embed(a) {\n      // We create an element to embed\n      let el, type;\n      const container = $.el('div', {className: 'media-embed'});\n      $.add(container, (el = (type = Embedding.types[a.dataset.key]).el(a)));\n\n      // Set style values.\n      el.style.cssText = (type.style != null) ?\n        type.style\n      :\n        'border: none; width: 640px; height: 360px;';\n\n      return container;\n    },\n\n    catalogRemove() {\n      const isCatalog = $.hasClass(doc, 'catalog-mode');\n      if ((isCatalog && $.hasClass(this, 'embedded')) || (!isCatalog && $.hasClass(this, 'embed-removed'))) {\n        Embedding.cb.toggle.call(this);\n        return $.toggleClass(this, 'embed-removed');\n      }\n    },\n\n    title(req, data) {\n      let text;\n      const {key, uid, options, link, post} = data;\n      const service = Embedding.types[key].title;\n\n      let {status} = req;\n      if ([200, 304].includes(status) && service.status) {\n        status = service.status(req.response)[0];\n      }\n\n      if (!status) { return; }\n\n      text = `[${key}] ${(() => { switch (status) {\n        case 200: case 304:\n          text = service.text(req.response, uid);\n          if (typeof text === 'string') {\n            return text;\n          } else {\n            return text = link.textContent;\n          }\n        case 404:\n          return \"Not Found\";\n        case 403: case 401:\n          return \"Forbidden or Private\";\n        default:\n          return `${status}'d`;\n      } })()\n      }`;\n\n      link.dataset.original = link.textContent;\n      link.textContent = text;\n      for (var post2 of post.clones) {\n        for (var link2 of $$('a.linkify', post2.nodes.comment)) {\n          if (link2.href === link.href) {\n            if (link2.dataset.original == null) { link2.dataset.original = link2.textContent; }\n            link2.textContent = text;\n          }\n        }\n      }\n    }\n  },\n\n  ordered_types: [{\n      key: 'audio',\n      regExp: /^[^?#]+\\.(?:mp3|m4a|oga|wav|flac)(?:[?#]|$)/i,\n      style: '',\n      el(a) {\n        return $.el('audio', {\n          controls:    true,\n          preload:     'auto',\n          src:         a.dataset.href\n        }\n        );\n      }\n    }\n    , {\n      key: 'image',\n      regExp: /^[^?#]+\\.(?:gif|png|jpg|jpeg|bmp|webp)(?::\\w+)?(?:[?#]|$)/i,\n      style: '',\n      el(a) {\n        const hrefEsc = E(a.dataset.href);\n        return $.el('div', { innerHTML: `<a target=\"_blank\" href=\"${hrefEsc}\"><img src=\"${hrefEsc}\" style=\"max-width: 80vw; max-height: 80vh;\"></a>`});\n      }\n    }\n    , {\n      key: 'video',\n      regExp: /^[^?#]+\\.(?:og[gv]|webm|mp4)(?:[?#]|$)/i,\n      style: 'max-width: 80vw; max-height: 80vh;',\n      el(a) {\n        const el = $.el('video', {\n          hidden:   true,\n          controls: true,\n          preload:  'auto',\n          src:      a.dataset.href,\n          loop:     ImageHost.test(a.dataset.href.split('/')[2])\n        });\n        $.on(el, 'loadedmetadata', function() {\n          if ((el.videoHeight === 0) && el.parentNode) {\n            return $.replace(el, Embedding.types.audio.el(a));\n          } else {\n            return el.hidden = false;\n          }\n        });\n        return el;\n      }\n    }\n    , {\n      key: 'PeerTube',\n      regExp: /^(\\w+:\\/\\/[^\\/]+\\/videos\\/watch\\/\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})(.*)/,\n      el(a) {\n        let start;\n        const options = (start = a.dataset.options.match(/[?&](start=\\w+)/)) ? `?${start[1]}` : '';\n        const el = $.el('iframe',\n          {src: a.dataset.uid.replace('/videos/watch/', '/videos/embed/') + options});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'BitChute',\n      regExp:  /^\\w+:\\/\\/(?:www\\.)?bitchute\\.com\\/video\\/([\\w\\-]+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://www.bitchute.com/embed/${a.dataset.uid}/`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Clyp',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?clyp\\.it\\/(\\w{8})/,\n      style: 'border: 0; width: 640px; height: 160px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://clyp.it/${a.dataset.uid}/widget`});\n      },\n      title: {\n        api(uid) { return `https://api.clyp.it/oembed?url=https://clyp.it/${uid}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'Dailymotion',\n      regExp:  /^\\w+:\\/\\/(?:(?:www\\.)?dailymotion\\.com\\/(?:embed\\/)?video|dai\\.ly)\\/([A-Za-z0-9]+)[^?]*(.*)/,\n      el(a) {\n        let start;\n        const options = (start = a.dataset.options.match(/[?&](start=\\d+)/)) ? `?${start[1]}` : '';\n        const el = $.el('iframe',\n          {src: `//www.dailymotion.com/embed/video/${a.dataset.uid}${options}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://api.dailymotion.com/video/${uid}`; },\n        text(_) { return _.title; }\n      },\n      preview: {\n        url(uid) { return `https://www.dailymotion.com/thumbnail/video/${uid}`; },\n        height: 240\n      }\n    }\n    , {\n      key: 'Gfycat',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?gfycat\\.com\\/(?:iframe\\/)?(\\w+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `//gfycat.com/ifr/${a.dataset.uid}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Gist',\n      regExp: /^\\w+:\\/\\/gist\\.github\\.com\\/[\\w\\-]+\\/(\\w+)/,\n      style: '',\n      el: (function() {\n        let counter = 0;\n        return function(a) {\n          const el = $.el('pre', {\n            hidden: true,\n            id: `gist-embed-${counter++}`\n          }\n          );\n          CrossOrigin.cache(`https://api.github.com/gists/${a.dataset.uid}`, function() {\n            el.textContent = Object.values(this.response.files)[0].content;\n            el.className = 'prettyprint';\n            $.global(() => window.prettyPrint?.((function() {}), document.getElementById(document.currentScript.dataset.id).parentNode)\n            , {id: el.id});\n            return el.hidden = false;\n          });\n          return el;\n        };\n      })(),\n      title: {\n        api(uid) { return `https://api.github.com/gists/${uid}`; },\n        text({files}) {\n          for (var file in files) { if (files.hasOwnProperty(file)) { return file; } }\n        }\n      }\n    }\n    , {\n      key: 'InstallGentoo',\n      regExp: /^\\w+:\\/\\/paste\\.installgentoo\\.com\\/view\\/(?:raw\\/|download\\/|embed\\/)?(\\w+)/,\n      el(a) {\n        return $.el('iframe',\n          {src: `https://paste.installgentoo.com/view/embed/${a.dataset.uid}`});\n      }\n    }\n    , {\n      key: 'LiveLeak',\n      regExp: /^\\w+:\\/\\/(?:\\w+\\.)?liveleak\\.com\\/.*\\?.*[tif]=(\\w+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://www.liveleak.com/e/${a.dataset.uid}`,});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Loopvid',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?loopvid.appspot.com\\/#?((?:pf|kd|lv|gd|gh|db|dx|nn|cp|wu|ig|ky|mf|m2|pc|1c|pi|ni|wl|ko|mm|ic|gc)\\/[\\w\\-\\/]+(?:,[\\w\\-\\/]+)*|fc\\/\\w+\\/\\d+|https?:\\/\\/.+)/,\n      style: 'max-width: 80vw; max-height: 80vh;',\n      el(a) {\n        const el = $.el('video', {\n          controls: true,\n          preload:  'auto',\n          loop:     true\n        }\n        );\n        if (/^http/.test(a.dataset.uid)) {\n          $.add(el, $.el('source', {src: a.dataset.uid}));\n          return el;\n        }\n        const [_, host, names] = a.dataset.uid.match(/(\\w+)\\/(.*)/);\n        const types = (() => { switch (host) {\n          case 'gd': case 'wu': case 'fc': return [''];\n          case 'gc': return ['giant', 'fat', 'zippy'];\n          default: return ['.webm', '.mp4'];\n        } })();\n        for (var name of names.split(',')) {\n          for (var type of types) {\n            var base = `${name}${type}`;\n            var urls = (() => { switch (host) {\n              // list from src/common.py at http://loopvid.appspot.com/source.html\n              case 'pf': return [`https://kastden.org/_loopvid_media/pf/${base}`, `https://web.archive.org/web/2/http://a.pomf.se/${base}`];\n              case 'kd': return [`https://kastden.org/loopvid/${base}`];\n              case 'lv': return [`https://lv.kastden.org/${base}`];\n              case 'gd': return [`https://docs.google.com/uc?export=download&id=${base}`];\n              case 'gh': return [`https://googledrive.com/host/${base}`];\n              case 'db': return [`https://dl.dropboxusercontent.com/u/${base}`];\n              case 'dx': return [`https://dl.dropboxusercontent.com/${base}`];\n              case 'nn': return [`https://kastden.org/_loopvid_media/nn/${base}`];\n              case 'cp': return [`https://copy.com/${base}`];\n              case 'wu': return [`http://webmup.com/${base}/vid.webm`];\n              case 'ig': return [`https://i.imgur.com/${base}`];\n              case 'ky': return [`https://kastden.org/_loopvid_media/ky/${base}`];\n              case 'mf': return [`https://kastden.org/_loopvid_media/mf/${base}`, `https://web.archive.org/web/2/https://d.maxfile.ro/${base}`];\n              case 'm2': return [`https://kastden.org/_loopvid_media/m2/${base}`];\n              case 'pc': return [`https://kastden.org/_loopvid_media/pc/${base}`, `https://web.archive.org/web/2/http://a.pomf.cat/${base}`];\n              case '1c': return [`http://b.1339.cf/${base}`];\n              case 'pi': return [`https://kastden.org/_loopvid_media/pi/${base}`, `https://web.archive.org/web/2/https://u.pomf.is/${base}`];\n              case 'ni': return [`https://kastden.org/_loopvid_media/ni/${base}`, `https://web.archive.org/web/2/https://u.nya.is/${base}`];\n              case 'wl': return [`http://webm.land/media/${base}`];\n              case 'ko': return [`https://kordy.kastden.org/loopvid/${base}`];\n              case 'mm': return [`https://kastden.org/_loopvid_media/mm/${base}`, `https://web.archive.org/web/2/https://my.mixtape.moe/${base}`];\n              case 'ic': return [`https://media.8ch.net/file_store/${base}`];\n              case 'fc': return [`//${ImageHost.host()}/${base}.webm`];\n              case 'gc': return [`https://${type}.gfycat.com/${name}.webm`];\n            } })();\n\n            for (var url of urls) {\n              $.add(el, $.el('source', {src: url}));\n            }\n          }\n        }\n        return el;\n      }\n    }\n    , {\n      key: 'Openings.moe',\n      regExp: /^\\w+:\\/\\/openings.moe\\/\\?video=([^.&=]+)/,\n      style: 'width: 1280px; height: 720px; max-width: 80vw; max-height: 80vh;',\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://openings.moe/?video=${a.dataset.uid}`,});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Pastebin',\n      regExp: /^\\w+:\\/\\/(?:\\w+\\.)?pastebin\\.com\\/(?!u\\/)(?:[\\w.]+(?:\\/|\\?i\\=))?(\\w+)/,\n      el(a) {\n        let div;\n        return div = $.el('iframe',\n          {src: `//pastebin.com/embed_iframe.php?i=${a.dataset.uid}`});\n      }\n    }\n    , {\n      key: 'SoundCloud',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?(?:soundcloud\\.com\\/|snd\\.sc\\/)([\\w\\-\\/]+)/,\n      style: 'border: 0; width: 500px; height: 400px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://w.soundcloud.com/player/?visual=true&show_comments=false&url=https%3A%2F%2Fsoundcloud.com%2F${encodeURIComponent(a.dataset.uid)}`});\n      },\n      title: {\n        api(uid) { return `${location.protocol}//soundcloud.com/oembed?format=json&url=https%3A%2F%2Fsoundcloud.com%2F${encodeURIComponent(uid)}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'StrawPoll',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?strawpoll\\.me\\/(?:embed_\\d+\\/)?(\\d+(?:\\/r)?)/,\n      style: 'border: 0; width: 600px; height: 406px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://www.strawpoll.me/embed_1/${a.dataset.uid}`});\n      }\n    }\n    , {\n      key: 'Streamable',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?streamable\\.com\\/(\\w+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://streamable.com/o/${a.dataset.uid}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://api.streamable.com/oembed?url=https://streamable.com/${uid}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'TwitchTV',\n      regExp: /^\\w+:\\/\\/(?:www\\.|secure\\.|clips\\.|m\\.)?twitch\\.tv\\/(\\w[^#\\&\\?]*)/,\n      el(a) {\n        let url;\n        let m = a.dataset.href.match(/^\\w+:\\/\\/(?:(clips\\.)|\\w+\\.)?twitch\\.tv\\/(?:\\w+\\/)?(clip\\/)?(\\w[^#\\&\\?]*)/);\n        if (m[1] || m[2]) {\n          url = `//clips.twitch.tv/embed?clip=${m[3]}&parent=${location.hostname}`;\n        } else {\n          let time;\n          m = a.dataset.uid.match(/(\\w+)(?:\\/(?:v\\/)?(\\d+))?/);\n          url = `//player.twitch.tv/?${m[2] ? `video=v${m[2]}` : `channel=${m[1]}`}&autoplay=false&parent=${location.hostname}`;\n          if (time = a.dataset.href.match(/\\bt=(\\w+)/)) {\n            url += `&time=${time[1]}`;\n          }\n        }\n        const el = $.el('iframe',\n          {src: url});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Twitter',\n      regExp: /^\\w+:\\/\\/(?:www\\.|mobile\\.)?(?:twitter|x)\\.com\\/(\\w+\\/status\\/\\d+)/,\n      style: 'border: none; width: 550px; height: 250px; overflow: hidden; resize: both;',\n      el(a) {\n        const el = $.el('iframe');\n        $.on(el, 'load', function() {\n          return this.contentWindow.postMessage({element: 't', query: 'height'}, 'https://twitframe.com');\n        });\n        var onMessage = function(e) {\n          if ((e.source === el.contentWindow) && (e.origin === 'https://twitframe.com')) {\n            $.off(window, 'message', onMessage);\n            return (cont || el).style.height = `${+$.minmax(e.data.height, 250, 0.8 * doc.clientHeight)}px`;\n          }\n        };\n        $.on(window, 'message', onMessage);\n        el.src = `https://twitframe.com/show?url=https://twitter.com/${a.dataset.uid}`;\n        if ($.engine === 'gecko') {\n          // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=680823\n          el.style.cssText = 'border: none; width: 100%; height: 100%;';\n          var cont = $.el('div');\n          $.add(cont, el);\n          return cont;\n        } else {\n          return el;\n        }\n      }\n    }\n    , {\n      key: 'VidLii',\n      regExp:  /^\\w+:\\/\\/(?:www\\.)?vidlii\\.com\\/watch\\?v=(\\w{11})/,\n      style: 'border: none; width: 640px; height: 392px;',\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://www.vidlii.com/embed?v=${a.dataset.uid}&a=0`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Vimeo',\n      regExp:  /^\\w+:\\/\\/(?:www\\.)?vimeo\\.com\\/(\\d+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `//player.vimeo.com/video/${a.dataset.uid}?wmode=opaque`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://vimeo.com/api/oembed.json?url=https://vimeo.com/${uid}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'Vine',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?vine\\.co\\/v\\/(\\w+)/,\n      style: 'border: none; width: 500px; height: 500px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://vine.co/v/${a.dataset.uid}/card`});\n      }\n    }\n    , {\n      key: 'Vocaroo',\n      regExp: /^\\w+:\\/\\/(?:(?:www\\.|old\\.)?vocaroo\\.com|voca\\.ro)\\/((?:i\\/)?\\w+)/,\n      style: '',\n      el(a) {\n        const el = $.el('iframe');\n        el.width = 300;\n        el.height = 60;\n        el.setAttribute('frameborder', 0);\n        el.src = `https://vocaroo.com/embed/${a.dataset.uid.replace(/^i\\//, '')}?autoplay=0`;\n        return el;\n      }\n    }\n    , {\n      key: 'YouTube',\n      regExp: /^\\w+:\\/\\/(?:youtu.be\\/|[\\w.]*youtube[\\w.]*\\/.*(?:v=|\\bembed\\/|\\bv\\/|live\\/))([\\w\\-]{11})(.*)/,\n      el(a) {\n        let start = a.dataset.options.match(/\\b(?:star)?t\\=(\\w+)/);\n        if (start) { start = start[1]; }\n        if (start && !/^\\d+$/.test(start)) {\n          start += ' 0h0m0s';\n          start = (3600 * start.match(/(\\d+)h/)[1]) + (60 * start.match(/(\\d+)m/)[1]) + (1 * start.match(/(\\d+)s/)[1]);\n        }\n        const el = $.el('iframe',\n          {src: `//www.youtube.com/embed/${a.dataset.uid}?rel=0&wmode=opaque${start ? '&start=' + start : ''}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://www.youtube.com/oembed?url=https%3A//www.youtube.com/watch%3Fv%3D${uid}&format=json`; },\n        text(_) { return _.title; },\n        status(_) {\n          if (_.error) {\n            const m = _.error.match(/^(\\d*)\\s*(.*)/);\n            return [+m[1], m[2]];\n          } else {\n            return [200, 'OK'];\n          }\n        }\n      },\n      preview: {\n        url(uid) { return `https://img.youtube.com/vi/${uid}/0.jpg`; },\n        height: 360\n      }\n    }\n  ],\n\n  shouldFetchTitles() {\n    if(!Conf['Link Title']) return false;\n    if (Conf['Link Title in the catalog']) return true;\n    return g.VIEW !== 'catalog' && !(g.VIEW === 'index' && Conf['Index Mode'] === 'catalog');\n  },\n};\nexport default Embedding;\n","import Notice from \"../classes/Notice\";\nimport Config from \"../config/Config\";\nimport Filter from \"../Filtering/Filter\";\nimport ThreadHiding from \"../Filtering/ThreadHiding\";\nimport BoardConfig from \"../General/BoardConfig\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport Index from \"../General/Index\";\nimport Settings from \"../General/Settings\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport FappeTyme from \"../Images/FappeTyme\";\nimport Gallery from \"../Images/Gallery\";\nimport ImageExpand from \"../Images/ImageExpand\";\nimport Embedding from \"../Linkification/Embedding\";\nimport ThreadUpdater from \"../Monitoring/ThreadUpdater\";\nimport ThreadWatcher from \"../Monitoring/ThreadWatcher\";\nimport UnreadIndex from \"../Monitoring/UnreadIndex\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport QR from \"../Posting/QR\";\nimport QuoteThreading from \"../Quotelinks/QuoteThreading\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport CatalogLinks from \"./CatalogLinks\";\nimport ExpandThread from \"./ExpandThread\";\nimport Nav from \"./Nav\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Keybinds = {\n  init() {\n    if (!Conf['Keybinds']) { return; }\n\n    for (var hotkey in Config.hotkeys) {\n      $.sync(hotkey, Keybinds.sync);\n    }\n\n    var init = function() {\n      $.off(d, '4chanXInitFinished', init);\n      $.on(d, 'keydown', Keybinds.keydown);\n      for (var node of $$('[accesskey]')) {\n        node.removeAttribute('accesskey');\n      }\n    };\n    return $.on(d, '4chanXInitFinished', init);\n  },\n\n  sync(key, hotkey) {\n    return Conf[hotkey] = key;\n  },\n\n  keydown(e) {\n    let key, thread, threadRoot;\n    let catalog, notifications;\n    if (!(key = Keybinds.keyCode(e))) { return; }\n    const {target} = e;\n    if (['INPUT', 'TEXTAREA'].includes(target.nodeName)) {\n      if (!/(Esc|Alt|Ctrl|Meta|Shift\\+\\w{2,})/.test(key) || !!/^Alt\\+(\\d|Up|Down|Left|Right)$/.test(key)) { return; }\n    }\n    if (['index', 'thread'].includes(g.VIEW)) {\n      threadRoot = Nav.getThread();\n      thread = Get.threadFromRoot(threadRoot);\n    }\n    switch (key) {\n      // QR & Options\n      case Conf['Toggle board list']:\n        if (!Conf['Custom Board Navigation']) { return; }\n        Header.toggleBoardList();\n        break;\n      case Conf['Toggle header']:\n        Header.toggleBarVisibility();\n        break;\n      case Conf['Open empty QR']:\n        if (!QR.postingIsEnabled) { return; }\n        Keybinds.qr();\n        break;\n      case Conf['Open QR']:\n        if (!QR.postingIsEnabled || !threadRoot) { return; }\n        Keybinds.qr(threadRoot);\n        break;\n      case Conf['Open settings']:\n        Settings.open();\n        break;\n      case Conf['Close']:\n        if (Settings.dialog) {\n          Settings.close();\n        } else if ((notifications = $$('.notification')).length) {\n          for (var notification of notifications) {\n            $('.close', notification).click();\n          }\n        } else if (QR.nodes && !(QR.nodes.el.hidden || (window.getComputedStyle(QR.nodes.form).display === 'none'))) {\n          if (Conf['Persistent QR']) {\n            QR.hide();\n          } else {\n            QR.close();\n          }\n        } else if (Embedding.lastEmbed) {\n          Embedding.closeFloat();\n        } else {\n          return;\n        }\n        break;\n      case Conf['Spoiler tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('spoiler', target);\n        break;\n      case Conf['Code tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('code', target);\n        break;\n      case Conf['Eqn tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('eqn', target);\n        break;\n      case Conf['Math tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('math', target);\n        break;\n      case Conf['SJIS tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('sjis', target);\n        break;\n      case Conf['Toggle sage']:\n        if (!QR.nodes || !!QR.nodes.el.hidden) { return; }\n        Keybinds.sage();\n        break;\n      case Conf['Toggle Cooldown']:\n        if (!QR.nodes || !!QR.nodes.el.hidden || !$.hasClass(QR.nodes.fileSubmit, 'custom-cooldown')) { return; }\n        QR.toggleCustomCooldown();\n        break;\n      case Conf['Post from URL']:\n        if (!QR.postingIsEnabled) { return; }\n        QR.handleUrl('');\n        break;\n      case Conf['Add new post']:\n        if (!QR.postingIsEnabled) { return; }\n        QR.addPost();\n        break;\n      case Conf['Submit QR']:\n        if (!QR.nodes || !!QR.nodes.el.hidden) { return; }\n        if (!QR.status()) { QR.submit(); }\n        break;\n      // Index/Thread related\n      case Conf['Update']:\n        switch (g.VIEW) {\n          case 'thread':\n            if (!ThreadUpdater.enabled) { return; }\n            ThreadUpdater.update();\n            break;\n          case 'index':\n            if (!Index.enabled) { return; }\n            Index.update();\n            break;\n          default:\n            return;\n        }\n        break;\n      case Conf['Watch']:\n        if (!ThreadWatcher.enabled || !thread) { return; }\n        ThreadWatcher.toggle(thread);\n        break;\n      case Conf['Update thread watcher']:\n        if (!ThreadWatcher.enabled) { return; }\n        ThreadWatcher.buttonFetchAll();\n        break;\n      case Conf['Toggle thread watcher']:\n        if (!ThreadWatcher.enabled) { return; }\n        ThreadWatcher.toggleWatcher();\n        break;\n      case Conf['Toggle threading']:\n        if (!QuoteThreading.ready) { return; }\n        QuoteThreading.toggleThreading();\n        break;\n      case Conf['Mark thread read']:\n        if ((g.VIEW !== 'index') || !thread || !UnreadIndex.enabled) { return; }\n        UnreadIndex.markRead.call(threadRoot);\n        break;\n      // Images\n      case Conf['Expand image']:\n        if (!ImageExpand.enabled || !threadRoot) { return; }\n        var post = Get.postFromNode(Keybinds.post(threadRoot));\n        if (post.file) { ImageExpand.toggle(post); }\n        break;\n      case Conf['Expand images']:\n        if (!ImageExpand.enabled) { return; }\n        ImageExpand.cb.toggleAll();\n        break;\n      case Conf['Open Gallery']:\n        if (!Gallery.enabled) { return; }\n        Gallery.cb.toggle();\n        break;\n      case Conf['fappeTyme']:\n        if (!FappeTyme.nodes?.fappe) { return; }\n        FappeTyme.toggle('fappe');\n        break;\n      case Conf['werkTyme']:\n        if (!FappeTyme.nodes?.werk) { return; }\n        FappeTyme.toggle('werk');\n        break;\n      // Board Navigation\n      case Conf['Front page']:\n        if (Index.enabled) {\n          Index.userPageNav(1);\n        } else {\n          location.href = `/${g.BOARD}/`;\n        }\n        break;\n      case Conf['Open front page']:\n        $.open(`${location.origin}/${g.BOARD}/`);\n        break;\n      case Conf['Next page']:\n        if ((g.VIEW !== 'index') || !!g.SITE.isOnePage?.(g.BOARD)) { return; }\n        if (Index.enabled) {\n          if (!['paged', 'infinite'].includes(Conf['Index Mode'])) { return; }\n          $('.next button', Index.pagelist).click();\n        } else {\n          $(g.SITE.selectors.nav.next)?.click();\n        }\n        break;\n      case Conf['Previous page']:\n        if ((g.VIEW !== 'index') || !!g.SITE.isOnePage?.(g.BOARD)) { return; }\n        if (Index.enabled) {\n          if (!['paged', 'infinite'].includes(Conf['Index Mode'])) { return; }\n          $('.prev button', Index.pagelist).click();\n        } else {\n          $(g.SITE.selectors.nav.prev)?.click();\n        }\n        break;\n      case Conf['Search form']:\n        if (g.VIEW !== 'index') { return; }\n        var searchInput = Index.enabled ?\n          Index.searchInput\n        : g.SITE.selectors.searchBox ?\n          $(g.SITE.selectors.searchBox)\n        :\n          undefined;\n        if (!searchInput) { return; }\n        Header.scrollToIfNeeded(searchInput);\n        searchInput.focus();\n        break;\n      case Conf['Paged mode']:\n        if (!Index.enabledOn(g.BOARD)) { return; }\n        location.href = g.VIEW === 'index' ? '#paged' : `/${g.BOARD}/#paged`;\n        break;\n      case Conf['Infinite scrolling mode']:\n        if (!Index.enabledOn(g.BOARD)) { return; }\n        location.href = g.VIEW === 'index' ? '#infinite' : `/${g.BOARD}/#infinite`;\n        break;\n      case Conf['All pages mode']:\n        if (!Index.enabledOn(g.BOARD)) { return; }\n        location.href = g.VIEW === 'index' ? '#all-pages' : `/${g.BOARD}/#all-pages`;\n        break;\n      case Conf['Open catalog']:\n        if (!(catalog = CatalogLinks.catalog())) { return; }\n        location.href = catalog;\n        break;\n      case Conf['Cycle sort type']:\n        if (!Index.enabled) { return; }\n        Index.cycleSortType();\n        break;\n      // Thread Navigation\n      case Conf['Next thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Nav.scroll(+1);\n        break;\n      case Conf['Previous thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Nav.scroll(-1);\n        break;\n      case Conf['Expand thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        ExpandThread.toggle(thread);\n        // Keep thread from moving off screen when contracted.\n        Header.scrollTo(threadRoot);\n        break;\n      case Conf['Open thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Keybinds.open(thread);\n        break;\n      case Conf['Open thread tab']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Keybinds.open(thread, true);\n        break;\n      // Reply Navigation\n      case Conf['Next reply']:\n        if (!threadRoot) { return; }\n        Keybinds.hl(+1, threadRoot);\n        break;\n      case Conf['Previous reply']:\n        if (!threadRoot) { return; }\n        Keybinds.hl(-1, threadRoot);\n        break;\n      case Conf['Deselect reply']:\n        if (!threadRoot) { return; }\n        Keybinds.hl(0, threadRoot);\n        break;\n      case Conf['Hide']:\n        if (!thread || !ThreadHiding.db) { return; }\n        Header.scrollTo(threadRoot);\n        ThreadHiding.toggle(thread);\n        break;\n      case Conf['Quick Filter MD5']:\n        if (!threadRoot) { return; }\n        post = Keybinds.post(threadRoot);\n        Keybinds.hl(+1, threadRoot);\n        Filter.quickFilterMD5.call(post, e);\n        break;\n      case Conf['Previous Post Quoting You']:\n        if (!threadRoot || !QuoteYou.db) { return; }\n        QuoteYou.cb.seek('preceding');\n        break;\n      case Conf['Next Post Quoting You']:\n        if (!threadRoot || !QuoteYou.db) { return; }\n        QuoteYou.cb.seek('following');\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n    return e.stopPropagation();\n  },\n\n  keyCode(e) {\n    let key = (() => { let kc;\n    switch ((kc = e.keyCode)) {\n      case 8: // return\n        return '';\n      case 13:\n        return 'Enter';\n      case 27:\n        return 'Esc';\n      case 32:\n        return 'Space';\n      case 37:\n        return 'Left';\n      case 38:\n        return 'Up';\n      case 39:\n        return 'Right';\n      case 40:\n        return 'Down';\n      case 188:\n        return 'Comma';\n      case 190:\n        return 'Period';\n      case 191:\n        return 'Slash';\n      case 59: case 186:\n        return 'Semicolon';\n      default:\n        if ((48 <= kc && kc <= 57) || (65 <= kc && kc <= 90)) { // 0-9, A-Z\n          return String.fromCharCode(kc).toLowerCase();\n        } else if (96 <= kc && kc <= 105) { // numpad 0-9\n          return String.fromCharCode(kc - 48).toLowerCase();\n        } else {\n          return null;\n        }\n    } })();\n    if (key) {\n      if (e.altKey) {   key = 'Alt+'   + key; }\n      if (e.ctrlKey) {  key = 'Ctrl+'  + key; }\n      if (e.metaKey) {  key = 'Meta+'  + key; }\n      if (e.shiftKey) { key = 'Shift+' + key; }\n    }\n    return key;\n  },\n\n  post(thread) {\n    const s = g.SITE.selectors;\n    return (\n      $(`${s.postContainer}${s.highlightable.reply}.${g.SITE.classes.highlight}`, thread) ||\n      $(`${g.SITE.isOPContainerThread ? s.thread : s.postContainer}${s.highlightable.op}`, thread)\n    );\n  },\n\n  qr(thread) {\n    QR.open();\n    if (thread != null) {\n      QR.quote.call(Keybinds.post(thread));\n    }\n    return QR.nodes.com.focus();\n  },\n\n  tags(tag, ta) {\n    BoardConfig.ready(function() {\n      const {config} = g.BOARD;\n      const supported = (() => { switch (tag) {\n        case 'spoiler':     return !!config.spoilers;\n        case 'code':        return !!config.code_tags;\n        case 'math': case 'eqn': return !!config.math_tags;\n        case 'sjis':        return !!config.sjis_tags;\n      } })();\n      if (!supported) { return new Notice('warning', `[${tag}] tags are not supported on /${g.BOARD}/.`, 20); }\n    });\n\n    const {\n      value\n    } = ta;\n    const selStart = ta.selectionStart;\n    const selEnd   = ta.selectionEnd;\n\n    ta.value =\n      value.slice(0, selStart) +\n      `[${tag}]` + value.slice(selStart, selEnd) + `[/${tag}]` +\n      value.slice(selEnd);\n\n    // Move the caret to the end of the selection.\n    const range = (`[${tag}]`).length + selEnd;\n    ta.setSelectionRange(range, range);\n\n    // Fire the 'input' event\n    return $.event('input', null, ta);\n  },\n\n  sage() {\n    const isSage  = /sage/i.test(QR.nodes.email.value);\n    return QR.nodes.email.value = isSage ?\n      \"\"\n    : \"sage\";\n  },\n\n  open(thread, tab) {\n    if (g.VIEW !== 'index') { return; }\n    const url = Get.url('thread', thread);\n    if (tab) {\n      return $.open(url);\n    } else {\n      return location.href = url;\n    }\n  },\n\n  hl(delta, thread) {\n    const replySelector = `${g.SITE.selectors.postContainer}${g.SITE.selectors.highlightable.reply}`;\n    const {highlight} = g.SITE.classes;\n\n    const postEl = $(`${replySelector}.${highlight}`, thread);\n\n    if (!delta) {\n      if (postEl) { $.rmClass(postEl, highlight); }\n      return;\n    }\n\n    if (postEl) {\n      const {height} = postEl.getBoundingClientRect();\n      if ((Header.getTopOf(postEl) >= -height) && (Header.getBottomOf(postEl) >= -height)) { // We're at least partially visible\n        let next;\n        const {root} = Get.postFromNode(postEl).nodes;\n        const axis = delta === +1 ?\n          'following'\n        :\n          'preceding';\n        if (!(next = $.x(`${axis}-sibling::${g.SITE.xpath.replyContainer}[not(@hidden) and not(child::div[@class='stub'])][1]`, root))) { return; }\n        if (!next.matches(replySelector)) { next = $(replySelector, next); }\n        Header.scrollToIfNeeded(next, delta === +1);\n        $.addClass(next, highlight);\n        $.rmClass(postEl, highlight);\n        return;\n      }\n      $.rmClass(postEl, highlight);\n    }\n\n    const replies = $$(replySelector, thread);\n    if (delta === -1) { replies.reverse(); }\n    for (var reply of replies) {\n      if (((delta === +1) && (Header.getTopOf(reply) > 0)) || ((delta === -1) && (Header.getBottomOf(reply) > 0))) {\n        $.addClass(reply, highlight);\n        return;\n      }\n    }\n  }\n};\nexport default Keybinds;\n","import $ from \"../platform/$\";\nimport CaptchaReplace from \"./Captcha.replace\";\nimport CaptchaT from \"./Captcha.t\";\nimport meta from '../../package.json';\nimport Main from \"../main/Main\";\nimport Keybinds from \"../Miscellaneous/Keybinds\";\nimport $$ from \"../platform/$$\";\nimport QR from \"./QR\";\nimport { Conf, d, doc } from \"../globals/globals\";\nimport { MINUTE, SECOND } from \"../platform/helpers\";\n\nconst Captcha = {\n  Cache: {\n    init() {\n      $.on(d, 'SaveCaptcha', e => {\n        return this.saveAPI(e.detail);\n      });\n      return $.on(d, 'NoCaptcha', e => {\n        return this.noCaptcha(e.detail);\n      });\n    },\n\n    captchas: [],\n\n    getCount() {\n      return this.captchas.length;\n    },\n\n    neededRaw() {\n      return !(\n        this.haveCookie() || this.captchas.length || QR.req || this.submitCB\n      ) && (\n          (QR.posts.length > 1) || Conf['Auto-load captcha'] || !QR.posts[0].isOnlyQuotes() || QR.posts[0].file\n        );\n    },\n\n    needed() {\n      return this.neededRaw() && $.event('LoadCaptcha');\n    },\n\n    prerequest() {\n      if (!Conf['Prerequest Captcha']) { return; }\n      // Post count temporarily off by 1 when called from QR.post.rm, QR.close, or QR.submit\n      return $.queueTask(() => {\n        if (\n          !this.prerequested &&\n          this.neededRaw() &&\n          !$.event('LoadCaptcha') &&\n          !QR.captcha.occupied() &&\n          (QR.cooldown.seconds <= 60) &&\n          (QR.selected === QR.posts[QR.posts.length - 1]) &&\n          !QR.selected.isOnlyQuotes()\n        ) {\n          const isReply = (QR.selected.thread !== 'new');\n          if (!$.event('RequestCaptcha', { isReply })) {\n            this.prerequested = true;\n            this.submitCB = captcha => {\n              if (captcha) { return this.save(captcha); }\n            };\n            return this.updateCount();\n          }\n        }\n      });\n    },\n\n    haveCookie() {\n      return /\\b_ct=/.test(d.cookie) && (QR.posts[0].thread !== 'new');\n    },\n\n    getOne() {\n      let captcha;\n      delete this.prerequested;\n      this.clear();\n      if (captcha = this.captchas.shift()) {\n        this.count();\n        return captcha;\n      } else {\n        return null;\n      }\n    },\n\n    request(isReply) {\n      if (!this.submitCB) {\n        if ($.event('RequestCaptcha', { isReply })) { return; }\n      }\n      return cb => {\n        this.submitCB = cb;\n        return this.updateCount();\n      };\n    },\n\n    abort() {\n      if (this.submitCB) {\n        delete this.submitCB;\n        $.event('AbortCaptcha');\n        return this.updateCount();\n      }\n    },\n\n    saveAPI(captcha) {\n      let cb;\n      if (cb = this.submitCB) {\n        delete this.submitCB;\n        cb(captcha);\n        return this.updateCount();\n      } else {\n        return this.save(captcha);\n      }\n    },\n\n    noCaptcha(detail) {\n      let cb;\n      if (cb = this.submitCB) {\n        if (!this.haveCookie() || detail?.error) {\n          QR.error(detail?.error || 'Failed to retrieve captcha.');\n          QR.captcha.setup(d.activeElement === QR.nodes.status);\n        }\n        delete this.submitCB;\n        cb();\n        return this.updateCount();\n      }\n    },\n\n    save(captcha) {\n      let cb;\n      if (cb = this.submitCB) {\n        this.abort();\n        cb(captcha);\n        return;\n      }\n      this.captchas.push(captcha);\n      this.captchas.sort((a, b) => a.timeout - b.timeout);\n      return this.count();\n    },\n\n    clear() {\n      if (this.captchas.length) {\n        let i;\n        const now = Date.now();\n        for (i = 0; i < this.captchas.length; i++) {\n          var captcha = this.captchas[i];\n          if (captcha.timeout > now) { break; }\n        }\n        if (i) {\n          this.captchas = this.captchas.slice(i);\n          return this.count();\n        }\n      }\n    },\n\n    count() {\n      clearTimeout(this.timer);\n      if (this.captchas.length) {\n        this.timer = setTimeout(this.clear.bind(this), this.captchas[0].timeout - Date.now());\n      }\n      return this.updateCount();\n    },\n\n    updateCount() {\n      return $.event('CaptchaCount', this.captchas.length);\n    }\n  }, Replace: CaptchaReplace, t: CaptchaT, v2: {\n    lifetime: 2 * MINUTE,\n\n    init() {\n      if (d.cookie.indexOf('pass_enabled=1') >= 0) { return; }\n      if (!(this.isEnabled = !!$('#g-recaptcha, #captcha-forced-noscript') || !$.id('postForm'))) { return; }\n\n      if (this.noscript = Conf['Force Noscript Captcha'] || !Main.jsEnabled) {\n        $.addClass(QR.nodes.el, 'noscript-captcha');\n      }\n\n      Captcha.cache.init();\n      $.on(d, 'CaptchaCount', this.count.bind(this));\n\n      const root = $.el('div', { className: 'captcha-root' });\n      $.extend(root, {\n        innerHTML:\n          '<div class=\"captcha-counter\"><a href=\"javascript:;\"></a></div>'\n      }\n      );\n      const counter = $('.captcha-counter > a', root);\n      this.nodes = { root, counter };\n      this.count();\n      $.addClass(QR.nodes.el, 'has-captcha', 'captcha-v2');\n      $.after(QR.nodes.com.parentNode, root);\n\n      $.on(counter, 'click', this.toggle.bind(this));\n      $.on(counter, 'keydown', e => {\n        if (Keybinds.keyCode(e) !== 'Space') { return; }\n        this.toggle();\n        e.preventDefault();\n        return e.stopPropagation();\n      });\n      return $.on(window, 'captcha:success', () => {\n        // XXX Greasemonkey 1.x workaround to gain access to GM_* functions.\n        return $.queueTask(() => this.save(false));\n      });\n    },\n\n    timeouts: {},\n    prevNeeded: 0,\n\n    noscriptURL() {\n      let lang;\n      let url = `https://www.google.com/recaptcha/api/fallback?k=${meta.recaptchaKey}`;\n      if (lang = Conf['captchaLanguage'].trim()) {\n        url += `&hl=${encodeURIComponent(lang)}`;\n      }\n      return url;\n    },\n\n    moreNeeded() {\n      // Post count temporarily off by 1 when called from QR.post.rm, QR.close, or QR.submit\n      return $.queueTask(() => {\n        const needed = Captcha.cache.needed();\n        if (needed && !this.prevNeeded) {\n          this.setup(QR.cooldown.auto && (d.activeElement === QR.nodes.status));\n        }\n        return this.prevNeeded = needed;\n      });\n    },\n\n    toggle() {\n      if (this.nodes.container && !this.timeouts.destroy) {\n        return this.destroy();\n      } else {\n        return this.setup(true, true);\n      }\n    },\n\n    setup(focus, force) {\n      if (!this.isEnabled || (!Captcha.cache.needed() && !force)) { return; }\n\n      if (focus) {\n        $.addClass(QR.nodes.el, 'focus');\n        this.nodes.counter.focus();\n      }\n\n      if (this.timeouts.destroy) {\n        clearTimeout(this.timeouts.destroy);\n        delete this.timeouts.destroy;\n        return this.reload();\n      }\n\n      if (this.nodes.container) {\n        // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=1226835\n        $.queueTask(() => {\n          let iframe;\n          if (this.nodes.container && (d.activeElement === this.nodes.counter) && (iframe = $('iframe[src^=\"https://www.google.com/recaptcha/\"]', this.nodes.container))) {\n            iframe.focus();\n            return QR.focus();\n          }\n        }); // Event handler not fired in Firefox\n        return;\n      }\n\n      this.nodes.container = $.el('div', { className: 'captcha-container' });\n      $.prepend(this.nodes.root, this.nodes.container);\n      new MutationObserver(this.afterSetup.bind(this)).observe(this.nodes.container, {\n        childList: true,\n        subtree: true\n      }\n      );\n\n      if (this.noscript) {\n        return this.setupNoscript();\n      } else {\n        return this.setupJS();\n      }\n    },\n\n    setupNoscript() {\n      const iframe = $.el('iframe', {\n        id: 'qr-captcha-iframe',\n        scrolling: 'no',\n        src: this.noscriptURL()\n      }\n      );\n      const div = $.el('div');\n      const textarea = $.el('textarea');\n      $.add(div, textarea);\n      return $.add(this.nodes.container, [iframe, div]);\n    },\n\n    setupJS() {\n      return $.global(function () {\n        const render = function () {\n          const { classList } = document.documentElement;\n          const container = document.querySelector('#qr .captcha-container');\n          return container.dataset.widgetID = window.grecaptcha.render(container, {\n            sitekey: meta.recaptchaKey,\n            theme: classList.contains('tomorrow') || classList.contains('spooky') || classList.contains('dark-captcha') ? 'dark' : 'light',\n            callback(response) {\n              return window.dispatchEvent(new CustomEvent('captcha:success', { detail: response }));\n            }\n          }\n          );\n        };\n        if (window.grecaptcha) {\n          return render();\n        } else {\n          const cbNative = window.onRecaptchaLoaded;\n          window.onRecaptchaLoaded = function () {\n            render();\n            return cbNative();\n          };\n          if (!document.head.querySelector('script[src^=\"https://www.google.com/recaptcha/api.js\"]')) {\n            const script = document.createElement('script');\n            script.src = 'https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoaded&render=explicit';\n            return document.head.appendChild(script);\n          }\n        }\n      });\n    },\n\n    afterSetup(mutations) {\n      for (var mutation of mutations) {\n        for (var node of mutation.addedNodes) {\n          var iframe, textarea;\n          if (iframe = $.x('./descendant-or-self::iframe[starts-with(@src, \"https://www.google.com/recaptcha/\")]', node)) { this.setupIFrame(iframe); }\n          if (textarea = $.x('./descendant-or-self::textarea', node)) { this.setupTextArea(textarea); }\n        }\n      }\n    },\n\n    setupIFrame(iframe) {\n      let needle;\n      if (!doc.contains(iframe)) { return; }\n      Captcha.replace.iframe(iframe);\n      $.addClass(QR.nodes.el, 'captcha-open');\n      this.fixQRPosition();\n      $.on(iframe, 'load', this.fixQRPosition);\n      if (d.activeElement === this.nodes.counter) { iframe.focus(); }\n      // XXX Make sure scroll on space prevention (see src/css/style.css) doesn't cause scrolling of div\n      if (['blink', 'edge'].includes($.engine) && (needle = iframe.parentNode, $$('#qr .captcha-container > div > div:first-of-type').includes(needle))) {\n        return $.on(iframe.parentNode, 'scroll', function () { return this.scrollTop = 0; });\n      }\n    },\n\n    fixQRPosition() {\n      if (QR.nodes.el.getBoundingClientRect().bottom > doc.clientHeight) {\n        QR.nodes.el.style.top = '';\n        return QR.nodes.el.style.bottom = '0px';\n      }\n    },\n\n    setupTextArea(textarea) {\n      return $.one(textarea, 'input', () => this.save(true));\n    },\n\n    destroy() {\n      if (!this.isEnabled) { return; }\n      delete this.timeouts.destroy;\n      $.rmClass(QR.nodes.el, 'captcha-open');\n      if (this.nodes.container) {\n        $.global(function () {\n          const container = document.querySelector('#qr .captcha-container');\n          return window.grecaptcha.reset(container.dataset.widgetID);\n        });\n        $.rm(this.nodes.container);\n        return delete this.nodes.container;\n      }\n    },\n\n    getOne(isReply) {\n      return Captcha.cache.getOne(isReply);\n    },\n\n    save(pasted, token) {\n      Captcha.cache.save({\n        response: token || $('textarea', this.nodes.container).value,\n        timeout: Date.now() + this.lifetime\n      });\n\n      const focus = (d.activeElement?.nodeName === 'IFRAME') && /https?:\\/\\/www\\.google\\.com\\/recaptcha\\//.test(d.activeElement.src);\n      if (Captcha.cache.needed()) {\n        if (focus) {\n          if (QR.cooldown.auto || Conf['Post on Captcha Completion']) {\n            this.nodes.counter.focus();\n          } else {\n            QR.nodes.status.focus();\n          }\n        }\n        this.reload();\n      } else {\n        if (pasted) {\n          this.destroy();\n        } else {\n          if (this.timeouts.destroy == null) { this.timeouts.destroy = setTimeout(this.destroy.bind(this), 3 * SECOND); }\n        }\n        if (focus) { QR.nodes.status.focus(); }\n      }\n\n      if (Conf['Post on Captcha Completion'] && !QR.cooldown.auto) { return QR.submit(); }\n    },\n\n    count() {\n      const count = Captcha.cache.getCount();\n      const loading = Captcha.cache.submitCB ? '...' : '';\n      this.nodes.counter.textContent = `Captchas: ${count}${loading}`;\n      return this.moreNeeded();\n    },\n\n    reload() {\n      if ($('iframe[src^=\"https://www.google.com/recaptcha/api/fallback?\"]', this.nodes.container)) {\n        this.destroy();\n        return this.setup(false, true);\n      } else {\n        return $.global(function () {\n          const container = document.querySelector('#qr .captcha-container');\n          return window.grecaptcha.reset(container.dataset.widgetID);\n        });\n      }\n    },\n\n    occupied() {\n      return !!this.nodes.container && !this.timeouts.destroy;\n    }\n  }\n};\nexport default Captcha;\n",null,"import QR from \"../Posting/QR\";\nimport $ from \"./$\";\nimport { dict, platform } from \"./helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nlet eventPageRequest;\nif (platform === 'crx') {\n  eventPageRequest = (function () {\n    const callbacks = [];\n    chrome.runtime.onMessage.addListener(function(response) {\n      callbacks[response.id](response.data);\n      return delete callbacks[response.id];});\n    return (params, cb) => chrome.runtime.sendMessage(params, id => callbacks[id] = cb);\n  })();\n}\nvar CrossOrigin = {\n  binary(url, cb, headers = dict()) {\n    // XXX https://forums.lanik.us/viewtopic.php?f=64&t=24173&p=78310\n    url = url.replace(/^((?:https?:)?\\/\\/(?:\\w+\\.)?(?:4chan|4channel|4cdn)\\.org)\\/adv\\//, '$1//adv/');\n    if (platform === 'crx') {\n    eventPageRequest({type: 'ajax', url, headers, responseType: 'arraybuffer'}, function({response, responseHeaderString}) {\n      if (response) { response = new Uint8Array(response); }\n      return cb(response, responseHeaderString);\n    });\n    } else {\n      const fallback = function() {\n        return $.ajax(url, {\n          headers,\n          responseType: 'arraybuffer',\n          onloadend() {\n            if (this.status && this.response) {\n              return cb(new Uint8Array(this.response), this.getAllResponseHeaders());\n            } else {\n              return cb(null);\n            }\n          }\n        });\n      };\n      if ((typeof window.GM_xmlhttpRequest === 'undefined' || window.GM_xmlhttpRequest === null)) {\n        fallback();\n        return;\n      }\n      const gmOptions = {\n        method: \"GET\",\n        url,\n        headers,\n        responseType: 'arraybuffer',\n        overrideMimeType: 'text/plain; charset=x-user-defined',\n        onload(xhr) {\n          let data;\n          if (xhr.response instanceof ArrayBuffer) {\n            data = new Uint8Array(xhr.response);\n          } else {\n            const r = xhr.responseText;\n            data = new Uint8Array(r.length);\n            let i = 0;\n            while (i < r.length) {\n              data[i] = r.charCodeAt(i);\n              i++;\n            }\n          }\n          return cb(data, xhr.responseHeaders);\n        },\n        onerror() {\n          return cb(null);\n        },\n        onabort() {\n          return cb(null);\n        }\n      };\n      try {\n        return (GM?.xmlHttpRequest || GM_xmlhttpRequest)(gmOptions);\n      } catch (error) {\n        return fallback();\n      }\n    }\n  },\n\n  file(url, cb) {\n    return CrossOrigin.binary(url, function(data, headers) {\n      if (data == null) { return cb(null); }\n      let name = url.match(/([^\\/?#]+)\\/*(?:$|[?#])/)?.[1];\n      const contentType        = headers.match(/Content-Type:\\s*(.*)/i)?.[1];\n      const contentDisposition = headers.match(/Content-Disposition:\\s*(.*)/i)?.[1];\n      let mime = contentType?.match(/[^;]*/)[0] || 'application/octet-stream';\n      const match =\n        contentDisposition?.match(/\\bfilename\\s*=\\s*\"((\\\\\"|[^\"])+)\"/i)?.[1] ||\n        contentType?.match(/\\bname\\s*=\\s*\"((\\\\\"|[^\"])+)\"/i)?.[1];\n      if (match) {\n        name = match.replace(/\\\\\"/g, '\"');\n      }\n      if (/^text\\/plain;\\s*charset=x-user-defined$/i.test(mime)) {\n        // In JS Blocker (Safari) content type comes back as 'text/plain; charset=x-user-defined'; guess from filename instead.\n        mime = $.getOwn(QR.typeFromExtension, name.match(/[^.]*$/)[0].toLowerCase()) || 'application/octet-stream';\n      }\n      const blob = new Blob([data], {type: mime});\n      blob.name = name;\n      return cb(blob);\n    });\n  },\n\n  Request: (function() {\n    const Request = class Request {\n      static initClass() {\n        this.prototype.status = 0;\n        this.prototype.statusText = '';\n        this.prototype.response = null;\n        this.prototype.responseHeaderString = null;\n      }\n      getResponseHeader(headerName) {\n        if ((this.responseHeaders == null) && (this.responseHeaderString != null)) {\n          this.responseHeaders = dict();\n          for (var header of this.responseHeaderString.split('\\r\\n')) {\n            var i;\n            if ((i = header.indexOf(':')) >= 0) {\n              var key = header.slice(0, i).trim().toLowerCase();\n              var val = header.slice(i+1).trim();\n              this.responseHeaders[key] = val;\n            }\n          }\n        }\n        return this.responseHeaders?.[headerName.toLowerCase()] ?? null;\n      }\n      abort() {}\n      onloadend() {}\n    };\n    Request.initClass();\n    return Request;\n  })(),\n\n  // Attempts to fetch `url` using cross-origin privileges, if available.\n  // Interface is a subset of that of $.ajax.\n  // Options:\n  //   `onloadend` - called with the returned object as `this` on success or error/abort/timeout.\n  //   `timeout` - time limit for request\n  //   `responseType` - expected response type, 'json' by default; 'json' and 'text' supported\n  //   `headers` - request headers\n  // Returned object properties:\n  //   `status` - HTTP status (0 if connection not successful)\n  //   `statusText` - HTTP status text\n  //   `response` - decoded response body\n  //   `abort` - function for aborting the request (silently fails on some platforms)\n  //   `getResponseHeader` - function for reading response headers\n  ajax(url, options={}) {\n    let gmReq;\n    let {onloadend, timeout, responseType, headers} = options;\n    if (responseType == null) { responseType = 'json'; }\n\n    if ((window.GM?.xmlHttpRequest == null) && (typeof window.GM_xmlhttpRequest === 'undefined' || window.GM_xmlhttpRequest === null)) {\n      return $.ajax(url, options);\n    }\n\n    const req = new CrossOrigin.Request();\n    req.onloadend = onloadend;\n\n    if (platform === 'userscript') {\n      const gmOptions = {\n        method: 'GET',\n        url,\n        headers,\n        timeout,\n        onload(xhr) {\n          try {\n            const response = (() => { switch (responseType) {\n              case 'json':\n                if (xhr.responseText) { return JSON.parse(xhr.responseText); } else { return null; }\n              default:\n                return xhr.responseText;\n            } })();\n            $.extend(req, {\n              response,\n              status: xhr.status,\n              statusText: xhr.statusText,\n              responseHeaderString: xhr.responseHeaders\n            });\n          } catch (error) {}\n          return req.onloadend();\n        },\n        onerror() { return req.onloadend(); },\n        onabort() { return req.onloadend(); },\n        ontimeout() { return req.onloadend(); }\n      };\n      try {\n        gmReq = (GM?.xmlHttpRequest || GM_xmlhttpRequest)(gmOptions);\n      } catch (error) {\n        return $.ajax(url, options);\n      }\n\n      if (gmReq && (typeof gmReq.abort === 'function')) {\n        req.abort = function() {\n          try {\n            return gmReq.abort();\n          } catch (error1) {}\n        };\n      }\n    } else {\n      eventPageRequest({type: 'ajax', url, responseType, headers, timeout}, function(result) {\n        if (result.status) {\n          $.extend(req, result);\n        }\n        return req.onloadend();\n      });\n    }\n\n    return req;\n  },\n\n  cache(url, cb) {\n    return $.cache(url, cb,\n      {ajax: CrossOrigin.ajax});\n  },\n\n  permission(cb, cbFail, origins) {\n    if (platform === 'crx') {\n      return eventPageRequest({type: 'permission', origins}, function(result) {\n        if (result) {\n          return cb();\n        } else {\n          return cbFail();\n        }\n      });\n    }\n    return cb();\n  },\n};\nexport default CrossOrigin;\n",null,"import { Conf, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Get = {\n  url(type, IDs, ...args) {\n    let f, site;\n    if ((site = g.sites[IDs.siteID]) && (f = $.getOwn(site.urls, type))) {\n      return f(IDs, ...args);\n    } else {\n      return undefined;\n    }\n  },\n  threadExcerpt(thread) {\n    const {OP} = thread;\n    const excerpt = (`/${decodeURIComponent(thread.board.ID)}/ - `) + (\n      OP.info.subject?.trim() ||\n      OP.commentDisplay().replace(/\\n+/g, ' // ') ||\n      OP.file?.name ||\n      `No.${OP}`);\n    if (excerpt.length > 73) { return `${excerpt.slice(0, 70)}...`; }\n    return excerpt;\n  },\n  threadFromRoot(root) {\n    if (root == null) { return null; }\n    const {board} = root.dataset;\n    return g.threads.get(`${board ? encodeURIComponent(board) : g.BOARD.ID}.${root.id.match(/\\d*$/)[0]}`);\n  },\n  threadFromNode(node) {\n    return Get.threadFromRoot($.x(`ancestor-or-self::${g.SITE.xpath.thread}`, node));\n  },\n  postFromRoot(root) {\n    if (root == null) { return null; }\n    const post  = g.posts.get(root.dataset.fullID);\n    const index = root.dataset.clone;\n    if (index) { return post.clones[+index]; } else { return post; }\n  },\n  postFromNode(root) {\n    return Get.postFromRoot($.x(`ancestor-or-self::${g.SITE.xpath.postContainer}[1]`, root));\n  },\n  postDataFromLink(link) {\n    let boardID, postID, threadID;\n    if (link.dataset.postID) { // resurrected quote\n      ({boardID, threadID, postID} = link.dataset);\n      if (!threadID) { threadID = 0; }\n    } else {\n      const match = link.href.match(g.SITE.regexp.quotelink);\n      [boardID, threadID, postID] = match.slice(1);\n      if (!postID) { postID = threadID; }\n    }\n    return {\n      boardID,\n      threadID: +threadID,\n      postID:   +postID\n    };\n  },\n  allQuotelinksLinkingTo(post) {\n    // Get quotelinks & backlinks linking to the given post.\n    const quotelinks = [];\n    const {posts} = g;\n    const {fullID} = post;\n    const handleQuotes = function(qPost, type) {\n      quotelinks.push(...(qPost.nodes[type] || []));\n      for (var clone of qPost.clones) { quotelinks.push(...(clone.nodes[type] || [])); }\n    };\n    // First:\n    //   In every posts,\n    //   if it did quote this post,\n    //   get all their backlinks.\n    posts.forEach(function(qPost) {\n      if (qPost.quotes.includes(fullID)) {\n        return handleQuotes(qPost, 'quotelinks');\n      }\n    });\n\n    // Second:\n    //   If we have quote backlinks:\n    //   in all posts this post quoted\n    //   and their clones,\n    //   get all of their backlinks.\n    if (Conf['Quote Backlinks']) {\n      for (var quote of post.quotes) { var qPost;\n      if ((qPost = posts.get(quote))) { handleQuotes(qPost, 'backlinks'); } }\n    }\n\n    // Third:\n    //   Filter out irrelevant quotelinks.\n    return quotelinks.filter(function(quotelink) {\n      const {boardID, postID} = Get.postDataFromLink(quotelink);\n      return (boardID === post.board.ID) && (postID === post.ID);\n    });\n  }\n};\nexport default Get;\n",null,"import { Conf, doc, g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport SW from \"./SW\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Site = {\n  defaultProperties: {\n    '4chan.org':    {software: 'yotsuba'},\n    '4channel.org': {canonical: '4chan.org'},\n    '4cdn.org':     {canonical: '4chan.org'},\n    'notso.smuglo.li': {canonical: 'smuglo.li'},\n    'smugloli.net':    {canonical: 'smuglo.li'},\n    'smug.nepu.moe':   {canonical: 'smuglo.li'}\n  },\n\n  init(cb) {\n    $.extend(Conf['siteProperties'], Site.defaultProperties);\n    let hostname = Site.resolve();\n    if (hostname && $.hasOwn(SW, Conf['siteProperties'][hostname].software)) {\n      this.set(hostname);\n      cb();\n    }\n    return $.onExists(doc, 'body', () => {\n      for (var software in SW) {\n        var changes;\n        if (changes = SW[software].detect?.()) {\n          changes.software = software;\n          hostname = location.hostname.replace(/^www\\./, '');\n          var properties = (Conf['siteProperties'][hostname] || (Conf['siteProperties'][hostname] = dict()));\n          var changed = 0;\n          for (var key in changes) {\n            if (properties[key] !== changes[key]) {\n              properties[key] = changes[key];\n              changed++;\n            }\n          }\n          if (changed) {\n            $.set('siteProperties', Conf['siteProperties']);\n          }\n          if (!g.SITE) {\n            this.set(hostname);\n            cb();\n          }\n          return;\n        }\n      }\n    });\n  },\n\n  resolve(url=location) {\n    let {hostname} = url;\n    while (hostname && !$.hasOwn(Conf['siteProperties'], hostname)) {\n      hostname = hostname.replace(/^[^.]*\\.?/, '');\n    }\n    if (hostname) {\n      let canonical;\n      if (canonical = Conf['siteProperties'][hostname].canonical) { hostname = canonical; }\n    }\n    return hostname;\n  },\n\n  parseURL(url) {\n    const siteID = Site.resolve(url);\n    return Main.parseURL(g.sites[siteID], url);\n  },\n\n  set(hostname) {\n    for (var ID in Conf['siteProperties']) {\n      var site;\n      var properties = Conf['siteProperties'][ID];\n      if (properties.canonical) { continue; }\n      var {\n        software\n      } = properties;\n      if (!software || !$.hasOwn(SW, software)) { continue; }\n      g.sites[ID] = (site = Object.create(SW[software]));\n      $.extend(site, {ID, siteID: ID, properties, software});\n    }\n    return g.SITE = g.sites[hostname];\n  }\n};\nexport default Site;\n","import Callbacks from \"../classes/Callbacks\";\nimport Filter from \"../Filtering/Filter\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport meta from '../../package.json';\nimport Index from \"../General/Index\";\nimport Site from \"../site/Site\";\nimport Header from \"../General/Header\";\nimport { g, Conf } from \"../globals/globals\";\nimport UI from \"../General/UI\";\nimport Get from \"../General/Get\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar CatalogLinks = {\n  init() {\n    if ((g.SITE.software === 'yotsuba') && (Conf['External Catalog'] || Conf['JSON Index']) && !(Conf['JSON Index'] && (g.VIEW === 'index'))) {\n      const selector = (() => { switch (g.VIEW) {\n        case 'thread': case 'archive': return '.navLinks.desktop > a';\n        case 'catalog':           return '.navLinks > :first-child > a';\n        case 'index':             return '#ctrl-top > a, .cataloglink > a';\n      } })();\n      $.ready(function() {\n        for (var link of $$(selector)) {\n          var catalogURL;\n          switch (link.pathname.replace(/\\/+/g, '/')) {\n            case `/${g.BOARD}/`:\n              if (Conf['JSON Index']) { link.textContent = 'Index'; }\n              link.href = CatalogLinks.index();\n              break;\n            case `/${g.BOARD}/catalog`:\n              link.href = CatalogLinks.catalog();\n              break;\n          }\n          if ((g.VIEW === 'catalog') && ((catalogURL = CatalogLinks.catalog()) !== g.SITE.urls.catalog?.(g.BOARD))) {\n            var catalogLink = link.parentNode.cloneNode(true);\n            var link2 = catalogLink.firstElementChild;\n            link2.href = catalogURL;\n            link2.textContent = link2.hostname === location.hostname ? `${meta.name} Catalog` : 'External Catalog';\n            $.after(link.parentNode, [$.tn(' '), catalogLink]);\n          }\n        }\n      });\n    }\n\n    if ((g.SITE.software === 'yotsuba') && Conf['JSON Index'] && Conf[`Use ${meta.name} Catalog`]) {\n      Callbacks.Post.push({\n        name: 'Catalog Link Rewrite',\n        cb:   this.node\n      });\n    }\n\n    if (this.enabled = Conf['Catalog Links']) {\n      let el;\n      CatalogLinks.el = (el = UI.checkbox('Header catalog links', 'Catalog Links'));\n      el.id = 'toggleCatalog';\n      const input = $('input', el);\n      $.on(input, 'change', this.toggle);\n      $.sync('Header catalog links', CatalogLinks.set);\n      return Header.menu.addEntry({\n        el,\n        order: 95\n      });\n    }\n  },\n\n  node() {\n    for (var a of $$('a', this.nodes.comment)) {\n      var m;\n      if (m = a.href.match(/^https?:\\/\\/(boards\\.4chan(?:nel)?\\.org\\/[^\\/]+)\\/catalog(#s=.*)?/)) {\n        a.href = `//${m[1]}/${m[2] || '#catalog'}`;\n      }\n    }\n  },\n\n  toggle() {\n    $.event('CloseMenu');\n    $.set('Header catalog links', this.checked);\n    return CatalogLinks.set(this.checked);\n  },\n\n  set(useCatalog) {\n    Conf['Header catalog links'] = useCatalog;\n    CatalogLinks.setLinks(Header.boardList);\n    CatalogLinks.setLinks(Header.bottomBoardList);\n    CatalogLinks.el.title = `Turn catalog links ${useCatalog ? 'off' : 'on'}.`;\n    return $('input', CatalogLinks.el).checked = useCatalog;\n  },\n\n  // Also called by Header when board lists are loaded / generated.\n  setLinks(list) {\n    if ((!(CatalogLinks.enabled ?? Conf['Catalog Links'])) || !list) { return; }\n\n    // do not transform links unless they differ from the expected value at most by this tail\n    const tail = /(?:index)?(?:\\.\\w+)?$/;\n\n    for (var a of $$('a:not([data-only])', list)) {\n      var {siteID, boardID} = a.dataset;\n      if (!siteID || !boardID) {\n        var VIEW;\n        ({siteID, boardID, VIEW} = Site.parseURL(a));\n        if (\n          !siteID || !boardID ||\n          !['index', 'catalog'].includes(VIEW) ||\n          (!a.dataset.indexOptions && (a.href.replace(tail, '') !== (Get.url(VIEW, {siteID, boardID}) || '').replace(tail, '')))\n        ) { continue; }\n        $.extend(a.dataset, {siteID, boardID});\n      }\n\n      var board = {siteID, boardID};\n      var url = Conf['Header catalog links'] ? CatalogLinks.catalog(board) : Get.url('index', board);\n      if (url) {\n        a.href = url;\n        if (a.dataset.indexOptions && (url.split('#')[0] === Get.url('index', board))) {\n          a.href += (a.hash ? '/' : '#') + a.dataset.indexOptions;\n        }\n      }\n    }\n  },\n\n  externalParse() {\n    CatalogLinks.externalList = dict();\n    for (var line of Conf['externalCatalogURLs'].split('\\n')) {\n      if (line[0] === '#') { continue; }\n      var url = line.split(';')[0];\n      var boards   = Filter.parseBoards(line.match(/;boards:([^;]+)/)?.[1] || '*');\n      var excludes = Filter.parseBoards(line.match(/;exclude:([^;]+)/)?.[1]) || dict();\n      for (var board in boards) {\n        if (!excludes[board] && !excludes[board.split('/')[0] + '/*']) {\n          CatalogLinks.externalList[board] = url;\n        }\n      }\n    }\n  },\n\n  external({siteID, boardID}) {\n    if (!CatalogLinks.externalList) { CatalogLinks.externalParse(); }\n    const external = (CatalogLinks.externalList[`${siteID}/${boardID}`] || CatalogLinks.externalList[`${siteID}/*`]);\n    if (external) { return external.replace(/%board/g, boardID); } else { return undefined; }\n  },\n\n  jsonIndex(board, hash) {\n    if ((g.SITE.ID === board.siteID) && (g.BOARD.ID === board.boardID) && (g.VIEW === 'index')) {\n      return hash;\n    } else {\n      return Get.url('index', board) + hash;\n    }\n  },\n\n  catalog(board=g.BOARD) {\n    let external, nativeCatalog;\n    if (Conf['External Catalog'] && (external = CatalogLinks.external(board))) {\n      return external;\n    } else if (Index.enabledOn(board) && Conf[`Use ${meta.name} Catalog`]) {\n      return CatalogLinks.jsonIndex(board, '#catalog');\n    } else if (nativeCatalog = Get.url('catalog', board)) {\n      return nativeCatalog;\n    } else {\n      return CatalogLinks.external(board);\n    }\n  },\n\n  index(board=g.BOARD) {\n    if (Index.enabledOn(board)) {\n      return CatalogLinks.jsonIndex(board, '#index');\n    } else {\n      return Get.url('index', board);\n    }\n  }\n};\nexport default CatalogLinks;\n",null,"import Header from \"../General/Header\";\nimport { d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { SECOND } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class Notice {\n  constructor(type, content, timeout, onclose) {\n    this.add = this.add.bind(this);\n    this.close = this.close.bind(this);\n    this.timeout = timeout;\n    this.onclose = onclose;\n    this.el = $.el('div',\n      {innerHTML: \"<a href=\\\"javascript:;\\\" class=\\\"close\\\" title=\\\"Close\\\">✕</a><div class=\\\"message\\\"></div>\"});\n    this.el.style.opacity = 0;\n    this.setType(type);\n    $.on(this.el.firstElementChild, 'click', this.close);\n    if (typeof content === 'string') {\n      content = $.tn(content);\n    }\n    $.add(this.el.lastElementChild, content);\n\n    $.ready(this.add);\n  }\n\n  setType(type) {\n    return this.el.className = `notification ${type}`;\n  }\n\n  add() {\n    if (this.closed) { return; }\n    if (d.hidden) {\n      $.on(d, 'visibilitychange', this.add);\n      return;\n    }\n    $.off(d, 'visibilitychange', this.add);\n    $.add(Header.noticesRoot, this.el);\n    this.el.clientHeight; // force reflow\n    this.el.style.opacity = 1;\n    if (this.timeout) { return setTimeout(this.close, this.timeout * SECOND); }\n  }\n\n  close() {\n    this.closed = true;\n    $.off(d, 'visibilitychange', this.add);\n    $.rm(this.el);\n    return this.onclose?.();\n  }\n}\n",null,"import { g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport Board from \"./Board\";\nimport Thread from \"./Thread\";\n\nexport default class CatalogThreadNative {\n  toString() { return this.ID; }\n\n  constructor(root) {\n    this.nodes = {\n      root,\n      thumb: $(g.SITE.selectors.catalog.thumb, root)\n    };\n    this.siteID  = g.SITE.ID;\n    this.boardID = this.nodes.thumb.parentNode.pathname.split(/\\/+/)[1];\n    this.board = g.boards[this.boardID] || new Board(this.boardID);\n    this.ID = (this.threadID = +(root.dataset.id || root.id).match(/\\d*$/)[0]);\n    this.thread = this.board.threads.get(this.ID) || new Thread(this.ID, this.board);\n  }\n}\n","import { Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst Anonymize = {\n  init() {\n    if (!Conf['Anonymize']) { return; }\n    return $.addClass(doc, 'anonymize');\n  }\n};\nexport default Anonymize;\n","import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { SECOND } from \"../platform/helpers\";\nimport ImageCommon from \"./ImageCommon\";\nimport Volume from \"./Volume\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageHover = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n    if (Conf['Image Hover']) {\n      Callbacks.Post.push({\n        name: 'Image Hover',\n        cb:   this.node\n      });\n    }\n    if (Conf['Image Hover in Catalog']) {\n      return Callbacks.CatalogThread.push({\n        name: 'Image Hover',\n        cb:   this.catalogNode\n      });\n    }\n  },\n\n  node() {\n    return this.files.filter((file) => (file.isImage || file.isVideo) && file.thumb).map((file) =>\n      $.on(file.thumb, 'mouseover', ImageHover.mouseover(this, file)));\n  },\n\n  catalogNode() {\n    const file = this.thread.OP.files[0];\n    if (!file || (!file.isImage && !file.isVideo)) { return; }\n    return $.on(this.nodes.thumb, 'mouseover', ImageHover.mouseover(this.thread.OP, file));\n  },\n\n  mouseover(post, file) { return function(e) {\n    let el, height, width;\n    if (!doc.contains(this)) { return; }\n    const {isVideo} = file;\n    if (file.isExpanding || file.isExpanded || g.SITE.isThumbExpanded?.(file)) { return; }\n    const error = ImageHover.error(post, file);\n    if (ImageCommon.cache?.dataset.fileID === `${post.fullID}.${file.index}`) {\n      el = ImageCommon.popCache();\n      $.on(el, 'error', error);\n    } else {\n      el = $.el((isVideo ? 'video' : 'img'));\n      el.dataset.fileID = `${post.fullID}.${file.index}`;\n      $.on(el, 'error', error);\n      el.src = file.url;\n    }\n\n    if (Conf['Restart when Opened']) {\n      ImageCommon.rewind(el);\n      ImageCommon.rewind(this);\n    }\n    el.id = 'ihover';\n    $.add(Header.hover, el);\n    if (isVideo) {\n      el.loop     = true;\n      el.controls = false;\n      Volume.setup(el);\n      if (Conf['Autoplay']) {\n        el.play();\n        if (this.nodeName === 'VIDEO') { this.currentTime = el.currentTime; }\n      }\n    }\n    if (file.dimensions) {\n      [width, height] = file.dimensions.split('x').map((x) => +x);\n      const maxWidth = doc.clientWidth;\n      const maxHeight = doc.clientHeight - UI.hover.padding;\n      const scale = Math.min(1, maxWidth / width, maxHeight / height);\n      width *= scale;\n      height *= scale;\n      el.style.maxWidth  = `${width}px`;\n      el.style.maxHeight = `${height}px`;\n    }\n    return UI.hover({\n      root: this,\n      el,\n      latestEvent: e,\n      endEvents: 'mouseout click',\n      height,\n      width,\n      noRemove: true,\n      cb() {\n        $.off(el, 'error', error);\n        ImageCommon.pushCache(el);\n        ImageCommon.pause(el);\n        $.rm(el);\n        return el.removeAttribute('style');\n      }\n    });\n  }; },\n\n  error(post, file) { return function() {\n    if (ImageCommon.decodeError(this, file)) { return; }\n    return ImageCommon.error(this, post, file, 3 * SECOND, URL => {\n      if (URL) {\n        return this.src = URL + (this.src === URL ? '?' + Date.now() : '');\n      } else {\n        return $.rm(this);\n      }\n    });\n  }; }\n};\nexport default ImageHover;\n","import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport { g, Conf, d, doc } from \"../globals/globals\";\nimport Icon from \"../Icons/icon\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageLoader = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n    const replace = Conf['Replace JPG'] || Conf['Replace PNG'] || Conf['Replace GIF'] || Conf['Replace WEBM'];\n    if (!Conf['Image Prefetching'] && !replace) { return; }\n\n    Callbacks.Post.push({\n      name: 'Image Replace',\n      cb:   this.node\n    });\n\n    $.on(d, 'PostsInserted', function() {\n      if (ImageLoader.prefetchEnabled || replace) {\n        return g.posts.forEach(ImageLoader.prefetchAll);\n      }\n    });\n\n    if (Conf['Replace WEBM']) {\n      $.on(d, 'scroll visibilitychange 4chanXInitFinished PostsInserted', this.playVideos);\n    }\n\n    if (!Conf['Image Prefetching'] || !['index', 'thread'].includes(g.VIEW)) { return; }\n\n    const el = $.el('a', {\n      href: 'javascript:;',\n      title: 'Prefetch Images',\n      className: 'disabled',\n    });\n    Icon.set(el, 'bolt', 'Prefetch')\n\n    $.on(el, 'click', this.toggle);\n\n    return Header.addShortcut('prefetch', el, 525);\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var file of this.files) {\n      if (Conf['Replace WEBM'] && file.isVideo) { ImageLoader.replaceVideo(this, file); }\n      ImageLoader.prefetch(this, file);\n    }\n  },\n\n  replaceVideo(post, file) {\n    const {thumb} = file;\n    const video = $.el('video', {\n      preload:     'none',\n      loop:        true,\n      muted:       true,\n      poster:      thumb.src || thumb.dataset.src,\n      textContent: thumb.alt,\n      className:   thumb.className\n    }\n    );\n    video.setAttribute('muted', 'muted');\n    video.dataset.md5 = thumb.dataset.md5;\n    for (var attr of ['height', 'width', 'maxHeight', 'maxWidth']) { video.style[attr] = thumb.style[attr]; }\n    video.src         = file.url;\n    $.replace(thumb, video);\n    file.thumb      = video;\n    return file.videoThumb = true;\n  },\n\n  prefetch(post, file) {\n    let clone, type;\n    const {isImage, isVideo, thumb, url} = file;\n    if (file.isPrefetched || !(isImage || isVideo) || post.isHidden || post.thread.isHidden) { return; }\n    if (isVideo) {\n      type = 'WEBM';\n    } else {\n      type = url.match(/\\.([^.]+)$/)?.[1].toUpperCase();\n      if (type === 'JPEG') { type = 'JPG'; }\n    }\n    const replace = Conf[`Replace ${type}`] && !/spoiler/.test(thumb.src || thumb.dataset.src);\n    if (!replace && !ImageLoader.prefetchEnabled) { return; }\n    if ($.hasClass(doc, 'catalog-mode')) { return; }\n    if (![post, ...post.clones].some(clone => doc.contains(clone.nodes.root))) { return; }\n    file.isPrefetched = true;\n    if (file.videoThumb) {\n      for (clone of post.clones) { clone.file.thumb.preload = 'auto'; }\n      thumb.preload = 'auto';\n      // XXX Cloned video elements with poster in Firefox cause momentary display of image loading icon.\n      if ($.engine === 'gecko') {\n        $.on(thumb, 'loadeddata', function() { return this.removeAttribute('poster'); });\n      }\n      return;\n    }\n\n    const el = $.el(isImage ? 'img' : 'video');\n    if (isVideo) { el.preload = 'auto'; }\n    if (replace && isImage) {\n      $.on(el, 'load', function() {\n        for (clone of post.clones) { clone.file.thumb.src = url; }\n        return thumb.src = url;\n      });\n    }\n    return el.src = url;\n  },\n\n  prefetchAll(post) {\n    for (var file of post.files) {\n      ImageLoader.prefetch(post, file);\n    }\n  },\n\n  toggle() {\n    ImageLoader.prefetchEnabled = !ImageLoader.prefetchEnabled;\n    this.classList.toggle('disabled', !ImageLoader.prefetchEnabled);\n    if (ImageLoader.prefetchEnabled) {\n      g.posts.forEach(ImageLoader.prefetchAll);\n    }\n  },\n\n  playVideos() {\n    // Special case: Quote previews are off screen when inserted into document, but quickly moved on screen.\n    const qpClone = $.id('qp')?.firstElementChild;\n    return g.posts.forEach(function(post) {\n      for (post of [post, ...post.clones]) {\n        for (var file of post.files) {\n          if (file.videoThumb) {\n            var {thumb} = file;\n            if (Header.isNodeVisible(thumb) || (post.nodes.root === qpClone)) { thumb.play(); } else { thumb.pause(); }\n          }\n        }\n      }\n    });\n  }\n};\nexport default ImageLoader;\n","import $ from \"../platform/$\";\nimport Callbacks from \"../classes/Callbacks\";\nimport CrossOrigin from \"../platform/CrossOrigin\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport Get from \"../General/Get\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Metadata = {\n  init() {\n    if (!Conf['WEBM Metadata'] || !['index', 'thread'].includes(g.VIEW)) { return; }\n\n    return Callbacks.Post.push({\n      name: 'WEBM Metadata',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    for (let i = 0; i < this.files.length; i++) {\n      var file = this.files[i];\n      if (/webm$/i.test(file.url)) {var el;\n      \n        if (this.isClone) {\n          el = $('.webm-title', file.text);\n        } else {\n          el = $.el('span',\n            {className: 'webm-title'});\n          el.dataset.index = i;\n          $.extend(el,\n            {innerHTML: \"<a href=\\\"javascript:;\\\"></a>\"});\n          $.add(file.text, [$.tn(' '), el]);\n        }\n        if (el.children.length === 1) { $.one(el.lastElementChild, 'mouseover focus', Metadata.load); }\n      }\n    }\n  },\n\n  load() {\n    $.rmClass(this.parentNode, 'error');\n    $.addClass(this.parentNode, 'loading');\n    const {index} = this.parentNode.dataset;\n    return CrossOrigin.binary(Get.postFromNode(this).files[+index].url, data => {\n      $.rmClass(this.parentNode, 'loading');\n      if (data != null) {\n        const title = Metadata.parse(data);\n        const output = $.el('span',\n          {textContent: title || ''});\n        if (title == null) { $.addClass(this.parentNode, 'not-found'); }\n        $.before(this, output);\n        this.parentNode.tabIndex = 0;\n        if (d.activeElement === this) { this.parentNode.focus(); }\n        return this.tabIndex = -1;\n      } else {\n        $.addClass(this.parentNode, 'error');\n        return $.one(this, 'click', Metadata.load);\n      }\n    }\n    ,\n      {Range: 'bytes=0-9999'});\n  },\n\n  parse(data) {\n    const readInt = function() {\n      let n = data[i++];\n      let len = 0;\n      while (n < (0x80 >> len)) { len++; }\n      n ^= (0x80 >> len);\n      while (len-- && (i < data.length)) {\n        n = (n << 8) ^ data[i++];\n      }\n      return n;\n    };\n\n    var i = 0;\n    while (i < data.length) {\n      var element = readInt();\n      var size    = readInt();\n      if (element === 0x3BA9) { // Title\n        var title = '';\n        while (size-- && (i < data.length)) {\n          title += String.fromCharCode(data[i++]);\n        }\n        return decodeURIComponent(escape(title)); // UTF-8 decoding\n      } else if (![0x8538067, 0x549A966].includes(element)) { // Segment, Info\n        i += size;\n      }\n    }\n    return null;\n  }\n};\nexport default Metadata;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst RevealSpoilers = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW) || !Conf['Reveal Spoiler Thumbnails']) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Reveal Spoiler Thumbnails',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var file of this.files) {\n      if (file.thumb && file.isSpoiler) {\n        var {thumb} = file;\n        // Remove old width and height.\n        thumb.removeAttribute('style');\n        // Enforce thumbnail size if thumbnail is replaced.\n        thumb.style.maxHeight = (thumb.style.maxWidth = this.isReply ? '125px' : '250px');\n        if (thumb.src) {\n          thumb.src = file.thumbURL;\n        } else {\n          thumb.dataset.src = file.thumbURL;\n        }\n      }\n    }\n  }\n};\nexport default RevealSpoilers;\n","import Callbacks from \"../classes/Callbacks\";\n// import Test from \"../General/Test\";\nimport { g, Conf } from \"../globals/globals\";\nimport ImageHost from \"../Images/ImageHost\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport Embedding from \"./Embedding\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Linkify = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW) || !Conf['Linkify']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    Callbacks.Post.push({\n      name: 'Linkify',\n      cb:   this.node\n    });\n\n    return Embedding.init();\n  },\n\n  node() {\n    let link;\n    if (this.isClone) { return Embedding.events(this); }\n    if (!Linkify.regString.test(this.info.comment)) { return; }\n    for (link of $$('a', this.nodes.comment)) {\n      if (g.SITE.isLinkified?.(link)) {\n        $.addClass(link, 'linkify');\n        if (ImageHost.useFaster) { ImageHost.fixLinks([link]); }\n        Embedding.process(link, this);\n      }\n    }\n    const links = Linkify.process(this.nodes.comment);\n    if (ImageHost.useFaster) { ImageHost.fixLinks(links); }\n    for (link of links) { Embedding.process(link, this); }\n  },\n\n  process(node) {\n    let length;\n    const test     = /[^\\s\"]+/g;\n    const space    = /[\\s\"]/;\n    const snapshot = $.X('.//br|.//text()', node);\n    let i = 0;\n    const links = [];\n    while ((node = snapshot.snapshotItem(i++))) {\n      var result;\n      var {data} = node;\n      if (!data || (node.parentElement.nodeName === \"A\")) { continue; }\n\n      while ((result = test.exec(data))) {\n        var {index} = result;\n        var endNode = node;\n        var word    = result[0];\n        // End of node, not necessarily end of space-delimited string\n        if ((length = index + word.length) === data.length) {\n          var saved;\n          test.lastIndex = 0;\n\n          while (saved = snapshot.snapshotItem(i++)) {\n            var end;\n            if ((saved.nodeName === 'BR') || ((saved.parentElement.nodeName === 'P') && !saved.previousSibling)) {\n              var part1, part2;\n              if (\n                // link deliberately split\n                (part1 = word.match(/(https?:\\/\\/)?([a-z\\d-]+\\.)*[a-z\\d-]+$/i)) &&\n                (part2 = snapshot.snapshotItem(i)?.data?.match(/^(\\.[a-z\\d-]+)*\\//i)) &&\n                ((part1[0] + part2[0]).search(Linkify.regString) === 0)\n              ) {\n                continue;\n              } else {\n                break;\n              }\n            }\n\n            if ((saved.parentElement.nodeName === \"A\") && !Linkify.regString.test(word)) {\n              break;\n            }\n\n            endNode  = saved;\n            ({data}   = saved);\n\n            if (end = space.exec(data)) {\n              // Set our snapshot and regex to start on this node at this position when the loop resumes\n              word += data.slice(0, end.index);\n              test.lastIndex = (length = end.index);\n              i--;\n              break;\n            } else {\n              ({length} = data);\n              word    += data;\n            }\n          }\n        }\n\n        if (Linkify.regString.test(word)) {\n          links.push(Linkify.makeRange(node, endNode, index, length));\n\n          // <% if (readJSON('/.tests_enabled')) { %>\n          // if (links.length) {\n          // Test.assert(() => word === links[links.length - 1]?.toString());\n          // }\n          // <% } %>\n        }\n\n        if (!test.lastIndex || (node !== endNode)) { break; }\n      }\n    }\n\n    i = links.length;\n    while (i--) {\n      links[i] = Linkify.makeLink(links[i]);\n    }\n    return links;\n  },\n\n  regString: new RegExp(`(\\\n\\\n(https?|mailto|git|magnet|ftp|irc):(\\\n[a-z\\\\d%/?]\\\n)\\\n|\\\n([-a-z\\\\d]+[.])+(\\\naero|asia|biz|cat|com|coop|dance|info|int|jobs|mobi|moe|museum|name|net|org|post|pro|tel|travel|xxx|xyz|edu|gov|mil|[a-z]{2}\\\n)([:/]|(?![^\\\\s\"]))\\\n|\\\n[\\\\d]{1,3}\\\\.[\\\\d]{1,3}\\\\.[\\\\d]{1,3}\\\\.[\\\\d]{1,3}\\\n|\\\n[-\\\\w\\\\d.@]+@[a-z\\\\d.-]+\\\\.[a-z\\\\d]\\\n)`, 'i'),\n\n  makeRange(startNode, endNode, startOffset, endOffset) {\n    const range = document.createRange();\n    range.setStart(startNode, startOffset);\n    range.setEnd(endNode,   endOffset);\n    return range;\n  },\n\n  makeLink(range) {\n    let t;\n    let encodedDomain;\n    let text = range.toString();\n\n    // Clean start of range\n    let i = text.search(Linkify.regString);\n\n    if (i > 0) {\n      text = text.slice(i);\n      while ((range.startOffset + i) >= range.startContainer.data.length) { i--; }\n\n      if (i) { range.setStart(range.startContainer, range.startOffset + i); }\n    }\n\n    // Clean end of range\n    i = 0;\n    while (/[)\\]}>.,]/.test(t = text.charAt(text.length - (1 + i)))) {\n      if (!/[.,]/.test(t) && !((text.match(/[()\\[\\]{}<>]/g)).length % 2)) { break; }\n      i++;\n    }\n\n    if (i) {\n      text = text.slice(0, -i);\n      while ((range.endOffset - i) < 0) { i--; }\n\n      if (i) {\n        range.setEnd(range.endContainer, range.endOffset - i);\n      }\n    }\n\n    // Make our link 'valid' if it is formatted incorrectly.\n    if (!/((mailto|magnet):|.+:\\/\\/)/.test(text)) {\n      text = (\n        /@/.test(text) ?\n          'mailto:'\n        :\n          'http://'\n      ) + text;\n    }\n\n    // Decode percent-encoded characters in domain so that they behave consistently across browsers.\n    if (encodedDomain = text.match(/^(https?:\\/\\/[^/]*%[0-9a-f]{2})(.*)$/i)) {\n      text = encodedDomain[1].replace(/%([0-9a-f]{2})/ig, function(x, y) {\n        if (y === '25') { return x; } else { return String.fromCharCode(parseInt(y, 16)); }\n      }) + encodedDomain[2];\n    }\n\n    const a = $.el('a', {\n      className: 'linkify',\n      rel:       'noreferrer noopener',\n      target:    '_blank',\n      href:      text\n    }\n    );\n\n    // Insert the range into the anchor, the anchor into the range's DOM location, and destroy the range.\n    $.add(a, range.extractContents());\n    range.insertNode(a);\n\n    return a;\n  }\n};\nexport default Linkify;\n","import $ from \"../platform/$\";\nimport Redirect from \"../Archive/Redirect\";\nimport Filter from \"../Filtering/Filter\";\nimport { g, Conf } from \"../globals/globals\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst ArchiveLink = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Archive Link']) { return; }\n\n    const div = $.el('div',\n      {textContent: 'Archive'});\n\n    const entry = {\n      el: div,\n      order: 60,\n      open({ID, thread, board}) {\n        return !!Redirect.to('thread', {postID: ID, threadID: thread.ID, boardID: board.ID});\n      },\n      subEntries: []\n    };\n\n    for (var type of [\n      ['Post',      'post'],\n      ['Name',      'name'],\n      ['Tripcode',  'tripcode'],\n      ['Capcode',   'capcode'],\n      ['Subject',   'subject'],\n      ['Flag',      'country'],\n      ['Filename',  'filename'],\n      ['Image MD5', 'MD5']\n    ]) {\n      // Add a sub entry for each type.\n      entry.subEntries.push(this.createSubEntry(type[0], type[1]));\n    }\n\n    return Menu.menu.addEntry(entry);\n  },\n\n  createSubEntry(text, type) {\n    const el = $.el('a', {\n      textContent: text,\n      target: '_blank'\n    }\n    );\n\n    const open = type === 'post' ?\n      function({ID, thread, board}) {\n        el.href = Redirect.to('thread', {postID: ID, threadID: thread.ID, boardID: board.ID});\n        return true;\n      }\n    :\n      function(post) {\n        const typeParam = (type === 'country') && post.info.flagCodeTroll ?\n          'troll_country'\n        :\n          type;\n        const value = type === 'country' ?\n          post.info.flagCode || post.info.flagCodeTroll?.toLowerCase()\n        :\n          Filter.values(type, post)[0];\n        // We want to parse the exact same stuff as the filter does already.\n        if (!value) { return false; }\n        el.href = Redirect.to('search', {\n          boardID:  post.board.ID,\n          type:     typeParam,\n          value,\n          isSearch: true\n        }\n        );\n        return true;\n      };\n\n    return {\n      el,\n      open\n    };\n  }\n};\nexport default ArchiveLink;\n","import { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar CopyTextLink = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Copy Text Link']) { return; }\n\n    const a = $.el('a', {\n      className: 'copy-text-link',\n      href: 'javascript:;',\n      textContent: 'Copy Text'\n    }\n    );\n    $.on(a, 'click', CopyTextLink.copy);\n\n    return Menu.menu.addEntry({\n      el: a,\n      order: 12,\n      open(post) {\n        CopyTextLink.text = (post.origin || post).commentOrig();\n        return true;\n      }\n    });\n  },\n\n  copy() {\n    const el = $.el('textarea', {\n      className: 'copy-text-element',\n      value: CopyTextLink.text\n    }\n    );\n    $.add(d.body, el);\n    el.select();\n    try {\n      d.execCommand('copy');\n    } catch (error) {}\n    return $.rm(el);\n  }\n};\nexport default CopyTextLink;\n","import Notice from \"../classes/Notice\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport QR from \"../Posting/QR\";\nimport Menu from \"./Menu\";\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar DeleteLink = {\n  auto: [dict(), dict()],\n\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Delete Link']) { return; }\n\n    const div = $.el('div', {\n      className: 'delete-link',\n      textContent: 'Delete'\n    }\n    );\n    const postEl = $.el('a', {\n      className: 'delete-post',\n      href: 'javascript:;'\n    }\n    );\n    const fileEl = $.el('a', {\n      className: 'delete-file',\n      href: 'javascript:;'\n    }\n    );\n    this.nodes = {\n      menu:  div.firstChild,\n      links: [postEl, fileEl]\n    };\n\n    const postEntry = {\n      el: postEl,\n      open() {\n        postEl.textContent = DeleteLink.linkText(false);\n        $.on(postEl, 'click', DeleteLink.toggle);\n        return true;\n      }\n    };\n    const fileEntry = {\n      el: fileEl,\n      open({file}) {\n        if (!file || file.isDead) { return false; }\n        fileEl.textContent = DeleteLink.linkText(true);\n        $.on(fileEl, 'click', DeleteLink.toggle);\n        return true;\n      }\n    };\n\n    return Menu.menu.addEntry({\n      el: div,\n      order: 40,\n      open(post) {\n        if (post.isDead) { return false; }\n        DeleteLink.post = post;\n        DeleteLink.nodes.menu.textContent = DeleteLink.menuText();\n        DeleteLink.cooldown.start(post);\n        return true;\n      },\n      subEntries: [postEntry, fileEntry]});\n  },\n\n  menuText() {\n    let seconds;\n    if ((seconds = DeleteLink.cooldown.seconds[DeleteLink.post.fullID])) {\n      return `Delete (${seconds})`;\n    } else {\n      return 'Delete';\n    }\n  },\n\n  linkText(fileOnly) {\n    let text = fileOnly ? 'File' : 'Post';\n    if (DeleteLink.auto[+fileOnly][DeleteLink.post.fullID]) {\n      text = `Deleting ${text.toLowerCase()}...`;\n    }\n    return text;\n  },\n\n  toggle() {\n    const {post} = DeleteLink;\n    const fileOnly = $.hasClass(this, 'delete-file');\n    const auto = DeleteLink.auto[+fileOnly];\n\n    if (auto[post.fullID]) {\n      delete auto[post.fullID];\n    } else {\n      auto[post.fullID] = true;\n    }\n    this.textContent = DeleteLink.linkText(fileOnly);\n\n    if (!DeleteLink.cooldown.seconds[post.fullID]) {\n      return DeleteLink.delete(post, fileOnly);\n    }\n  },\n\n  delete(post, fileOnly) {\n    const link = DeleteLink.nodes.links[+fileOnly];\n    delete DeleteLink.auto[+fileOnly][post.fullID];\n    if (post.fullID === DeleteLink.post.fullID) { $.off(link, 'click', DeleteLink.toggle); }\n\n    const form = {\n      mode: 'usrdel',\n      onlyimgdel: fileOnly,\n      pwd: QR.persona.getPassword()\n    };\n    form[+post.ID] = 'delete';\n\n    return $.ajax($.id('delform').action.replace(`/${g.BOARD}/`, `/${post.board}/`), {\n      responseType: 'document',\n      withCredentials: true,\n      onloadend() { return DeleteLink.load(link, post, fileOnly, this.response); },\n      form: $.formData(form)\n    }\n    );\n  },\n\n  load(link, post, fileOnly, resDoc) {\n    let msg;\n    if (!resDoc) {\n      new Notice('warning', 'Connection error, please retry.', 20);\n      if (post.fullID === DeleteLink.post.fullID) { $.on(link, 'click', DeleteLink.toggle); }\n      return;\n    }\n\n    link.textContent = DeleteLink.linkText(fileOnly);\n    if (resDoc.title === '4chan - Banned') { // Ban/warn check\n      const el = $.el('span', {innerHTML: \"You can&#039;t delete posts because you are <a href=\\\"//www.4chan.org/banned\\\" target=\\\"_blank\\\">banned</a>.\"});\n      return new Notice('warning', el, 20);\n    } else if (msg = resDoc.getElementById('errmsg')) { // error!\n      new Notice('warning', msg.textContent, 20);\n      if (post.fullID === DeleteLink.post.fullID) { $.on(link, 'click', DeleteLink.toggle); }\n      if (QR.cooldown.data && Conf['Cooldown'] && /\\bwait\\b/i.test(msg.textContent)) {\n        DeleteLink.cooldown.start(post, 5);\n        DeleteLink.auto[+fileOnly][post.fullID] = true;\n        return DeleteLink.nodes.links[+fileOnly].textContent = DeleteLink.linkText(fileOnly);\n      }\n    } else {\n      if (!fileOnly) { QR.cooldown.delete(post); }\n      if (resDoc.title === 'Updating index...') {\n        // We're 100% sure.\n        (post.origin || post).kill(fileOnly);\n      }\n      if (post.fullID === DeleteLink.post.fullID) { return link.textContent = 'Deleted'; }\n    }\n  },\n\n  cooldown: {\n    seconds: dict(),\n\n    start(post, seconds) {\n      // Already counting.\n      if (DeleteLink.cooldown.seconds[post.fullID] != null) { return; }\n\n      if (seconds == null) { seconds = QR.cooldown.secondsDeletion(post); }\n      if (seconds > 0) {\n        DeleteLink.cooldown.seconds[post.fullID] = seconds;\n        return DeleteLink.cooldown.count(post);\n      }\n    },\n\n    count(post) {\n      if (post.fullID === DeleteLink.post.fullID) { DeleteLink.nodes.menu.textContent = DeleteLink.menuText(); }\n      if ((DeleteLink.cooldown.seconds[post.fullID] > 0) && Conf['Cooldown']) {\n        DeleteLink.cooldown.seconds[post.fullID]--;\n        setTimeout(DeleteLink.cooldown.count, 1000, post);\n      } else {\n        delete DeleteLink.cooldown.seconds[post.fullID];\n        for (var fileOnly of [false, true]) {\n          if (DeleteLink.auto[+fileOnly][post.fullID]) {\n            DeleteLink.delete(post, fileOnly);\n          }\n        }\n      }\n    }\n  }\n};\nexport default DeleteLink;\n","import { g, Conf } from \"../globals/globals\";\nimport ImageCommon from \"../Images/ImageCommon\";\nimport $ from \"../platform/$\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst DownloadLink = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Download Link']) { return; }\n\n    const a = $.el('a', {\n      className: 'download-link',\n      textContent: 'Download file'\n    }\n    );\n\n    // Specifying the filename with the download attribute only works for same-origin links.\n    $.on(a, 'click', ImageCommon.download);\n\n    return Menu.menu.addEntry({\n      el: a,\n      order: 100,\n      open({file}) {\n        if (!file) { return false; }\n        a.href     = file.url;\n        a.download = file.name;\n        return true;\n      }\n    });\n  }\n};\nexport default DownloadLink;\n","import { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ReportLink = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Report Link']) { return; }\n\n    const a = $.el('a', {\n      className: 'report-link',\n      href: 'javascript:;',\n      textContent: 'Report'\n    }\n    );\n    $.on(a, 'click', ReportLink.report);\n\n    return Menu.menu.addEntry({\n      el: a,\n      order: 10,\n      open(post) {\n        ReportLink.url = `//sys.${location.hostname.split('.')[1]}.org/${post.board}/imgboard.php?mode=report&no=${post}`;\n        if (d.cookie.indexOf('pass_enabled=1') >= 0) {\n          ReportLink.dims = 'width=350,height=275';\n        } else {\n          ReportLink.dims = 'width=400,height=550';\n        }\n        return true;\n      }\n    });\n  },\n\n  report() {\n    const {url, dims} = ReportLink;\n    const id  = Date.now();\n    const set = `toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,${dims}`;\n    return window.open(url, id, set);\n  }\n};\nexport default ReportLink;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, d, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar AntiAutoplay = {\n  init() {\n    if (!Conf['Disable Autoplaying Sounds']) { return; }\n    $.addClass(doc, 'anti-autoplay');\n    for (var audio of $$('audio[autoplay]', doc)) { this.stop(audio); }\n    window.addEventListener('loadstart', (e => this.stop(e.target)), true);\n    Callbacks.Post.push({\n      name: 'Disable Autoplaying Sounds',\n      cb:   this.node\n    });\n    return $.ready(() => this.process(d.body));\n  },\n\n  stop(audio) {\n    if (!audio.autoplay) { return; }\n    audio.pause();\n    audio.autoplay = false;\n    if (audio.controls) { return; }\n    audio.controls = true;\n    return $.addClass(audio, 'controls-added');\n  },\n\n  node() {\n    return AntiAutoplay.process(this.nodes.comment);\n  },\n\n  process(root) {\n    for (var iframe of $$('iframe[src*=\"youtube\"][src*=\"autoplay=1\"]', root)) {\n      AntiAutoplay.processVideo(iframe, 'src');\n    }\n    for (var object of $$('object[data*=\"youtube\"][data*=\"autoplay=1\"]', root)) {\n      AntiAutoplay.processVideo(object, 'data');\n    }\n  },\n\n  processVideo(el, attr) {\n    el[attr] = el[attr].replace(/\\?autoplay=1&?/, '?').replace('&autoplay=1', '');\n    if (window.getComputedStyle(el).display === 'none') { el.style.display = 'block'; }\n    return $.addClass(el, 'autoplay-removed');\n  }\n};\nexport default AntiAutoplay;\n","import DataBoard from \"../classes/DataBoard\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport Unread from \"../Monitoring/Unread\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Banner = {\n  init() {\n    if (Conf['Custom Board Titles']) {\n      this.db = new DataBoard('customTitles', null, true);\n    }\n\n    $.asap((() => d.body), () => $.asap((() => $('hr')), Banner.ready));\n\n    // Let 4chan's JS load the banner if enabled; otherwise, load it ourselves.\n    if (g.BOARD.ID !== 'f') {\n      return Main.ready(() => $.queueTask(Banner.load));\n    }\n  },\n\n  ready() {\n    const banner = $(\".boardBanner\");\n    const {children} = banner;\n\n    if ((g.VIEW === 'thread') && Conf['Remove Thread Excerpt']) {\n      Banner.setTitle(children[1].textContent);\n    }\n\n    children[0].title = \"Click to change\";\n    $.on(children[0], 'click', Banner.cb.toggle);\n\n    if (Conf['Custom Board Titles']) {\n      Banner.custom(children[1]);\n      if (children[2]) { return Banner.custom(children[2]); }\n    }\n  },\n\n  load() {\n    const bannerCnt = $.id('bannerCnt');\n    if (!bannerCnt.firstChild) {\n      const img = $.el('img', {\n        alt: '4chan',\n        src: '//s.4cdn.org/image/title/' + bannerCnt.dataset.src\n      }\n      );\n      return $.add(bannerCnt, img);\n    }\n  },\n\n  setTitle(title) {\n    if (Unread.title != null) {\n      Unread.title = title;\n      return Unread.update();\n    } else {\n      return d.title = title;\n    }\n  },\n\n  cb: {\n    toggle() {\n      if (!Banner.choices?.length) {\n        Banner.choices = Conf['knownBanners'].split(',').slice();\n      }\n      const i = Math.floor(Banner.choices.length * Math.random());\n      const banner = Banner.choices.splice(i, 1);\n      return $('img', this.parentNode).src = `//s.4cdn.org/image/title/${banner}`;\n    },\n\n    click(e) {\n      if (!e.ctrlKey && !e.metaKey) { return; }\n      if (Banner.original[this.className] == null) { Banner.original[this.className] = this.cloneNode(true); }\n      this.contentEditable = true;\n      for (var br of $$('br', this)) { $.replace(br, $.tn('\\n')); }\n      return this.focus();\n    },\n\n    keydown(e) {\n      e.stopPropagation();\n      if (!e.shiftKey && (e.keyCode === 13)) { return this.blur(); }\n    },\n\n    blur() {\n      for (var br of $$('br', this)) { $.replace(br, $.tn('\\n')); }\n      if (this.textContent = this.textContent.replace(/\\n*$/, '')) {\n        this.contentEditable = false;\n        return Banner.db.set({\n          boardID:  g.BOARD.ID,\n          threadID: this.className,\n          val: {\n            title: this.textContent,\n            orig:  Banner.original[this.className].textContent\n          }\n        });\n      } else {\n        $.rmAll(this);\n        $.add(this, [...Banner.original[this.className].cloneNode(true).childNodes]);\n        return Banner.db.delete({\n          boardID:  g.BOARD.ID,\n          threadID: this.className\n        });\n      }\n    }\n  },\n\n  original: dict(),\n\n  custom(child) {\n    let data;\n    const {className} = child;\n    child.title = `Ctrl/\\u2318+click to edit board ${className.slice(5).toLowerCase()}`;\n    child.spellcheck = false;\n\n    for (var event of ['click', 'keydown', 'blur']) {\n      $.on(child, event, Banner.cb[event]);\n    }\n\n    if (data = Banner.db.get({boardID: g.BOARD.ID, threadID: className})) {\n      if (Conf['Persistent Custom Board Titles'] || (data.orig === child.textContent)) {\n        Banner.original[className] = child.cloneNode(true);\n        return child.textContent = data.title;\n      } else {\n        return Banner.db.delete({boardID: g.BOARD.ID, threadID: className});\n      }\n    }\n  }\n};\nexport default Banner;\n","import { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Flash = {\n  init() {\n    if ((g.BOARD.ID === 'f') && Conf['Enable Native Flash Embedding']) {\n      return $.ready(Flash.initReady);\n    }\n  },\n\n  initReady() {\n    if ($.hasStorage) {\n      return $.global(function() { if (JSON.parse(localStorage['4chan-settings'] || '{}').disableAll) { return window.SWFEmbed.init(); } });\n    } else {\n      if (g.VIEW === 'thread') {\n        $.global(() => window.Main.tid = location.pathname.split(/\\/+/)[3]);\n      }\n      return $.global(() => window.SWFEmbed.init());\n    }\n  }\n};\nexport default Flash;\n","import Callbacks from \"../classes/Callbacks\";\nimport BoardConfig from \"../General/BoardConfig\";\nimport { d, doc, g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport ExpandComment from \"./ExpandComment\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Fourchan = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n    BoardConfig.ready(this.initBoard);\n    return Main.ready(this.initReady);\n  },\n\n  initBoard() {\n    if (g.BOARD.config.code_tags) {\n      $.on(window, 'prettyprint:cb', function(e) {\n        let post, pre;\n        if (!(post = g.posts.get(e.detail.ID))) { return; }\n        if (!(pre  = $$('.prettyprint', post.nodes.comment)[+e.detail.i])) { return; }\n        if (!$.hasClass(pre, 'prettyprinted')) {\n          pre.innerHTML = e.detail.html;\n          return $.addClass(pre, 'prettyprinted');\n        }\n      });\n      $.global(() => window.addEventListener('prettyprint', e => window.dispatchEvent(new CustomEvent('prettyprint:cb', {\n        detail: {\n          ID:   e.detail.ID,\n          i:    e.detail.i,\n          html: window.prettyPrintOne(e.detail.html)\n        }\n      }))\n      , false));\n      Callbacks.Post.push({\n        name: 'Parse [code] tags',\n        cb:   Fourchan.code\n      });\n      g.posts.forEach(function(post) {\n        if (post.callbacksExecuted) {\n          return Callbacks.Post.execute(post, ['Parse [code] tags'], true);\n        }\n      });\n      ExpandComment.callbacks.push(Fourchan.code);\n    }\n\n    if (g.BOARD.config.math_tags) {\n      $.global(() => window.addEventListener('mathjax', function(e) {\n        if (window.MathJax) {\n          return window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, e.target]);\n        } else {\n          if (!document.querySelector('script[src^=\"//cdn.mathjax.org/\"]')) { // don't load MathJax if already loading\n            window.loadMathJax();\n            window.loadMathJax = function() {};\n          }\n          // 4chan only handles post comments on MathJax load; anything else (e.g. the QR preview) must be queued explicitly.\n          if (!e.target.classList.contains('postMessage')) {\n            return document.querySelector('script[src^=\"//cdn.mathjax.org/\"]').addEventListener('load', () => window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, e.target])\n            , false);\n          }\n        }\n      }\n      , false));\n      Callbacks.Post.push({\n        name: 'Parse [math] tags',\n        cb:   Fourchan.math\n      });\n      g.posts.forEach(function(post) {\n        if (post.callbacksExecuted) {\n          return Callbacks.Post.execute(post, ['Parse [math] tags'], true);\n        }\n      });\n      return ExpandComment.callbacks.push(Fourchan.math);\n    }\n  },\n\n  // Disable 4chan's ID highlighting (replaced by IDHighlight) and reported post hiding.\n  initReady() {\n    return $.global(function() {\n      window.clickable_ids = false;\n      for (var node of document.querySelectorAll('.posteruid, .capcode')) {\n        node.removeEventListener('click', window.idClick, false);\n      }\n    });\n  },\n\n  code() {\n    if (this.isClone) { return; }\n    return $.ready(() => {\n      const iterable = $$('.prettyprint', this.nodes.comment);\n      for (let i = 0; i < iterable.length; i++) {\n        var pre = iterable[i];\n        if (!$.hasClass(pre, 'prettyprinted')) {\n          $.event('prettyprint', {ID: this.fullID, i, html: pre.innerHTML}, window);\n        }\n      }\n    });\n  },\n\n  math() {\n    let wbrs;\n    if (!/\\[(math|eqn)\\]/.test(this.nodes.comment.textContent)) { return; }\n    // XXX <wbr> tags frequently break MathJax; remove them.\n    if ((wbrs = $$('wbr', this.nodes.comment)).length) {\n      for (var wbr of wbrs) { $.rm(wbr); }\n      this.nodes.comment.normalize();\n    }\n    var cb = () => {\n      if (!doc.contains(this.nodes.comment)) { return; }\n      $.off(d, 'PostsInserted', cb);\n      return $.event('mathjax', null, this.nodes.comment);\n    };\n    $.on(d, 'PostsInserted', cb);\n    return cb();\n  }\n};\nexport default Fourchan;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar IDColor = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Color User IDs']) { return; }\n    this.ids = dict();\n    this.ids['Heaven'] = [0, 0, 0, '#fff'];\n\n    return Callbacks.Post.push({\n      name: 'Color User IDs',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    let span, uid;\n    if (this.isClone || !((uid = this.info.uniqueID) && (span = this.nodes.uniqueID))) { return; }\n\n    const rgb = IDColor.ids[uid] || IDColor.compute(uid);\n\n    // Style the damn node.\n    const {style} = span;\n    style.color = rgb[3];\n    style.backgroundColor = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;\n    return $.addClass(span, 'painted');\n  },\n\n  compute(uid) {\n    // Convert chars to integers, bitshift and math to create a larger integer\n    // Create a nice string of binary\n    const hash = g.SITE.uidColor ? g.SITE.uidColor(uid) : parseInt(uid, 16);\n\n    // Convert binary string to numerical values with bitshift and '&' truncation.\n    const rgb = [\n      (hash >> 16) & 0xFF,\n      (hash >> 8)  & 0xFF,\n      hash & 0xFF\n    ];\n\n    // Weight color luminance values, assign a font color that should be readable. \n    rgb.push($.luma(rgb) > 125 ?\n      '#000'\n    :\n      '#fff'\n    );\n\n    // Cache.\n    return this.ids[uid] = rgb;\n  }\n};\nexport default IDColor;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar IDHighlight = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Highlight by User ID',\n      cb:   this.node\n    });\n  },\n\n  uniqueID: null,\n\n  node() {\n    if (this.nodes.uniqueIDRoot) { $.on(this.nodes.uniqueIDRoot, 'click', IDHighlight.click(this)); }\n    if (this.nodes.capcode) { $.on(this.nodes.capcode,      'click', IDHighlight.click(this)); }\n    if (!this.isClone) { return IDHighlight.set(this); }\n  },\n\n  set(post) {\n    const match = (post.info.uniqueID || post.info.capcode) === IDHighlight.uniqueID;\n    return $[match ? 'addClass' : 'rmClass'](post.nodes.post, 'highlight');\n  },\n\n  click(post) { return function() {\n    const uniqueID = post.info.uniqueID || post.info.capcode;\n    IDHighlight.uniqueID = IDHighlight.uniqueID === uniqueID ? null : uniqueID;\n    return g.posts.forEach(IDHighlight.set);\n  }; }\n};\nexport default IDHighlight;\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar IDPostCount = {\n  init() {\n    if ((g.VIEW !== 'thread') || !Conf['Count Posts by ID']) { return; }\n    Callbacks.Thread.push({\n      name: 'Count Posts by ID',\n      cb() { return IDPostCount.thread = this; }\n    });\n    return Callbacks.Post.push({\n      name: 'Count Posts by ID',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.nodes.uniqueID && (this.thread === IDPostCount.thread)) {\n      return $.on(this.nodes.uniqueID, 'mouseover', IDPostCount.count);\n    }\n  },\n\n  count() {\n    const {uniqueID} = Get.postFromNode(this).info;\n    let n = 0;\n    IDPostCount.thread.posts.forEach(function(post) {\n      if (post.info.uniqueID === uniqueID) { return n++; }\n    });\n    return this.title = `${n} post${n === 1 ? '' : 's'} by this ID`;\n  }\n};\nexport default IDPostCount;\n","import $ from \"../platform/$\";\nimport Callbacks from \"../classes/Callbacks\";\nimport { g } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ModContact = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !['index', 'thread'].includes(g.VIEW)) { return; }\n    return Callbacks.Post.push({\n      name: 'Mod Contact Links',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    let moved;\n    if (this.isClone || !$.hasOwn(ModContact.specific, this.info.capcode)) { return; }\n    const links = $.el('span', {className: 'contact-links brackets-wrap'});\n    $.extend(links, ModContact.template(this.info.capcode));\n    $.after(this.nodes.capcode, links);\n    if ((moved = this.info.comment.match(/This thread was moved to >>>\\/(\\w+)\\//)) && $.hasOwn(ModContact.moveNote, moved[1])) {\n      const moveNote = $.el('div', {className: 'move-note'});\n      $.extend(moveNote, ModContact.moveNote[moved[1]]);\n      return $.add(this.nodes.post, moveNote);\n    }\n  },\n\n  template(capcode) {\n    return {innerHTML: \"<a href=\\\"https://www.4chan.org/feedback\\\" target=\\\"_blank\\\">feedback</a>\" + (ModContact.specific[capcode]()).innerHTML};\n  },\n\n  specific: {\n    Mod() { return {innerHTML: \" <a href=\\\"https://www.4chan-x.net/4chan-irc.html\\\" target=\\\"_blank\\\">IRC</a>\"}; },\n    Manager() { return ModContact.specific.Mod(); },\n    Developer() { return {innerHTML: \" <a href=\\\"https://github.com/4chan\\\" target=\\\"_blank\\\">github</a>\"}; },\n    Admin() { return {innerHTML: \" <a href=\\\"https://twitter.com/hiroyuki_ni\\\" target=\\\"_blank\\\">twitter</a>\"}; }\n  },\n\n  moveNote: {\n    qa: {innerHTML: \"Moving a thread to /qa/ does not imply mods will read it. If you wish to contact mods, use <a href=\\\"https://www.4chan.org/feedback\\\" target=\\\"_blank\\\">feedback</a><span class=\\\"invisible\\\"> (https://www.4chan.org/feedback)</span> or <a href=\\\"https://www.4chan-x.net/4chan-irc.html\\\" target=\\\"_blank\\\">IRC</a><span class=\\\"invisible\\\"> (https://www.4chan-x.net/4chan-irc.html)</span>.\"}\n  }\n};\nexport default ModContact;\n","import { Conf, g } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst NormalizeURL = {\n  init() {\n    if (!Conf['Normalize URL']) { return; }\n\n    let pathname = location.pathname.split(/\\/+/);\n    if (g.SITE.software === 'yotsuba') {\n      switch (g.VIEW) {\n        case 'thread':\n          pathname[2] = 'thread';\n          pathname = pathname.slice(0, 4);\n          break;\n        case 'index':\n          pathname = pathname.slice(0, 3);\n          break;\n      }\n    }\n    pathname = pathname.join('/');\n    if (location.pathname !== pathname) {\n      return history.replaceState(history.state, '', `${location.protocol}//${location.host}${pathname}${location.hash}`);\n    }\n  }\n};\nexport default NormalizeURL;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, g, E } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar PostJumper = { \n  init() {\n    if (!Conf['Unique ID and Capcode Navigation'] || !['index', 'thread'].includes(g.VIEW)) { return; }\n\n    this.buttons = this.makeButtons();\n\n    return Callbacks.Post.push({\n      name: 'Post Jumper',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) {\n      for (var buttons of $$('.postJumper', this.nodes.info)) {\n        PostJumper.addListeners(buttons);\n      }\n      return;\n    }\n\n    if (this.nodes.uniqueIDRoot) {\n      PostJumper.addButtons(this,'uniqueID');\n    }\n\n    if (this.nodes.capcode) {\n      return PostJumper.addButtons(this,'capcode');\n    }\n  },\n\n  addButtons(post,type) {\n    const value = post.info[type];\n    const buttons = PostJumper.buttons.cloneNode(true);\n    $.extend(buttons.dataset, {type, value});\n    $.after(post.nodes[type+(type === 'capcode' ? '' : 'Root')], buttons);\n    return PostJumper.addListeners(buttons);\n  },\n\n  addListeners(buttons) {\n    $.on(buttons.firstChild, 'click', PostJumper.buttonClick);\n    return $.on(buttons.lastChild, 'click', PostJumper.buttonClick);\n  },\n\n  buttonClick() {\n    let toJumper;\n    const dir = $.hasClass(this, 'prev') ? -1 : 1;\n    if (toJumper = PostJumper.find(this.parentNode, dir)) {\n      return PostJumper.scroll(this.parentNode, toJumper);\n    }\n  },\n\n  find(jumper, dir) {\n    const {type, value} = jumper.dataset;\n    const xpath = `span[contains(@class,\\\"postJumper\\\") and @data-value=\\\"${value}\\\" and @data-type=\\\"${type}\\\"]`;\n    const axis = dir < 0 ? 'preceding' : 'following';\n    let jumper2 = jumper;\n    while (jumper2 = $.x(`${axis}::${xpath}`, jumper2)) {\n      if (jumper2.getBoundingClientRect().height) { return jumper2; }\n    }\n    if (jumper2 = $.x(`(//${xpath})[${dir < 0 ? 'last()' : '1'}]`)) {\n      if (jumper2.getBoundingClientRect().height) { return jumper2; }\n    }\n    while ((jumper2 = $.x(`${axis}::${xpath}`, jumper2)) && (jumper2 !== jumper)) {\n      if (jumper2.getBoundingClientRect().height) { return jumper2; }\n    }\n    return null;\n  },\n\n  makeButtons() {\n    const charPrev = '\\u23EB';\n    const charNext = '\\u23EC';\n    const classPrev = 'prev';\n    const classNext = 'next';\n    const span = $.el('span',\n      {className: 'postJumper'});\n    $.extend(span, {innerHTML: \"<a href=\\\"javascript:;\\\" class=\\\"\" + E(classPrev) + \"\\\">\" + E(charPrev) + \"</a><a href=\\\"javascript:;\\\" class=\\\"\" + E(classNext) + \"\\\">\" + E(charNext) + \"</a>\"});\n    return span;\n  },\n\n  scroll(fromJumper, toJumper) {\n    const prevPos = fromJumper.getBoundingClientRect().top;\n    const destPos = toJumper.getBoundingClientRect().top;\n    return window.scrollBy(0, destPos-prevPos);\n  }\n};\nexport default PostJumper;\n","import Notice from \"../classes/Notice\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PSA = {\n  init() {\n    let el;\n    if ((g.SITE.software === 'yotsuba') && (g.BOARD.ID === 'qa')) {\n      const announcement = {innerHTML: \"Stay in touch with your <a href=\\\"https://www.4chan-x.net/qa_friends.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">/qa/ friends</a>!\"};\n      el = $.el('div', {className: 'fcx-announcement'}, announcement);\n      $.onExists(doc, '.boardBanner', banner => $.after(banner, el));\n    }\n    if ('samachan.org' in Conf['siteProperties'] && !Conf['PSAseen'].includes('samachan')) {\n      el = $.el('span',\n        {innerHTML: \"<a href=\\\"https://sushigirl.us/yakuza/res/776.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Looking for a new home?<br>Some former Samachan users are regrouping on SushiChan.</a><br>(a message from 4chan X)\"});\n      return Main.ready(function() {\n        new Notice('info', el);\n        Conf['PSAseen'].push('samachan');\n        return $.set('PSAseen', Conf['PSAseen']);});\n    }\n  }\n};\nexport default PSA;\n","import Header from \"../General/Header\";\nimport { Conf, doc, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar PSAHiding = {\n  init() {\n    if (!Conf['Announcement Hiding'] || !g.SITE.selectors.psa) { return; }\n    $.addClass(doc, 'hide-announcement');\n    $.onExists(doc, g.SITE.selectors.psa, this.setup);\n    return $.ready(function() {\n      if (!$(g.SITE.selectors.psa)) { return $.rmClass(doc, 'hide-announcement'); }\n    });\n  },\n\n  setup(psa) {\n    let btn, hr;\n    PSAHiding.psa = psa;\n    PSAHiding.text = psa.dataset.utc ?? psa.innerHTML;\n    if (g.SITE.selectors.psaTop && (hr = $(g.SITE.selectors.psaTop)?.previousElementSibling) && (hr.nodeName === 'HR')) {\n      PSAHiding.hr = hr;\n    }\n    PSAHiding.content = $.el('div');\n\n    const entry = {\n      el: $.el('a', {\n        textContent: 'Show announcement',\n        className: 'show-announcement',\n        href: 'javascript:;'\n      }\n      ),\n      order: 50,\n      open() { return psa.hidden; }\n    };\n    Header.menu.addEntry(entry);\n    $.on(entry.el, 'click', PSAHiding.toggle);\n\n    PSAHiding.btn = (btn = $.el('a', {\n      title:       'Mark announcement as read and hide.',\n      className:   'hide-announcement-button',\n      href:        'javascript:;',\n      textContent: '➖︎',\n    }\n    ));\n    $.on(btn, 'click', PSAHiding.toggle);\n    if (psa.firstChild?.tagName === 'HR') {\n      $.after(psa.firstChild, btn);\n    } else {\n      $.prepend(psa, btn);\n    }\n\n    PSAHiding.sync(Conf['hiddenPSAList']);\n    $.rmClass(doc, 'hide-announcement');\n\n    return $.sync('hiddenPSAList', PSAHiding.sync);\n  },\n\n  toggle() {\n    const hide = $.hasClass(this, 'hide-announcement-button');\n    const set = function(hiddenPSAList) {\n      if (hide) {\n        return hiddenPSAList[g.SITE.ID] = PSAHiding.text;\n      } else {\n        return delete hiddenPSAList[g.SITE.ID];\n      }\n    };\n    set(Conf['hiddenPSAList']);\n    PSAHiding.sync(Conf['hiddenPSAList']);\n    return $.get('hiddenPSAList', Conf['hiddenPSAList'], function({hiddenPSAList}) {\n      set(hiddenPSAList);\n      return $.set('hiddenPSAList', hiddenPSAList);\n    });\n  },\n\n  sync(hiddenPSAList) {\n    const {psa, content} = PSAHiding;\n    psa.hidden = (hiddenPSAList[g.SITE.ID] === PSAHiding.text);\n    // Remove content to prevent autoplaying sounds from hidden announcements\n    if (psa.hidden) {\n      $.add(content, [...psa.childNodes]);\n    } else {\n      $.add(psa, [...content.childNodes]);\n    }\n    if (PSAHiding.hr) PSAHiding.hr.hidden = psa.hidden;\n  }\n};\nexport default PSAHiding;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, doc, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar RemoveSpoilers = {\n  init() {\n    if (Conf['Reveal Spoilers']) {\n      $.addClass(doc, 'reveal-spoilers');\n    }\n\n    if (!Conf['Remove Spoilers']) { return; }\n\n    Callbacks.Post.push({\n      name: 'Reveal Spoilers',\n      cb:   this.node\n    });\n\n    if (g.VIEW === 'archive') {\n      return $.ready(() => RemoveSpoilers.unspoiler($.id('arc-list')));\n    }\n  },\n\n  node() {\n    return RemoveSpoilers.unspoiler(this.nodes.comment);\n  },\n\n  unspoiler(el) {\n    const spoilers = $$(g.SITE.selectors.spoiler, el);\n    for (var spoiler of spoilers) {\n      var span = $.el('span', {className: 'removed-spoiler'});\n      $.replace(spoiler, span);\n      $.add(span, [...spoiler.childNodes]);\n    }\n  }\n};\nexport default RemoveSpoilers;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ThreadLinks = {\n  init() {\n    if ((g.VIEW !== 'index') || !Conf['Open Threads in New Tab']) { return; }\n\n    Callbacks.Post.push({\n      name: 'Thread Links',\n      cb:   this.node\n    });\n    return Callbacks.CatalogThread.push({\n      name: 'Thread Links',\n      cb:   this.catalogNode\n    });\n  },\n\n  node() {\n    if (this.isReply || this.isClone) { return; }\n    return ThreadLinks.process(this.nodes.reply);\n  },\n\n  catalogNode() {\n    return ThreadLinks.process(this.nodes.thumb.parentNode);\n  },\n\n  process(link) {\n    return link.target = '_blank';\n  }\n};\nexport default ThreadLinks;\n","import { g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst Tinyboard = {\n  init() {\n    if (g.SITE.software !== 'tinyboard') { return; }\n    if (g.VIEW === 'thread') {\n      return Main.ready(() => $.global(function() {\n        let base;\n        let {boardID, threadID} = document.currentScript.dataset;\n        threadID = +threadID;\n        const form = document.querySelector('form[name=\"post\"]');\n        window.$(document).ajaxComplete(function(event, request, settings) {\n          let postID;\n          if (settings.url !== form.action) { return; }\n          if (!(postID = +request.responseJSON?.id)) { return; }\n          const detail = {boardID, threadID, postID};\n          try {\n            const {redirect, noko} = request.responseJSON;\n            if (redirect && (originalNoko != null) && !originalNoko && !noko) {\n              detail.redirect = redirect;\n            }\n          } catch (error) {}\n          event = new CustomEvent('QRPostSuccessful', {bubbles: true, detail});\n          return document.dispatchEvent(event);\n        });\n        var originalNoko = window.tb_settings?.ajax?.always_noko_replies;\n        return (((base = window.tb_settings || (window.tb_settings = {}))).ajax || (base.ajax = {})).always_noko_replies = true;\n      }\n      , {boardID: g.BOARD.ID, threadID: g.THREADID}));\n    }\n  }\n};\nexport default Tinyboard;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar MarkNewIPs = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || (g.VIEW !== 'thread') || !Conf['Mark New IPs']) { return; }\n    return Callbacks.Thread.push({\n      name: 'Mark New IPs',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    MarkNewIPs.ipCount = this.ipCount;\n    MarkNewIPs.postCount = this.posts.keys.length;\n    return $.on(d, 'ThreadUpdate', MarkNewIPs.onUpdate);\n  },\n\n  onUpdate(e) {\n    let fullID;\n    const {ipCount, postCount, newPosts, deletedPosts} = e.detail;\n    if (ipCount == null) { return; }\n\n    switch (ipCount - MarkNewIPs.ipCount) {\n      case (postCount - MarkNewIPs.postCount) + deletedPosts.length:\n        var i = MarkNewIPs.ipCount;\n        for (fullID of newPosts) {\n          MarkNewIPs.markNew(g.posts.get(fullID), ++i);\n        }\n        break;\n      case -deletedPosts.length:\n        for (fullID of newPosts) {\n          MarkNewIPs.markOld(g.posts.get(fullID));\n        }\n        break;\n    }\n    MarkNewIPs.ipCount = ipCount;\n    return MarkNewIPs.postCount = postCount;\n  },\n\n  markNew(post, ipCount) {\n    const suffix = ((Math.floor(ipCount / 10)) % 10) === 1 ?\n      'th'\n    :\n      ['st', 'nd', 'rd'][(ipCount % 10) - 1] || 'th'; // fuck switches\n    const counter = $.el('span', {\n      className: 'ip-counter',\n      textContent: `(${ipCount})`\n    }\n    );\n    post.nodes.nameBlock.title = `This is the ${ipCount}${suffix} IP in the thread.`;\n    $.add(post.nodes.nameBlock, [$.tn(' '), counter]);\n    return $.addClass(post.nodes.root, 'new-ip');\n  },\n\n  markOld(post) {\n    post.nodes.nameBlock.title = 'Not the first post from this IP.';\n    return $.addClass(post.nodes.root, 'old-ip');\n  }\n};\nexport default MarkNewIPs;\n","import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, E, doc, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { MINUTE, SECOND } from \"../platform/helpers\";\n\nvar ThreadStats = {\n  postCount: 0,\n  fileCount: 0,\n  postIndex: 0,\n\n  init() {\n    let sc;\n    if ((g.VIEW !== 'thread') || !Conf['Thread Stats']) { return; }\n\n    if (Conf['Page Count in Stats']) {\n      this[g.SITE.isPrunedByAge?.(g.BOARD) ? 'showPurgePos' : 'showPage'] = true;\n    }\n\n    const statsHTML = {innerHTML: \"<span id=\\\"post-count\\\">?</span> / <span id=\\\"file-count\\\">?</span>\" + ((Conf[\"IP Count in Stats\"] && g.SITE.hasIPCount) ? \" / <span id=\\\"ip-count\\\">?</span>\" : \"\") + ((Conf[\"Page Count in Stats\"]) ? \" / <span id=\\\"page-count\\\">?</span>\" : \"\")};\n    let statsTitle = 'Posts / Files';\n    if (Conf['IP Count in Stats'] && g.SITE.hasIPCount) { statsTitle += ' / IPs'; }\n    if (Conf['Page Count in Stats']) {\n      if (this.showPurgePos) {\n        statsTitle += ' / Purge Position';\n      } else {\n        statsTitle += ' / Page';\n        if (Conf['Purge Position']) statsTitle += ' (Purge Position)';\n      }\n    }\n\n    if (Conf['Updater and Stats in Header']) {\n      this.dialog = (sc = $.el('span', {\n        id:    'thread-stats',\n        title: statsTitle\n      }\n      ));\n      $.extend(sc, statsHTML);\n      Header.addShortcut('stats', sc, 200);\n\n    } else {\n      this.dialog = (sc = UI.dialog('thread-stats',\n        {innerHTML: \"<div class=\\\"move\\\" title=\\\"\" + E(statsTitle) + \"\\\">\" + (statsHTML).innerHTML + \"</div>\"}));\n      $.addClass(doc, 'float');\n      $.ready(() => $.add(d.body, sc));\n    }\n\n    this.postCountEl = $('#post-count', sc);\n    this.fileCountEl = $('#file-count', sc);\n    this.ipCountEl   = $('#ip-count',   sc);\n    this.pageCountEl = $('#page-count', sc);\n\n    if (this.pageCountEl) { $.on(this.pageCountEl, 'click', ThreadStats.fetchPage); }\n\n    return Callbacks.Thread.push({\n      name: 'Thread Stats',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    ThreadStats.thread = this;\n    ThreadStats.count();\n    ThreadStats.update();\n    ThreadStats.fetchPage();\n    $.on(d, 'PostsInserted', () => $.queueTask(ThreadStats.onPostsInserted));\n    return $.on(d, 'ThreadUpdate', ThreadStats.onUpdate);\n  },\n\n  count() {\n    const {posts} = ThreadStats.thread;\n    const n = posts.keys.length;\n    for (let i = ThreadStats.postIndex, end = n; i < end; i++) {\n      var post = posts.get(posts.keys[i]);\n      if (!post.isFetchedQuote) {\n        ThreadStats.postCount++;\n        ThreadStats.fileCount += post.files.length;\n      }\n    }\n    ThreadStats.postIndex = n;\n  },\n\n  onUpdate(e) {\n    if (e.detail[404]) { return; }\n    const {postCount, fileCount} = e.detail;\n    $.extend(ThreadStats, {postCount, fileCount});\n    ThreadStats.postIndex = ThreadStats.thread.posts.keys.length;\n    ThreadStats.update();\n    if (ThreadStats.showPage && (ThreadStats.pageCountEl.textContent !== '1')) {\n      return ThreadStats.fetchPage();\n    }\n  },\n\n  onPostsInserted() {\n    if (ThreadStats.thread.posts.keys.length <= ThreadStats.postIndex) { return; }\n    ThreadStats.count();\n    ThreadStats.update();\n    if (ThreadStats.showPage && (ThreadStats.pageCountEl.textContent !== '1')) {\n      return ThreadStats.fetchPage();\n    }\n  },\n\n  update() {\n    const {thread, postCountEl, fileCountEl, ipCountEl} = ThreadStats;\n    postCountEl.textContent = ThreadStats.postCount;\n    fileCountEl.textContent = ThreadStats.fileCount;\n    if (ipCountEl) ipCountEl.textContent = thread.ipCount ?? '?';\n    postCountEl.classList.toggle('warning', (thread.postLimit && !thread.isSticky));\n    fileCountEl.classList.toggle('warning', (thread.fileLimit && !thread.isSticky));\n  },\n\n  fetchPage() {\n    if (!ThreadStats.pageCountEl) { return; }\n    clearTimeout(ThreadStats.timeout);\n    if (ThreadStats.thread.isDead) {\n      ThreadStats.pageCountEl.textContent = 'Dead';\n      $.addClass(ThreadStats.pageCountEl, 'warning');\n      return;\n    }\n    ThreadStats.timeout = setTimeout(\n      ThreadStats.fetchPage,\n      Conf['Purge Position'] && ThreadStats.pageCountEl.classList.contains('warning')\n        ? (5 * SECOND) : (2 * MINUTE)\n    );\n    $.whenModified(\n      g.SITE.urls.threadsListJSON(ThreadStats.thread),\n      'ThreadStats',\n      ThreadStats.onThreadsLoad\n    );\n  },\n\n  onThreadsLoad() {\n    if (this.status === 200) {\n      let page, thread;\n      if (ThreadStats.showPurgePos) {\n        let purgePos = 1;\n        for (page of this.response) {\n          for (thread of page.threads) {\n            if (thread.no < ThreadStats.thread.ID) {\n              purgePos++;\n            }\n          }\n        }\n        ThreadStats.pageCountEl.textContent = purgePos;\n        ThreadStats.pageCountEl.classList.toggle('warning', (purgePos === 1));\n      } else {\n        let nThreads;\n        let i = (nThreads = 0);\n        for (page of this.response) {\n          nThreads += page.threads.length;\n        }\n        for (let pageNum = 0; pageNum < this.response.length; pageNum++) {\n          page = this.response[pageNum];\n          for (thread of page.threads) {\n            if (thread.no === ThreadStats.thread.ID) {\n              ThreadStats.pageCountEl.textContent = pageNum + 1;\n              const hasWarning = (i >= (nThreads - this.response[0].threads.length));\n              ThreadStats.pageCountEl.classList.toggle('warning', hasWarning);\n              if (hasWarning && Conf['Purge Position']) {\n                ThreadStats.pageCountEl.textContent += ` (${nThreads - i - 1})`;\n              }\n              ThreadStats.lastPageUpdate = new Date(thread.last_modified * SECOND);\n              ThreadStats.retry();\n              return;\n            }\n            i++;\n          }\n        }\n      }\n    } else if (this.status === 304) {\n      ThreadStats.retry();\n    }\n  },\n\n  retry() {\n    // If thread data is stale (modification date given < time of last post), try again.\n    // Skip this on vichan sites due to sage posts not updating modification time in threads.json.\n    if (\n      !ThreadStats.showPage ||\n      (ThreadStats.pageCountEl.textContent === '1') ||\n      !!g.SITE.threadModTimeIgnoresSage ||\n      (ThreadStats.thread.posts.get(ThreadStats.thread.lastPost).info.date <= ThreadStats.lastPageUpdate)\n    ) { return; }\n    clearTimeout(ThreadStats.timeout);\n    ThreadStats.timeout = setTimeout(ThreadStats.fetchPage, 5 * SECOND);\n  }\n};\nexport default ThreadStats;\n","import { g, Conf } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PassLink = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !Conf['Pass Link']) { return; }\n    return Main.ready(this.ready);\n  },\n\n  ready() {\n    let styleSelector;\n    if (!(styleSelector = $.id('styleSelector'))) { return; }\n\n    const passLink = $.el('span',\n      {className: 'brackets-wrap pass-link-container'});\n    $.extend(passLink, {innerHTML: \"<a href=\\\"javascript:;\\\">4chan Pass</a>\"});\n    $.on(passLink.firstElementChild, 'click', () => window.open(`//sys.${location.hostname.split('.')[1]}.org/auth`,\n      Date.now(),\n      'width=500,height=280,toolbar=0'));\n    return $.before(styleSelector.previousSibling, [passLink, $.tn('\\u00A0\\u00A0')]);\n  }\n};\nexport default PassLink;\n","import Callbacks from \"../classes/Callbacks\";\nimport Fetcher from \"../classes/Fetcher\";\nimport Get from \"../General/Get\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport Unread from \"../Monitoring/Unread\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteInline = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Quote Inlining']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    return Callbacks.Post.push({\n      name: 'Quote Inlining',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    const {process} = QuoteInline;\n    const {isClone} = this;\n    for (var link of this.nodes.quotelinks.concat([...this.nodes.backlinks], this.nodes.archivelinks)) {\n      process(link, isClone);\n    }\n  },\n\n  process(link, clone) {\n    if (Conf['Quote Hash Navigation']) {\n      if (!clone) { $.after(link, QuoteInline.qiQuote(link, $.hasClass(link, 'filtered'))); }\n    }\n    return $.on(link, 'click', QuoteInline.toggle);\n  },\n\n  qiQuote(link, hidden) {\n    let name = \"hashlink\";\n    if (hidden) { name += \" filtered\"; }\n    return $.el('a', {\n      className: name,\n      textContent: '#',\n      href: link.href\n    }\n    );\n  },\n\n  toggle(e) {\n    if ($.modifiedClick(e)) { return; }\n\n    const {boardID, threadID, postID} = Get.postDataFromLink(this);\n    if (Conf['Inline Cross-thread Quotes Only'] && (g.VIEW === 'thread') && g.posts.get(`${boardID}.${postID}`)?.nodes.root.offsetParent) { return; } // exists and not hidden\n    if ($.hasClass(doc, 'catalog-mode')) { return; }\n\n    e.preventDefault();\n    const quoter = Get.postFromNode(this);\n    const {context} = quoter;\n    if ($.hasClass(this, 'inlined')) {\n      QuoteInline.rm(this, boardID, threadID, postID, context);\n    } else {\n      if ($.x(`ancestor::div[@data-full-i-d='${boardID}.${postID}']`, this)) { return; }\n      QuoteInline.add(this, boardID, threadID, postID, context, quoter);\n    }\n    return this.classList.toggle('inlined');\n  },\n\n  findRoot(quotelink, isBacklink) {\n    if (isBacklink) {\n      return $.x('ancestor::*[parent::*[contains(@class,\"post\")]][1]', quotelink);\n    } else {\n      return $.x('ancestor-or-self::*[parent::blockquote][1]', quotelink);\n    }\n  },\n\n  add(quotelink, boardID, threadID, postID, context, quoter) {\n    let post;\n    const isBacklink = $.hasClass(quotelink, 'backlink');\n    const inline = $.el('div',\n      {className: 'inline'});\n    inline.dataset.fullID = `${boardID}.${postID}`;\n    const root = QuoteInline.findRoot(quotelink, isBacklink);\n    $.after(root, inline);\n\n    const qroot = $.x('ancestor::*[contains(@class,\"postContainer\")][1]', root);\n\n    $.addClass(qroot, 'hasInline');\n    new Fetcher(boardID, threadID, postID, inline, quoter);\n\n    if (!(\n      (post = g.posts.get(`${boardID}.${postID}`)) &&\n      (context.thread === post.thread)\n    )) { return; }\n\n    // Hide forward post if it's a backlink of a post in this thread.\n    // Will only unhide if there's no inlined backlinks of it anymore.\n    if (isBacklink && Conf['Forward Hiding']) {\n      $.addClass(post.nodes.root, 'forwarded');\n      post.forwarded++ || (post.forwarded = 1);\n    }\n\n    // Decrease the unread count if this post\n    // is in the array of unread posts.\n    if (!Unread.posts) { return; }\n    return Unread.readSinglePost(post);\n  },\n\n  rm(quotelink, boardID, threadID, postID, context) {\n    let el;\n    let inlined;\n    const isBacklink = $.hasClass(quotelink, 'backlink');\n    // Select the corresponding inlined quote, and remove it.\n    let root = QuoteInline.findRoot(quotelink, isBacklink);\n    root = $.x(`following-sibling::div[@data-full-i-d='${boardID}.${postID}'][1]`, root);\n    const qroot = $.x('ancestor::*[contains(@class,\"postContainer\")][1]', root);\n    const {parentNode} = root;\n    $.rm(root);\n    $.event('PostsRemoved', null, parentNode);\n\n    if (!$('.inline', qroot)) {\n      $.rmClass(qroot, 'hasInline');\n    }\n\n    // Stop if it only contains text.\n    if (!(el = root.firstElementChild)) { return; }\n\n    // Dereference clone.\n    const post = g.posts.get(`${boardID}.${postID}`);\n    post.rmClone(el.dataset.clone);\n\n    // Decrease forward count and unhide.\n    if (Conf['Forward Hiding'] &&\n      isBacklink &&\n      (context.thread === g.threads.get(`${boardID}.${threadID}`)) &&\n      !--post.forwarded) {\n        delete post.forwarded;\n        $.rmClass(post.nodes.root, 'forwarded');\n      }\n\n    // Repeat.\n    while ((inlined = $('.inlined', el))) {\n      ({boardID, threadID, postID} = Get.postDataFromLink(inlined));\n      QuoteInline.rm(inlined, boardID, threadID, postID, context);\n      $.rmClass(inlined, 'inlined');\n    }\n  }\n};\nexport default QuoteInline;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport QuoteInline from \"./QuoteInline\";\nimport QuotePreview from \"./QuotePreview\";\nimport QuoteYou from \"./QuoteYou\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteBacklink = {\n  // Backlinks appending need to work for:\n  //  - previous, same, and following posts.\n  //  - existing and yet-to-exist posts.\n  //  - newly fetched posts.\n  //  - in copies.\n  // XXX what about order for fetched posts?\n  //\n  // First callback creates backlinks and add them to relevant containers.\n  // Second callback adds relevant containers into posts.\n  // This is is so that fetched posts can get their backlinks,\n  // and that as much backlinks are appended in the background as possible.\n  containers: dict(),\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Quote Backlinks']) { return; }\n\n    // Add a class to differentiate when backlinks are at\n    // the top (default) or bottom of a post\n    if (this.bottomBacklinks = Conf['Bottom Backlinks']) {\n      $.addClass(doc, 'bottom-backlinks');\n    }\n\n    Callbacks.Post.push({\n      name: 'Quote Backlinking Part 1',\n      cb:   this.firstNode\n    });\n    return Callbacks.Post.push({\n      name: 'Quote Backlinking Part 2',\n      cb:   this.secondNode\n    });\n  },\n  firstNode() {\n    if (this.isClone || !this.quotes.length || this.isRebuilt) { return; }\n    const markYours = Conf['Mark Quotes of You'] && QuoteYou.isYou(this);\n    const a = $.el('a', {\n      href: g.SITE.Build.postURL(this.board.ID, this.thread.ID, this.ID),\n      className: this.isHidden ? 'filtered backlink' : 'backlink',\n      textContent: Conf['backlink'].replace(/%(?:id|%)/g, x => ({'%id': this.ID, '%%': '%'})[x])\n    }\n    );\n    if (markYours) { $.add(a, QuoteYou.mark.cloneNode(true)); }\n    for (var quote of this.quotes) {\n      var post;\n      var containers = [QuoteBacklink.getContainer(quote)];\n      if ((post = g.posts.get(quote)) && post.nodes.backlinkContainer) {\n        // Don't add OP clones when OP Backlinks is disabled,\n        // as the clones won't have the backlink containers.\n        for (var clone of post.clones) {\n          containers.push(clone.nodes.backlinkContainer);\n        }\n      }\n      for (var container of containers) {\n        var link = a.cloneNode(true);\n        var nodes = container.firstChild ? [$.tn(' '), link] : [link];\n        if (Conf['Quote Previewing']) {\n          $.on(link, 'mouseover', QuotePreview.mouseover);\n        }\n        if (Conf['Quote Inlining']) {\n          $.on(link, 'click', QuoteInline.toggle);\n          if (Conf['Quote Hash Navigation']) {\n            var hash = QuoteInline.qiQuote(link, $.hasClass(link, 'filtered'));\n            nodes.push(hash);\n          }\n        }\n        $.add(container, nodes);\n      }\n    }\n  },\n  secondNode() {\n    if (this.isClone && (this.origin.isReply || Conf['OP Backlinks'])) {\n      this.nodes.backlinkContainer = $('.container', this.nodes.post);\n      return;\n    }\n    // Don't backlink the OP.\n    if (!this.isReply && !Conf['OP Backlinks']) { return; }\n    const container = QuoteBacklink.getContainer(this.fullID);\n    this.nodes.backlinkContainer = container;\n    if (QuoteBacklink.bottomBacklinks) {\n      return $.add(this.nodes.post, container);\n    } else {\n      return $.add(this.nodes.info, container);\n    }\n  },\n  getContainer(id) {\n    return this.containers[id] ||\n      (this.containers[id] = $.el('span', {className: 'container'}));\n  }\n};\nexport default QuoteBacklink;\n","import $ from \"../platform/$\";\nimport Callbacks from \"../classes/Callbacks\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport { g, Conf } from \"../globals/globals\";\nimport Get from \"../General/Get\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteCT = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Mark Cross-thread Quotes']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    // \\u00A0 is nbsp\n    this.mark = $.el('span', {\n      textContent: '\\u00A0(Cross-thread)',\n      className:   'qmark-ct'\n    }\n    );\n    return Callbacks.Post.push({\n      name: 'Mark Cross-thread Quotes',\n      cb:   this.node\n    });\n  },\n  node() {\n    // Stop there if it's a clone of a post in the same thread.\n    if (this.isClone && (this.thread === this.context.thread)) { return; }\n\n    const {board, thread} = this.context;\n    for (var quotelink of this.nodes.quotelinks) {\n      var {boardID, threadID} = Get.postDataFromLink(quotelink);\n      if (!threadID) { continue; } // deadlink\n      if (this.isClone) {\n        $.rm($('.qmark-ct', quotelink));\n      }\n      if ((boardID === board.ID) && (threadID !== thread.ID)) {\n        $.add(quotelink, QuoteCT.mark.cloneNode(true));\n      }\n    }\n  }\n};\nexport default QuoteCT;\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteOP = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Mark OP Quotes']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    // \\u00A0 is nbsp\n    this.mark = $.el('span', {\n      textContent: '\\u00A0(OP)',\n      className:   'qmark-op'\n    }\n    );\n    return Callbacks.Post.push({\n      name: 'Mark OP Quotes',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    // Stop there if it's a clone of a post in the same thread.\n    let i, quotelink, quotes;\n    if (this.isClone && (this.thread === this.context.thread)) { return; }\n    // Stop there if there's no quotes in that post.\n    if (!(quotes = this.quotes).length) { return; }\n    const {quotelinks} = this.nodes;\n\n    // rm (OP) from cross-thread quotes.\n    if (this.isClone && quotes.includes(this.thread.fullID)) {\n      i = 0;\n      while ((quotelink = quotelinks[i++])) {\n        $.rm($('.qmark-op', quotelink));\n      }\n    }\n\n    const {fullID} = this.context.thread;\n    // add (OP) to quotes quoting this context's OP.\n\n    if (!quotes.includes(fullID)) { return; }\n    i = 0;\n    while ((quotelink = quotelinks[i++])) {\n      var {boardID, postID} = Get.postDataFromLink(quotelink);\n      if (`${boardID}.${postID}` === fullID) {\n        $.add(quotelink, QuoteOP.mark.cloneNode(true));\n      }\n    }\n  }\n};\nexport default QuoteOP;\n","import Redirect from \"../Archive/Redirect\";\nimport Callbacks from \"../classes/Callbacks\";\nimport Post from \"../classes/Post\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Quotify = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Resurrect Quotes']) { return; }\n\n    $.addClass(doc, 'resurrect-quotes');\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    return Callbacks.Post.push({\n      name: 'Resurrect Quotes',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) {\n      this.nodes.archivelinks = $$('a.linkify.quotelink', this.nodes.comment);\n      return;\n    }\n    for (var link of $$('a.linkify', this.nodes.comment)) {\n      Quotify.parseArchivelink.call(this, link);\n    }\n    for (var deadlink of $$('.deadlink', this.nodes.comment)) {\n      Quotify.parseDeadlink.call(this, deadlink);\n    }\n  },\n\n  parseArchivelink(link) {\n    let m;\n    if (!(m = link.pathname.match(/^\\/([^/]+)\\/thread\\/S?(\\d+)\\/?$/))) { return; }\n    if (['boards.4chan.org', 'boards.4channel.org'].includes(link.hostname)) { return; }\n    const boardID  = m[1];\n    const threadID = m[2];\n    const postID   = link.hash.match(/^#[pq]?(\\d+)$|$/)[1] || threadID;\n    if (Redirect.to('post', {boardID, postID})) {\n      $.addClass(link, 'quotelink');\n      $.extend(link.dataset, {boardID, threadID, postID});\n      return this.nodes.archivelinks.push(link);\n    }\n  },\n\n  parseDeadlink(deadlink) {\n    let a, m, post, postID;\n    if ($.hasClass(deadlink.parentNode, 'prettyprint')) {\n      // Don't quotify deadlinks inside code tags,\n      // un-`span` them.\n      // This won't be necessary once 4chan\n      // stops quotifying inside code tags:\n      // https://github.com/4chan/4chan-JS/issues/77\n      Quotify.fixDeadlink(deadlink);\n      return;\n    }\n\n    const quote = deadlink.textContent;\n    if (!(postID = quote.match(/\\d+$/)?.[0])) { return; }\n    if (postID[0] === '0') {\n      // Fix quotelinks that start with a `0`.\n      Quotify.fixDeadlink(deadlink);\n      return;\n    }\n    const boardID = (m = quote.match(/^>>>\\/([a-z\\d]+)/)) ?\n      m[1]\n    :\n      this.board.ID;\n    const quoteID = `${boardID}.${postID}`;\n\n    if (post = g.posts.get(quoteID)) {\n      if (!post.isDead) {\n        // Don't (Dead) when quotifying in an archived post,\n        // and we know the post still exists.\n        a = $.el('a', {\n          href:        g.SITE.Build.postURL(boardID, post.thread.ID, postID),\n          className:   'quotelink',\n          textContent: quote\n        }\n        );\n      } else {\n        // Replace the .deadlink span if we can redirect.\n        a = $.el('a', {\n          href:        g.SITE.Build.postURL(boardID, post.thread.ID, postID),\n          className:   'quotelink deadlink',\n          textContent: quote\n        }\n        );\n        $.add(a, Post.deadMark.cloneNode(true));\n        $.extend(a.dataset, {boardID, threadID: post.thread.ID, postID});\n      }\n\n    } else {\n      const redirect = Redirect.to('thread', {boardID, threadID: 0, postID});\n      const fetchable = Redirect.to('post', {boardID, postID});\n      if (redirect || fetchable) {\n        // Replace the .deadlink span if we can redirect or fetch the post.\n        a = $.el('a', {\n          href:        redirect || 'javascript:;',\n          className:   'deadlink',\n          textContent: quote\n        }\n        );\n        $.add(a, Post.deadMark.cloneNode(true));\n        if (fetchable) {\n          // Make it function as a normal quote if we can fetch the post.\n          $.addClass(a, 'quotelink');\n          $.extend(a.dataset, {boardID, postID});\n        }\n      }\n    }\n\n    if (!this.quotes.includes(quoteID)) { this.quotes.push(quoteID); }\n\n    if (!a) {\n      $.add(deadlink, Post.deadMark.cloneNode(true));\n      return;\n    }\n\n    $.replace(deadlink, a);\n    if ($.hasClass(a, 'quotelink')) {\n      return this.nodes.quotelinks.push(a);\n    }\n  },\n\n  fixDeadlink(deadlink) {\n    let el;\n    if (!(el = deadlink.previousSibling) || (el.nodeName === 'BR')) {\n      const green = $.el('span',\n        {className: 'quote'});\n      $.before(deadlink, green);\n      $.add(green, deadlink);\n    }\n    return $.replace(deadlink, [...deadlink.childNodes]);\n  }\n};\nexport default Quotify;\n","import $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst Polyfill = {\n  init() {\n    this.toBlob();\n    $.global(this.toBlob);\n    if (!Element.prototype.matches) { Element.prototype.matches = Element.prototype.mozMatchesSelector || Element.prototype.webkitMatchesSelector; }\n  },\n  // This function is converted to a string and then put in a script tag.\n  // Do NOT shorten to `toBlob() {`.\n  toBlob: function() {\n    if (HTMLCanvasElement.prototype.toBlob) { return; }\n    HTMLCanvasElement.prototype.toBlob = function(cb, type, encoderOptions) {\n      const url = this.toDataURL(type, encoderOptions);\n      const data = atob(url.slice(url.indexOf(',')+1));\n      // DataUrl to Binary code from Aeosynth's 4chan X repo\n      const l = data.length;\n      const ui8a = new Uint8Array(l);\n      for (let i = 0, end = l; i < end; i++) {\n        ui8a[i] = data.charCodeAt(i);\n      }\n      return cb(new Blob([ui8a], {type: type || 'image/png'}));\n    };\n  }\n};\nexport default Polyfill;\n",null,"import Redirect from \"../Archive/Redirect\";\nimport Board from \"../classes/Board\";\nimport Callbacks from \"../classes/Callbacks\";\nimport CatalogThreadNative from \"../classes/CatalogThreadNative\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Notice from \"../classes/Notice\";\nimport Post from \"../classes/Post\";\nimport SimpleDict from \"../classes/SimpleDict\";\nimport Thread from \"../classes/Thread\";\nimport Config from \"../config/Config\";\nimport Anonymize from \"../Filtering/Anonymize\";\nimport Filter from \"../Filtering/Filter\";\nimport PostHiding from \"../Filtering/PostHiding\";\nimport Recursive from \"../Filtering/Recursive\";\nimport ThreadHiding from \"../Filtering/ThreadHiding\";\nimport Index from \"../General/Index\";\nimport Settings from \"../General/Settings\";\nimport FappeTyme from \"../Images/FappeTyme\";\nimport Gallery from \"../Images/Gallery\";\nimport ImageCommon from \"../Images/ImageCommon\";\nimport ImageExpand from \"../Images/ImageExpand\";\nimport ImageHost from \"../Images/ImageHost\";\nimport ImageHover from \"../Images/ImageHover\";\nimport ImageLoader from \"../Images/ImageLoader\";\nimport Metadata from \"../Images/Metadata\";\nimport RevealSpoilers from \"../Images/RevealSpoilers\";\nimport Sauce from \"../Images/Sauce\";\nimport Volume from \"../Images/Volume\";\nimport Linkify from \"../Linkification/Linkify\";\nimport ArchiveLink from \"../Menu/ArchiveLink\";\nimport CopyTextLink from \"../Menu/CopyTextLink\";\nimport DeleteLink from \"../Menu/DeleteLink\";\nimport DownloadLink from \"../Menu/DownloadLink\";\nimport ReportLink from \"../Menu/ReportLink\";\nimport AntiAutoplay from \"../Miscellaneous/AntiAutoplay\";\nimport Banner from \"../Miscellaneous/Banner\";\nimport CatalogLinks from \"../Miscellaneous/CatalogLinks\";\nimport CustomCSS from \"../Miscellaneous/CustomCSS\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport ExpandThread from \"../Miscellaneous/ExpandThread\";\nimport FileInfo from \"../Miscellaneous/FileInfo\";\nimport Flash from \"../Miscellaneous/Flash\";\nimport Fourchan from \"../Miscellaneous/Fourchan\";\nimport IDColor from \"../Miscellaneous/IDColor\";\nimport IDHighlight from \"../Miscellaneous/IDHighlight\";\nimport IDPostCount from \"../Miscellaneous/IDPostCount\";\nimport Keybinds from \"../Miscellaneous/Keybinds\";\nimport ModContact from \"../Miscellaneous/ModContact\";\nimport Nav from \"../Miscellaneous/Nav\";\nimport NormalizeURL from \"../Miscellaneous/NormalizeURL\";\nimport PostJumper from \"../Miscellaneous/PostJumper\";\nimport PSA from \"../Miscellaneous/PSA\";\nimport PSAHiding from \"../Miscellaneous/PSAHiding\";\nimport RelativeDates from \"../Miscellaneous/RelativeDates\";\nimport RemoveSpoilers from \"../Miscellaneous/RemoveSpoilers\";\nimport ThreadLinks from \"../Miscellaneous/ThreadLinks\";\nimport Time from \"../Miscellaneous/Time\";\nimport Tinyboard from \"../Miscellaneous/Tinyboard\";\nimport Favicon from \"../Monitoring/Favicon\";\nimport MarkNewIPs from \"../Monitoring/MarkNewIPs\";\nimport ReplyPruning from \"../Monitoring/ReplyPruning\";\nimport ThreadStats from \"../Monitoring/ThreadStats\";\nimport ThreadUpdater from \"../Monitoring/ThreadUpdater\";\nimport ThreadWatcher from \"../Monitoring/ThreadWatcher\";\nimport Unread from \"../Monitoring/Unread\";\nimport UnreadIndex from \"../Monitoring/UnreadIndex\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport PassLink from \"../Posting/PassLink\";\nimport PostRedirect from \"../Posting/PostRedirect\";\nimport QR from \"../Posting/QR\";\nimport QuoteBacklink from \"../Quotelinks/QuoteBacklink\";\nimport QuoteCT from \"../Quotelinks/QuoteCT\";\nimport QuoteInline from \"../Quotelinks/QuoteInline\";\nimport QuoteOP from \"../Quotelinks/QuoteOP\";\nimport QuotePreview from \"../Quotelinks/QuotePreview\";\nimport QuoteStrikeThrough from \"../Quotelinks/QuoteStrikeThrough\";\nimport QuoteThreading from \"../Quotelinks/QuoteThreading\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport Quotify from \"../Quotelinks/Quotify\";\nimport Site from \"../site/Site\";\nimport SW from \"../site/SW\";\nimport CSS from \"../css/CSS\";\nimport meta from '../../package.json';\nimport Header from \"../General/Header\";\nimport { c, Conf, d, doc, docSet, E, g } from \"../globals/globals\";\nimport Menu from \"../Menu/Menu\";\nimport BoardConfig from \"../General/BoardConfig\";\nimport CaptchaReplace from \"../Posting/Captcha.replace\";\nimport Get from \"../General/Get\";\nimport { dict, platform } from \"../platform/helpers\";\nimport Polyfill from \"../General/Polyfill\";\nimport RestoreDeletedFromArchive from \"../Archive/RestoreDeletedFromArchive\";\n// import Test from \"../General/Test\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Main = {\n  init() {\n    // XXX dwb userscripts extension reloads scripts run at document-start when replaceState/pushState is called.\n    // XXX Firefox reinjects WebExtension content scripts when extension is updated / reloaded.\n    let key;\n    try {\n      let w = window;\n      if (platform === 'crx') { w = (w.wrappedJSObject || w); }\n      if (`${meta.name} antidup` in w) { return; }\n      w[`${meta.name} antidup`] = true;\n    } catch (error) {}\n\n    // Don't run inside ad iframes.\n    try {\n      if (window.frameElement && ['', 'about:blank'].includes(window.frameElement.src)) { return; }\n    } catch (error1) {}\n\n    // Detect multiple copies of 4chan X\n    if (doc && $.hasClass(doc, 'fourchan-x')) { return; }\n    $.asap(docSet, function() {\n      $.addClass(doc, 'fourchan-xt', 'fourchan-x', 'seaweedchan');\n      if ($.engine) { return $.addClass(doc, `ua-${$.engine}`); }\n    });\n    try {\n      $.global(\n        function () {\n          const date = +this.buildDate;\n          Object.defineProperty(window, 'fourchanXT', {\n            value: Object.freeze({\n              version: this.version,\n              // Getter to prevent mutations.\n              get buildDate() { return new Date(date) },\n            }),\n            writable: false,\n          });\n        },\n        { version: g.VERSION, buildDate: g.VERSION_DATE.getTime().toString() },\n      );\n    } catch (e) {\n      console.error(e);\n    }\n    $.on(d, '4chanXInitFinished', function() {\n      if (Main.expectInitFinished) {\n        return delete Main.expectInitFinished;\n      } else {\n        new Notice('error', 'Error: Multiple copies of 4chan X are enabled.');\n        return $.addClass(doc, 'tainted');\n      }\n    });\n\n    // Detect \"mounted\" event from Kissu\n    var mountedCB = function() {\n      d.removeEventListener('mounted', mountedCB, true);\n      Main.isMounted = true;\n      return Main.mountedCBs.map((cb) =>\n        (() => { try {\n          return cb();\n        } catch (error2) {} })());\n    };\n    d.addEventListener('mounted', mountedCB, true);\n\n    // Flatten default values from Config into Conf\n    var flatten = function(parent, obj) {\n      if (obj instanceof Array) {\n        Conf[parent] = dict.clone(obj[0]);\n      } else if (typeof obj === 'object') {\n        for (var key in obj) {\n          var val = obj[key];\n          flatten(key, val);\n        }\n      } else { // string or number\n        Conf[parent] = obj;\n      }\n    };\n\n    // XXX Remove document-breaking ad\n    if (['boards.4chan.org', 'boards.4channel.org'].includes(location.hostname)) {\n      $.global(function() {\n        const fromCharCode0 = String.fromCharCode;\n        return String.fromCharCode = function() {\n          if (document.body) {\n            String.fromCharCode = fromCharCode0;\n          } else if (document.currentScript && !document.currentScript.src) {\n            throw Error();\n          }\n          return fromCharCode0.apply(this, arguments);\n        };\n      });\n      $.asap(docSet, () => $.onExists(doc, 'iframe[srcdoc]', $.rm));\n    }\n\n    flatten(null, Config);\n\n    for (var db of DataBoard.keys) {\n      Conf[db] = dict();\n    }\n    Conf['customTitles'] = dict.clone({'4chan.org': {boards: {'qa': {'boardTitle': {orig: '/qa/ - Question & Answer', title: '/qa/ - 2D/Random'}}}}});\n    Conf['boardConfig'] = {boards: dict()};\n    Conf['archives'] = Redirect.archives;\n    Conf['selectedArchives'] = dict();\n    Conf['cooldowns'] = dict();\n    Conf['Index Sort'] = dict();\n    for (let i = 0; i < 2; i++) { Conf[`Last Long Reply Thresholds ${i}`] = dict(); }\n    Conf['siteProperties'] = dict();\n\n    // XXX old key names\n    Conf['Except Archives from Encryption'] = false;\n    Conf['JSON Navigation'] = true;\n    Conf['Oekaki Links'] = true;\n    Conf['Show Name and Subject'] = false;\n    Conf['QR Shortcut'] = true;\n    Conf['Bottom QR Link'] = true;\n    Conf['Toggleable Thread Watcher'] = true;\n    Conf['siteSoftware'] = '';\n    Conf['Use Faster Image Host'] = 'true';\n    Conf['Captcha Fixes'] = true;\n    Conf['captchaServiceDomain'] = '';\n    Conf['captchaServiceKey'] = dict();\n\n    // Enforce JS whitelist\n    if (\n      /\\.4chan(?:nel)?\\.org$/.test(location.hostname) &&\n      !SW.yotsuba.regexp.pass.test(location.href) &&\n      !SW.yotsuba.regexp.captcha.test(location.href) &&\n      !$$('script:not([src])', d).filter(s => /this\\[/.test(s.textContent)).length\n    ) {\n      ($.getSync || $.get)({'jsWhitelist': Conf['jsWhitelist']}, ({jsWhitelist}) => $.addCSP(`script-src ${jsWhitelist.replace(/^#.*$/mg, '').replace(/[\\s;]+/g, ' ').trim()}`));\n    }\n\n    // Get saved values as items\n    const items = dict();\n    for (key in Conf) { items[key] = undefined; }\n    items['previousversion'] = undefined;\n    return ($.getSync || $.get)(items, function(items) {\n      if (!$.perProtocolSettings && /\\.4chan(?:nel)?\\.org$/.test(location.hostname) && (items['Redirect to HTTPS'] ?? Conf['Redirect to HTTPS']) && (location.protocol !== 'https:')) {\n        location.replace('https://' + location.host + location.pathname + location.search + location.hash);\n        return;\n      }\n      return $.asap(docSet, function() {\n\n        // Don't hide the local storage warning behind a settings panel.\n        if ($.cantSet) {\n          // pass\n\n        // Fresh install\n        } else if ((items.previousversion == null)) {\n          Main.isFirstRun = true;\n          Main.ready(function() {\n            $.set('previousversion', g.VERSION);\n            return Settings.open();\n          });\n\n        // Migrate old settings\n        } else if (items.previousversion !== g.VERSION) {\n          Main.upgrade(items);\n        }\n\n        // Combine default values with saved values\n        for (key in Conf) {\n          var val = Conf[key];\n          Conf[key] = items[key] ?? val;\n        }\n\n        return Site.init(Main.initFeatures);\n      });\n    });\n  },\n\n  upgrade(items) {\n    const {previousversion} = items;\n    const changes = Settings.upgrade(items, previousversion);\n    items.previousversion = (changes.previousversion = g.VERSION);\n    return $.set(changes, function() {\n      if (items['Show Updated Notifications'] ?? true) {\n        const el = $.el('span',\n          { innerHTML: `${meta.name} has been updated to <a href=\"${meta.changelog}\" target=\"_blank\">version ${g.VERSION}</a>.` });\n        return new Notice('info', el, 15);\n      }\n    });\n  },\n\n  parseURL(site=g.SITE, url=location) {\n    const r = {};\n\n    if (!site) { return r; }\n    r.siteID = site.ID;\n\n    if (site.isBoardlessPage?.(url)) { return r; }\n    const pathname = url.pathname.split(/\\/+/);\n    r.boardID = pathname[1];\n\n    if (site.isFileURL(url)) {\n      r.VIEW = 'file';\n    } else if (site.isAuxiliaryPage?.(url)) {\n      // pass\n    } else if (['thread', 'res'].includes(pathname[2])) {\n      r.VIEW = 'thread';\n      r.threadID = (r.THREADID = +pathname[3].replace(/\\.\\w+$/, ''));\n    } else if ((pathname[2] === 'archive') && (pathname[3] === 'res')) {\n      r.VIEW = 'thread';\n      r.threadID = (r.THREADID = +pathname[4].replace(/\\.\\w+$/, ''));\n      r.threadArchived = true;\n    } else if (/^(?:catalog|archive)(?:\\.\\w+)?$/.test(pathname[2])) {\n      r.VIEW = pathname[2].replace(/\\.\\w+$/, '');\n    } else if (/^(?:index|\\d*)(?:\\.\\w+)?$/.test(pathname[2])) {\n      r.VIEW = 'index';\n    }\n    return r;\n  },\n\n  initFeatures() {\n    $.global(function() {\n      document.documentElement.classList.add('js-enabled');\n      return window.FCX = {};});\n    Main.jsEnabled = $.hasClass(doc, 'js-enabled');\n\n    // XXX https://bugs.chromium.org/p/chromium/issues/detail?id=920638\n    $.ajaxPageInit?.();\n\n    $.extend(g, Main.parseURL());\n    if (g.boardID) { g.BOARD = new Board(g.boardID); }\n\n    if (!g.VIEW) {\n      g.SITE.initAuxiliary?.();\n      return;\n    }\n\n    if (g.VIEW === 'file') {\n      $.asap((() => d.readyState !== 'loading'), function() {\n        let video;\n        if ((g.SITE.software === 'yotsuba') && Conf['404 Redirect'] && g.SITE.is404?.()) {\n          const pathname = location.pathname.split(/\\/+/);\n          return Redirect.navigate('file', {\n            boardID:  g.BOARD.ID,\n            filename: pathname[pathname.length - 1]\n          });\n        } else if (video = $('video')) {\n          if (Conf['Volume in New Tab']) {\n            Volume.setup(video);\n          }\n          if (Conf['Loop in New Tab']) {\n            video.loop = true;\n            video.controls = false;\n            video.play();\n            return ImageCommon.addControls(video);\n          }\n        }\n      });\n      return;\n    }\n\n    g.threads = new SimpleDict();\n    g.posts   = new SimpleDict();\n\n    // set up CSS when <head> is completely loaded\n    $.onExists(doc, 'body', Main.initStyle);\n\n    // c.time 'All initializations'\n    for (var [name, feature] of Main.features) {\n      if (g.SITE.disabledFeatures && g.SITE.disabledFeatures.includes(name)) { continue; }\n      // c.time \"#{name} initialization\"\n      try {\n        feature.init();\n      } catch (err) {\n        Main.handleErrors({\n          message: `\\\"${name}\\\" initialization crashed.`,\n          error: err\n        });\n      }\n    }\n      // finally\n      //   c.timeEnd \"#{name} initialization\"\n\n    // c.timeEnd 'All initializations'\n\n    return $.ready(Main.initReady);\n  },\n\n  initStyle() {\n    if (!Main.isThisPageLegit()) { return; }\n\n    // disable the mobile layout\n    const mobileLink = $('link[href*=mobile]', d.head);\n    if (mobileLink) mobileLink.disabled = true;\n    doc.dataset.host = location.host;\n    $.addClass(doc, `sw-${g.SITE.software}`);\n    $.addClass(doc, g.VIEW === 'thread' ? 'thread-view' : g.VIEW);\n    $.onExists(doc, '.ad-cnt, .adg-rects > .desktop', ad => $.onExists(ad, 'img, iframe', () => $.addClass(doc, 'ads-loaded')));\n    if (Conf['Autohiding Scrollbar']) { $.addClass(doc, 'autohiding-scrollbar'); }\n    $.ready(function() {\n      if ((d.body.clientHeight > doc.clientHeight) && ((window.innerWidth === doc.clientWidth) !== Conf['Autohiding Scrollbar'])) {\n        Conf['Autohiding Scrollbar'] = !Conf['Autohiding Scrollbar'];\n        $.set('Autohiding Scrollbar', Conf['Autohiding Scrollbar']);\n        return $.toggleClass(doc, 'autohiding-scrollbar');\n      }\n    });\n    $.addStyle(CSS.sub(CSS.boards), 'fourchanx-css');\n    Main.bgColorStyle = $.el('style', {id: 'fourchanx-bgcolor-css'});\n\n    let keyboard = false;\n    $.on(d, 'mousedown', () => keyboard = false);\n    $.on(d, 'keydown', function(e) { if (e.keyCode === 9) { return keyboard = true; } }); // tab\n    window.addEventListener('focus', (() => doc.classList.toggle('keyboard-focus', keyboard)), true);\n\n    return Main.setClass();\n  },\n\n  setClass() {\n    let mainStyleSheet, style, styleSheets;\n    const knownStyles = ['yotsuba', 'yotsuba-b', 'futaba', 'burichan', 'photon', 'tomorrow', 'spooky'];\n\n    if ((g.SITE.software === 'yotsuba') && (g.VIEW === 'catalog')) {\n      if (mainStyleSheet = $.id('base-css')) {\n        style = mainStyleSheet.href.match(/catalog_(\\w+)/)?.[1].replace('_new', '').replace(/_+/g, '-');\n        if (knownStyles.includes(style)) {\n          $.addClass(doc, style);\n          return;\n        }\n      }\n    }\n\n    style = (mainStyleSheet = (styleSheets = null));\n\n    const setStyle = function() {\n      // Use preconfigured CSS for 4chan's default themes.\n      if (g.SITE.software === 'yotsuba') {\n        $.rmClass(doc, style);\n        style = null;\n        for (var styleSheet of styleSheets) {\n          if (styleSheet.href === mainStyleSheet?.href) {\n            style = styleSheet.title.toLowerCase().replace('new', '').trim().replace(/\\s+/g, '-');\n            if (style === '_special') { style = styleSheet.href.match(/[a-z]*(?=[^/]*$)/)[0]; }\n            if (!knownStyles.includes(style)) { style = null; }\n            break;\n          }\n        }\n        if (style) {\n          $.addClass(doc, style);\n          $.rm(Main.bgColorStyle);\n          return;\n        }\n      }\n\n      // Determine proper dialog background color for other themes.\n      const div = g.SITE.bgColoredEl();\n      div.style.position = 'absolute';\n      div.style.visibility = 'hidden';\n      $.add(d.body, div);\n      let bgColor = window.getComputedStyle(div).backgroundColor;\n      $.rm(div);\n      const rgb = bgColor.match(/[\\d.]+/g);\n      // Use body background if reply background is transparent\n      if (!/^rgb\\(/.test(bgColor)) {\n        const s = window.getComputedStyle(d.body);\n        bgColor = `${s.backgroundColor} ${s.backgroundImage} ${s.backgroundRepeat} ${s.backgroundPosition}`;\n      }\n      let css = `\\\n.dialog, .suboption-list > div:last-of-type, :root.catalog-hover-expand .catalog-container:hover > .post {\n  background: ${bgColor};\n}\n.unread-mark-read {\n  background-color: rgba(${rgb.slice(0, 3).join(', ')}, ${0.5*(rgb[3] || 1)});\n}\\\n`;\n      if ($.luma(rgb) < 100) {\n        css += `\\\n.watch-thread-link {\n  background-image: url(\"data:image/svg+xml,<svg viewBox='0 0 26 26' preserveAspectRatio='true' xmlns='http://www.w3.org/2000/svg'><path fill='rgb(200,200,200)' d='M24.132,7.971c-2.203-2.205-5.916-2.098-8.25,0.235L15.5,8.588l-0.382-0.382c-2.334-2.333-6.047-2.44-8.25-0.235c-2.204,2.203-2.098,5.916,0.235,8.249l8.396,8.396l8.396-8.396C26.229,13.887,26.336,10.174,24.132,7.971z'/></svg>\");\n}\\\n`;\n      }\n      Main.bgColorStyle.textContent = css;\n      return $.after($.id('fourchanx-css'), Main.bgColorStyle);\n    };\n\n    $.onExists(d.head, g.SITE.selectors.styleSheet, function(el) {\n      mainStyleSheet = el;\n      if (g.SITE.software === 'yotsuba') {\n        styleSheets = $$('link[rel=\"alternate stylesheet\"]', d.head);\n      }\n      new MutationObserver(setStyle).observe(mainStyleSheet, {\n        attributes: true,\n        attributeFilter: ['href']\n      });\n      $.on(mainStyleSheet, 'load', setStyle);\n      return setStyle();\n    });\n    if (!mainStyleSheet) {\n      for (var styleSheet of $$('link[rel=\"stylesheet\"]', d.head)) {\n        $.on(styleSheet, 'load', setStyle);\n      }\n      return setStyle();\n    }\n  },\n\n  initReady() {\n    if (g.SITE.is404?.()) {\n      if (g.VIEW === 'thread') {\n        ThreadWatcher.set404(g.BOARD.ID, g.THREADID, function() {\n          if (Conf['404 Redirect']) {\n            return Redirect.navigate('thread', {\n              boardID:  g.BOARD.ID,\n              threadID: g.THREADID,\n              postID:   +location.hash.match(/\\d+/)\n            } // post number or 0\n            , `/${g.BOARD}/`);\n          }\n        });\n      }\n\n      return;\n    }\n\n    if (g.SITE.isIncomplete?.()) {\n      const msg = $.el('div',\n        {innerHTML: 'The page didn&#039;t load completely.<br>Some features may not work unless you <a href=\"javascript:;\">reload</a>.'});\n      $.on($('a', msg), 'click', () => location.reload());\n      new Notice('warning', msg);\n    }\n\n    // Parse HTML or skip it and start building from JSON.\n    if (g.VIEW === 'catalog') {\n      return Main.initCatalog();\n    } else if (!Index.enabled) {\n      if (g.SITE.awaitBoard) {\n        return g.SITE.awaitBoard(Main.initThread);\n      } else {\n        return Main.initThread();\n      }\n    } else {\n      Main.expectInitFinished = true;\n      return $.event('4chanXInitFinished');\n    }\n  },\n\n  initThread() {\n    let board;\n    const s = g.SITE.selectors;\n    if (board = $((s.boardFor?.[g.VIEW] || s.board))) {\n      const threads = [];\n      const posts   = [];\n      const errors  = [];\n\n      try {\n        g.SITE.preParsingFixes?.(board);\n      } catch (error) {}\n\n      Main.addThreadsObserver = new MutationObserver(Main.addThreads);\n      Main.addPostsObserver   = new MutationObserver(Main.addPosts);\n      Main.addThreadsObserver.observe(board, {childList: true});\n\n      Main.parseThreads($$(s.thread, board), threads, posts, errors);\n      if (errors.length) { Main.handleErrors(errors); }\n\n      if (g.VIEW === 'thread') {\n        if (g.threadArchived) {\n          threads[0].isArchived = true;\n          threads[0].kill();\n        }\n        g.SITE.parseThreadMetadata?.(threads[0]);\n      }\n\n      Main.callbackNodes('Thread', threads);\n      return Main.callbackNodesDB('Post', posts, function() {\n        for (var post of posts) { QuoteThreading.insert(post); }\n        Main.expectInitFinished = true;\n        return $.event('4chanXInitFinished');\n      });\n\n    } else {\n      Main.expectInitFinished = true;\n      return $.event('4chanXInitFinished');\n    }\n  },\n\n  parseThreads(threadRoots, threads, posts, errors) {\n    for (var threadRoot of threadRoots) {\n      var boardObj = (() => {\n        let boardID;\n        if (boardID = threadRoot.dataset.board) {\n        boardID = encodeURIComponent(boardID);\n        return g.boards[boardID] || new Board(boardID);\n      } else {\n        return g.BOARD;\n      }\n      })();\n      var threadID = +threadRoot.id.match(/\\d*$/)[0];\n      if (!threadID || boardObj.threads.get(threadID)?.nodes.root) { return; }\n      var thread = new Thread(threadID, boardObj);\n      thread.nodes.root = threadRoot;\n      threads.push(thread);\n      var postRoots = $$(g.SITE.selectors.postContainer, threadRoot);\n      if (g.SITE.isOPContainerThread) { postRoots.unshift(threadRoot); }\n      Main.parsePosts(postRoots, thread, posts, errors);\n      Main.addPostsObserver.observe(threadRoot, {childList: true});\n    }\n  },\n\n  parsePosts(postRoots, thread, posts, errors) {\n    for (var postRoot of postRoots) {\n      if (!(postRoot.dataset.fullID && g.posts.get(postRoot.dataset.fullID)) && $(g.SITE.selectors.comment, postRoot)) {\n        try {\n          posts.push(new Post(postRoot, thread, thread.board));\n        } catch (err) {\n          // Skip posts that we failed to parse.\n          errors.push({\n            message: `Parsing of Post No.${postRoot.id.match(/\\d+/)} failed. Post will be skipped.`,\n            error: err,\n            html: postRoot.outerHTML\n          });\n        }\n      }\n    }\n  },\n\n  addThreads(records) {\n    const threadRoots = [];\n    for (var record of records) {\n      for (var node of record.addedNodes) {\n        if ((node.nodeType === Node.ELEMENT_NODE) && node.matches(g.SITE.selectors.thread)) {\n          threadRoots.push(node);\n        }\n      }\n    }\n    if (!threadRoots.length) { return; }\n    const threads = [];\n    const posts   = [];\n    const errors  = [];\n    Main.parseThreads(threadRoots, threads, posts, errors);\n    if (errors.length) { Main.handleErrors(errors); }\n    Main.callbackNodes('Thread', threads);\n    return Main.callbackNodesDB('Post', posts, () => $.event('PostsInserted', null, records[0].target));\n  },\n\n  addPosts(records) {\n    let thread;\n    const threads   = [];\n    const threadsRM = [];\n    const posts     = [];\n    const errors    = [];\n    for (var record of records) {\n      thread = Get.threadFromRoot(record.target);\n      var postRoots = [];\n      for (var node of record.addedNodes) {\n        if (node.nodeType === Node.ELEMENT_NODE) {\n          if (node.matches(g.SITE.selectors.postContainer) || (node = $(g.SITE.selectors.postContainer, node))) {\n            postRoots.push(node);\n          }\n        }\n      }\n      var n = posts.length;\n      Main.parsePosts(postRoots, thread, posts, errors);\n      if ((posts.length > n) && !threads.includes(thread)) {\n        threads.push(thread);\n      }\n      var anyRemoved = false;\n      for (var el of record.removedNodes) {\n        if ((Get.postFromRoot(el)?.nodes.root === el) && !doc.contains(el)) {\n          anyRemoved = true;\n          break;\n        }\n      }\n      if (anyRemoved && !threadsRM.includes(thread)) {\n        threadsRM.push(thread);\n      }\n    }\n    if (errors.length) { Main.handleErrors(errors); }\n    return Main.callbackNodesDB('Post', posts, function() {\n      for (thread of threads) {\n        $.event('PostsInserted', null, thread.nodes.root);\n      }\n      for (thread of threadsRM) {\n        $.event('PostsRemoved', null, thread.nodes.root);\n      }\n    });\n  },\n\n  initCatalog() {\n    let board;\n    const s = g.SITE.selectors.catalog;\n    if (s && (board = $(s.board))) {\n      const threads = [];\n      const errors  = [];\n\n      Main.addCatalogThreadsObserver = new MutationObserver(Main.addCatalogThreads);\n      Main.addCatalogThreadsObserver.observe(board, {childList: true});\n\n      Main.parseCatalogThreads($$(s.thread, board), threads, errors);\n      if (errors.length) { Main.handleErrors(errors); }\n\n      Main.callbackNodes('CatalogThreadNative', threads);\n    }\n\n    Main.expectInitFinished = true;\n    return $.event('4chanXInitFinished');\n  },\n\n  parseCatalogThreads(threadRoots, threads, errors) {\n    for (var threadRoot of threadRoots) {\n      try {\n        var thread = new CatalogThreadNative(threadRoot);\n        if (thread.thread.catalogViewNative?.nodes.root !== threadRoot) {\n          thread.thread.catalogViewNative = thread;\n          threads.push(thread);\n        }\n      } catch (err) {\n        // Skip threads that we failed to parse.\n        errors.push({\n          message: `Parsing of Catalog Thread No.${(threadRoot.dataset.id || threadRoot.id).match(/\\d+/)} failed. Thread will be skipped.`,\n          error: err,\n          html: threadRoot.outerHTML\n        });\n      }\n    }\n  },\n\n  addCatalogThreads(records) {\n    const threadRoots = [];\n    for (var record of records) {\n      for (var node of record.addedNodes) {\n        if ((node.nodeType === Node.ELEMENT_NODE) && node.matches(g.SITE.selectors.catalog.thread)) {\n          threadRoots.push(node);\n        }\n      }\n    }\n    if (!threadRoots.length) { return; }\n    const threads = [];\n    const errors  = [];\n    Main.parseCatalogThreads(threadRoots, threads, errors);\n    if (errors.length) { Main.handleErrors(errors); }\n    return Main.callbackNodes('CatalogThreadNative', threads);\n  },\n\n  callbackNodes(klass, nodes) {\n    let node;\n    let i = 0;\n    const cb = Callbacks[klass];\n    while ((node = nodes[i++])) {\n      cb.execute(node);\n    }\n  },\n\n  callbackNodesDB(klass, nodes, cb) {\n    let i   = 0;\n    const cbs = Callbacks[klass];\n    const fn  = function() {\n      let node;\n      if (!(node = nodes[i])) { return false; }\n      cbs.execute(node);\n      return ++i % 250;\n    };\n\n    var softTask = function() {\n      while (fn()) {\n        continue;\n      }\n      if (!nodes[i]) {\n        if (cb) { cb(); }\n        return;\n      }\n      return setTimeout(softTask, 0);\n    };\n\n    return softTask();\n  },\n\n  handleErrors(errors) {\n    // Detect conflicts with 4chan X v2\n    let error;\n    if (d.body && $.hasClass(d.body, 'fourchan_x') && !$.hasClass(doc, 'tainted')) {\n      new Notice('error', 'Error: Multiple copies of 4chan X are enabled.');\n      $.addClass(doc, 'tainted');\n    }\n\n    // Detect conflicts with native extension\n    if (g.SITE.testNativeExtension && !$.hasClass(doc, 'tainted')) {\n      const {enabled} = g.SITE.testNativeExtension();\n      if (enabled) {\n        $.addClass(doc, 'tainted');\n        if (Conf['Disable Native Extension'] && !Main.isFirstRun) {\n          const msg = $.el('div',\n            { innerHTML: 'Failed to disable the native extension. You may need to <a href=\"' + E(meta.upstreamFaq) +\n              '#blocking-native-extension\" target=\"_blank\">block it</a>.' });\n          new Notice('error', msg);\n        }\n      }\n    }\n\n    if (!(errors instanceof Array)) {\n      error = errors;\n    } else if (errors.length === 1) {\n      error = errors[0];\n    }\n    if (error) {\n      new Notice('error', Main.parseError(error, Main.reportLink([error])), 15);\n      return;\n    }\n\n    const div = $.el('div', {\n      innerHTML:\n        `${errors.length} errors occurred.${Main.reportLink(errors).innerHTML} [<a href=\"javascript:;\">show</a>]`\n    });\n    $.on(div.lastElementChild, 'click', function () {\n      return [this.textContent, logs.hidden] = this.textContent === 'show' ? ['hide', false] : ['show', true];\n    });\n\n    var logs = $.el('div',\n      {hidden: true});\n    for (error of errors) {\n      $.add(logs, Main.parseError(error));\n    }\n\n    return new Notice('error', [div, logs], 30);\n  },\n\n  parseError(data, reportLink) {\n    c.error(data.message, data.error.stack);\n    const message = $.el('div',\n      { innerHTML: E(data.message) + ((reportLink) ? (reportLink).innerHTML : \"\") });\n    const error = $.el('div',\n      {textContent: `${data.error.name || 'Error'}: ${data.error.message || 'see console for details'}`});\n    const lines = data.error.stack?.match(/\\d+(?=:\\d+\\)?$)/mg)?.join().replace(/^/, ' at ') || '';\n    const context = $.el('div',\n      { textContent: `(${meta.name} ${meta.fork} v${g.VERSION} ${platform} on ${$.engine}${lines})` });\n    return [message, error, context];\n  },\n\n  reportLink(errors) {\n    let info;\n    const data = errors[0];\n    let title  = data.message;\n    if (errors.length > 1) { title += ` (+${errors.length - 1} other errors)`; }\n    let details = '';\n    const addDetails = function(text) {\n      if (encodeURIComponent(title + details + text + '\\n').length <= meta.newIssueMaxLength - meta.newIssue.replace(/%(title|details)/, '').length) {\n        return details += text + '\\n';\n      }\n    };\n    addDetails(`\\\n[Please describe the steps needed to reproduce this error.]\n\nScript: ${meta.name} ${meta.fork} v${g.VERSION} ${platform}\nURL: ${location.href}\nUser agent: ${navigator.userAgent}\\\n`\n    );\n    if ((platform === 'userscript') && (info = (() => {\n      if (typeof GM !== 'undefined' && GM !== null) { return GM.info; } else { if (typeof GM_info !== 'undefined' && GM_info !== null) { return GM_info; }\n  }\n    })())) {\n      addDetails(`Userscript manager: ${info.scriptHandler} ${info.version}`);\n    }\n    addDetails('\\n' + data.error);\n    if (data.error.stack) { addDetails(data.error.stack.replace(data.error.toString(), '').trim()); }\n    if (data.html) { addDetails('\\n`' + data.html + '`'); }\n    details = details.replace(/file:\\/{3}.+\\//g, ''); // Remove local file paths\n    const url = meta.newIssue.replace('%title', encodeURIComponent(title)).replace('%details', encodeURIComponent(details));\n    return { innerHTML: `<span class=\"report-error\"> [<a href=\"${url}\" target=\"_blank\">report</a>]</span>` };\n  },\n\n  isThisPageLegit() {\n    // not 404 error page or similar.\n    if (!('thisPageIsLegit' in Main)) {\n      Main.thisPageIsLegit = g.SITE.isThisPageLegit ?\n        g.SITE.isThisPageLegit()\n      :\n        !/^[45]\\d\\d\\b/.test(document.title) && !/\\.(?:json|rss)$/.test(location.pathname);\n    }\n    return Main.thisPageIsLegit;\n  },\n\n  ready(cb) {\n    return $.ready(function() {\n      if (Main.isThisPageLegit()) { return cb(); }\n    });\n  },\n\n  mounted(cb) {\n    if (Main.isMounted) {\n      return cb();\n    } else {\n      return Main.mountedCBs.push(cb);\n    }\n  },\n\n  mountedCBs: [],\n\n  features: [\n    ['Polyfill',                  Polyfill],\n    ['Board Configuration',       BoardConfig],\n    ['Normalize URL',             NormalizeURL],\n    ['Delay Redirect on Post',    PostRedirect],\n    ['Captcha Configuration',     CaptchaReplace],\n    ['Image Host Rewriting',      ImageHost],\n    ['Redirect',                  Redirect],\n    ['Header',                    Header],\n    ['Catalog Links',             CatalogLinks],\n    ['Settings',                  Settings],\n    ['Index Generator',           Index],\n    ['Disable Autoplay',          AntiAutoplay],\n    ['Announcement Hiding',       PSAHiding],\n    ['Fourchan thingies',         Fourchan],\n    ['Tinyboard Glue',            Tinyboard],\n    ['Color User IDs',            IDColor],\n    ['Highlight by User ID',      IDHighlight],\n    ['Count Posts by ID',         IDPostCount],\n    ['Custom CSS',                CustomCSS],\n    ['Thread Links',              ThreadLinks],\n    ['Linkify',                   Linkify],\n    ['Reveal Spoilers',           RemoveSpoilers],\n    ['Resurrect Quotes',          Quotify],\n    ['Filter',                    Filter],\n    ['Thread Hiding Buttons',     ThreadHiding],\n    ['Reply Hiding Buttons',      PostHiding],\n    ['Recursive',                 Recursive],\n    ['Strike-through Quotes',     QuoteStrikeThrough],\n    ['Quick Reply Personas',      QR.persona],\n    ['Quick Reply',               QR],\n    ['Cooldown',                  QR.cooldown],\n    ['Post Jumper',               PostJumper],\n    ['Pass Link',                 PassLink],\n    ['Menu',                      Menu],\n    ['Index Generator (Menu)',    Index.menu],\n    ['Report Link',               ReportLink],\n    ['Copy Text Link',            CopyTextLink],\n    ['Thread Hiding (Menu)',      ThreadHiding.menu],\n    ['Reply Hiding (Menu)',       PostHiding.menu],\n    ['Delete Link',               DeleteLink],\n    ['Filter (Menu)',             Filter.menu],\n    ['Edit Link',                 QR.oekaki.menu],\n    ['Download Link',             DownloadLink],\n    ['Archive Link',              ArchiveLink],\n    ['Quote Inlining',            QuoteInline],\n    ['Quote Previewing',          QuotePreview],\n    ['Quote Backlinks',           QuoteBacklink],\n    ['Mark Quotes of You',        QuoteYou],\n    ['Mark OP Quotes',            QuoteOP],\n    ['Mark Cross-thread Quotes',  QuoteCT],\n    ['Anonymize',                 Anonymize],\n    ['Time Formatting',           Time],\n    ['Relative Post Dates',       RelativeDates],\n    ['File Info Formatting',      FileInfo],\n    ['Fappe Tyme',                FappeTyme],\n    ['Gallery',                   Gallery],\n    ['Gallery (menu)',            Gallery.menu],\n    ['Sauce',                     Sauce],\n    ['Image Expansion',           ImageExpand],\n    ['Image Expansion (Menu)',    ImageExpand.menu],\n    ['Reveal Spoiler Thumbnails', RevealSpoilers],\n    ['Image Loading',             ImageLoader],\n    ['Image Hover',               ImageHover],\n    ['Volume Control',            Volume],\n    ['WEBM Metadata',             Metadata],\n    ['Comment Expansion',         ExpandComment],\n    ['Thread Expansion',          ExpandThread],\n    ['Favicon',                   Favicon],\n    ['Unread',                    Unread],\n    ['Unread Line in Index',      UnreadIndex],\n    ['Quote Threading',           QuoteThreading],\n    ['Thread Stats',              ThreadStats],\n    ['Thread Updater',            ThreadUpdater],\n    ['Thread Watcher',            ThreadWatcher],\n    ['Thread Watcher (Menu)',     ThreadWatcher.menu],\n    ['Mark New IPs',              MarkNewIPs],\n    ['Index Navigation',          Nav],\n    ['Keybinds',                  Keybinds],\n    ['Banner',                    Banner],\n    ['Announcements',             PSA],\n    ['Flash Features',            Flash],\n    ['Reply Pruning',             ReplyPruning],\n    ['Mod Contact Links',         ModContact],\n    ['Restore deleted posts from archive', RestoreDeletedFromArchive],\n  ]\n};\nexport default Main;\n$.ready(() => Main.init());\n\n// <% if (readJSON('/.tests_enabled')) { %>\n// Main.features.push(['Build Test', Test]);\n// <% } %>\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst QuoteStrikeThrough = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) ||\n      (!Conf['Reply Hiding Buttons'] && (!Conf['Menu'] || !Conf['Reply Hiding Link']) && !Conf['Filter'])) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Strike-through Quotes',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var quotelink of this.nodes.quotelinks) {\n      var {boardID, postID} = Get.postDataFromLink(quotelink);\n      if (g.posts.get(`${boardID}.${postID}`)?.isHidden) {\n        $.addClass(quotelink, 'filtered');\n      }\n    }\n  }\n};\nexport default QuoteStrikeThrough;\n"],"names":["Conf","Object","create","g","VERSION","version","VERSION_DATE","Date","NAMESPACE","meta","name","sites","boards","E","str","regex","fn","x","output","text","toString","replace","cat","templates","html","i","length","innerHTML","d","document","doc","documentElement","c","console","docSet","Callbacks","static","this","Post","Thread","CatalogThread","CatalogThreadNative","constructor","type","keys","push","cb","execute","node","force","errors","callbacksExecuted","call","err","message","ID","board","join","error","nodes","root","outerHTML","Main","handleErrors","initClass","Config","main","Miscellaneous","Keybinds","Linkification","Linkify","Embedding","Filtering","Anonymize","Filter","Stubs","Gallery","Sauce","Autoplay","Menu","Monitoring","Cooldown","imageExpansion","gallery","threadWatcher","filter","general","postID","uniqueID","tripcode","capcode","pass","email","subject","comment","flag","filename","dimensions","filesize","MD5","sauces","FappeT","werk","Index","Header","archives","archiveLists","lastarchivecheck","archiveAutoUpdate","externalCatalogURLs","boardnav","faq","QR","sjisPreview","jsWhitelist","captchaLanguage","time","timeLocale","RelativeTime","backlink","pastedname","fileInfo","favicon","usercss","hotkeys","Close","Watch","Update","Pause","Slideshow","fappeTyme","werkTyme","Hide","updater","checkbox","Beep","Interval","customCooldown","customCooldownEnabled","position","fourchanImageHost","hiddenPSAList","knownBanners","passMessageClosed","PSAseen","Favicon","init","$","asap","head","el","initAsap","set","status","href","add","isSFW","test","default","switch","items","ferongr","Mayhem","Original","Metro","getOwn","f","unreadDead","unreadDeadY","unreadSFW","unreadSFWY","unreadNSFW","unreadNSFWY","update","unread","unreadY","SFW","NSFW","dead","logo","$$","selector","body","Array","from","querySelectorAll","CaptchaReplace","SITE","software","cookie","indexOf","jsEnabled","ready","noscript","trim","includes","location","hostname","onExists","iframe","original","toggle","parentNode","span","id","rm","insert","textContent","on","lang","src","encodeURIComponent","CaptchaT","isEnabled","className","addClass","after","com","moreNeeded","getThread","threadID","boardID","BOARD","posts","thread","setup","focus","container","prepend","currentThread","global","querySelector","window","TCaptcha","setErrorCb","dispatchEvent","CustomEvent","detail","content","destroy","updateThread","newThread","getOne","response","key","value","setUsed","clearChallenge","occupied","debounce","wait","lastCall","timeout","that","args","exec","now","apply","arguments","clearTimeout","setTimeout","dict","clone","obj","arr","end","map","val","json","JSON","parse","SECOND","MINUTE","HOUR","DAY","platform","GM_xmlhttpRequest","DataBoard","sync","dontClean","changes","onSync","bind","initData","clean","off","data","lastChecked","save","change","get","needSync","forceSync","delete","siteID","deleteIfEmpty","setUnsafe","undefined","base","extend","oldVal","defaultValue","subVal","setLastChecked","middle","ajaxClean","threadsList","urls","threadsListJSON","cache","archiveList","archiveListJSON","ajaxCleanParse","response1","archivedBoardsKnown","response2","threads","page","no","SimpleDict","compare","lastKey","keyString","indexOfNext","findIndex","k","splice","insertAt","index","forEach","last","fullID","isDead","isHidden","isSticky","isClosed","isArchived","postLimit","fileLimit","lastPost","ipCount","OP","catalogView","setPage","pageNum","icon","info","reply","previousSibling","tn","title","pageCount","setCount","count","reachedLimit","rmClass","setStatus","setIcon","typeLC","toLowerCase","icons","Build","staticPath","gifIcon","alt","style","cssText","quote","cloneNode","kill","collect","n","post","clones","thumb","postCount","fileCount","replies","currentMenu","lastToggledButton","setPosition","close","keybinds","onFocus","addEntry","open","entries","makeMenu","menu","tabIndex","dataset","e","stopPropagation","button","preventDefault","previousButton","entry","sort","first","second","order","insertEntry","mRect","getBoundingClientRect","bRect","scrollY","top","scrollX","left","cHeight","clientHeight","cWidth","clientWidth","bottom","height","right","width","classList","parent","submenu","subEntries","subEntry","findNextEntry","direction","children","next","keyCode","click","firstElementChild","nextPrev","target","focused","sRect","eRect","parseEntry","dragstart","isTouching","changedTouches","rect","screenHeight","screenWidth","o","dx","clientX","dy","clientY","topBorder","bottomBorder","bar","identifier","move","touchmove","up","touchend","drag","dragend","touch","hoverstart","latestEvent","endEvents","noRemove","isImage","nodeName","hover","hoverend","MutationObserver","observe","childList","workaround","contains","padding","offsetHeight","offsetWidth","Math","max","min","threshold","marginX","UI","dialog","properties","child","tagName","checked","label","input","Nav","VIEW","prev","append","scrollTo","scroll","scrollHeight","THREADID","hasClass","threadRoot","selectors","Get","threadFromRoot","stub","getTopOf","delta","activeElement","blur","axis","xpath","extra","marginBottom","haveExtra","removeExtra","ImageHost","useFaster","suggestions","host","flashHost","thumbHost","isClone","file","url","split","link","thumbLink","fixLinks","links","pathname","Volume","inputs","unmute","volume","noAudio","catalogNode","unmuteEntry","volumeEntry","video","muted","files","isVideo","wheel","shiftKey","altKey","ctrlKey","metaKey","hasAudio","deltaY","minmax","ImageCommon","pause","rewind","readyState","HAVE_METADATA","currentTime","queueTask","pushCache","cacheError","popCache","decodeError","fileObj","code","MediaError","MEDIA_ERR_DECODE","isFromArchive","delay","timeoutID","Redirect","to","securityCheck","redirect","threadJSON","parseJSON","isArchiveURL","needle","postObj","archivedThreadJSON","ajax","onloadend","docIndex","filesDeleted","addControls","handler","t","getTime","engine","duration","controls","onControls","download","protocol","CrossOrigin","blob","a","URL","createObjectURL","hidden","Notice","Audio","setupSync","audio","addEventListener","play","playbackRate","once","isEscaped","Symbol","voidElements","Set","hFragment","h","tag","attributes","attribute","isVoid","has","TypeError","toSvg","svgPathData","image","eye","expand","refresh","wrench","bolt","pencil","clipboard","clock","shuffle","undo","bookOpen","Icon","altText","Error","raw","ImageExpand","enabled","EAI","toggleAll","addShortcut","playVideos","videoControls","isExpanding","contract","isExpanded","fullImage","setupVideoCB","setupVideo","origin","paused","wasPlaying","isFetchedQuote","isSpoiler","modifiedClick","postFromNode","func","event","setProperty","visible","isNodeVisible","setFitness","scrollIntoView","oldHeight","scrollBy","scrollToIfNeeded","eventName","videoCB","remove","audioSlider","fileID","removeAttribute","loop","completeExpand","naturalHeight","soundUrlMatch","match","decodeURIComponent","startsWith","audioEl","autoplay","imageBottom","getBottomOf","playing","mousedown","mouseover","mouseup","mouseout","buttons","createSubEntry","conf","desc","flags","context","isReply","parseNodes","flagCode","toUpperCase","flagCodeTroll","date","parseDate","nameBlock","parseComment","parseQuotes","parseFiles","isRebuilt","s","infoRoot","isOPContainerThread","opBottom","quotelinks","archivelinks","embedlinks","backlinks","getElementsByClassName","uniqueIDRoot","bq","normalize","commentClean","cleanComment","nodesToText","commentDisplay","cleanSpoilers","cleanCommentDisplay","commentOrig","insertTags","X","snapshotItem","spoilers","spoiler","quotelink","quotes","parseQuote","regexp","fileRoots","fileRoot","parseFile","multifile","roots","size","unit","sizeInBytes","strong","allQuotelinksLinkingTo","deadMark","markAsFromArchive","resurrect","some","addClone","contractThumb","PostClone","rmClone","slice","setCatalogOP","isCatalogOP","createElement","super","cloneWithoutVideo","suffix","inline","inlined","originFile","videoThumb","md5","nodeType","Node","ELEMENT_NODE","childNodes","makeButton","Recursive","recursives","Map","recursive","PostHiding","db","sa","thisPost","hide","makeStub","hideRecursively","sideArrows","firstChild","applyHide","hideOptions","config","user_ids","applyShow","show","hideStubLink","hideStub","showOptions","byId","p","saveHiddenState","isHiding","showRecursively","RelativeDates","INTERVAL","flush","dateEl","fullTime","relative","diff","abbrev","number","years","getFullYear","months","getMonth","days","getDate","rounded","round","stale","isPost","utc","singlePost","concat","full","setOwnTimeout","markStale","Element","BoardConfig","cbs","load","statusText","sfwBoards","sfw","result","object","ws_board","domain","is_archived","webm_audio","Board","cooldowns","c2","images","thread_global","ceil","PostRedirect","delays","ExpandComment","callbacks","longComment","shortComment","req","spoilerRange","custom_spoiler","getAttribute","callback","QuoteYou","mark","isYou","postDataFromLink","quoter","seek","highlighted","highlight","classes","lastRead","snapshotLength","postFromRoot","sel","postContainer","highlightable","matches","RandomAccessList","item","before","rmi","shift","Unread","hr","postsQuotingYou","addPost","lastReadPost","readCount","one","onUpdate","resetLink","reset","setLine","read","positionPrev","hash","updatePosition","postIDs","addPostQuotingYou","openNotification","predicate","areNotificationsEnabled","notif","Notification","onclick","onshow","readSinglePost","saveLastReadPost","oldPosition","linePosition","nextSibling","countQuotingYou","titleQuotingYou","titleCount","titleDead","saveThreadWatcherCount","quotingYou","ThreadWatcher","ExpandThread","statuses","onIndexRefresh","setButton","summaryText","cursor","cbToggle","disconnect","oldReq","abort","threadFromNode","cbToggleBottom","numReplies","replyOriginal","postsCount","filesCount","postsRoot","postData","postFromObject","callbackNodes","a2","UnreadIndex","markReadLink","onPostsInserted","isCatalog","threadIDs","wasVisible","divider","repliesShown","repliesRead","firstUnread","summary","hasUnread","markRead","threadDivider","sc","shortcut","dbLM","list","lastElementChild","refreshButton","closeButton","unreaddb","unreadEnabled","toggleWatcher","buttonFetchAll","addHeaderMenuEntry","addDialog","onIndexUpdate","onThreadRefresh","initLastModified","fetchAuto","isWatched","isWatchedRaw","setToggler","toggler","excerpt","threadExcerpt","isThisPageLegit","build","toggleClass","openAll","openUnread","openDeads","pruneDeads","getAll","dismiss","addRaw","nKilled","fetchStatus","requests","fetched","fetch","lastModified","whenModified","finished","clearRequests","syncing","lm","interval","hasFocus","fetchAllStatus","dbs","dbi","middle1","deep","lastChecked2","fetchBoard","modified","site","urlF","threadModTimeIgnoresSage","parseBoard","lmDate","getResponseHeader","pageLength","nThreads","oldest","last_modified","lastPage","isPrunedByAge","newData","parseStatus","archived","youOP","quotesYou","quotelinkHTML","lastIndex","archiveURL","mayLackJSON","groupByBoard","all","cont","makeLine","prefixes","div","setPrefixes","len","prefix","conflicts","conflicts2","siteID2","rmAll","refreshIcon","deferred","line","newLine","set404","oldData","addMenuEntries","entryEl","addCheckbox","disabled","ThreadWatcher$1","parseArchivePost","Fetcher","archiveTags","greentext","text2","j","num","thread_num","shortname","fileDeleted","trip","poster_hash","poster_country","troll_country_code","poster_country_name","troll_country_name","dateUTC","timestamp","dateText","fourchan_date","commentHTML","media","banned","media_filename","thumb_link","media_link","media_orig","media_h","media_w","media_hash","bytesToString","media_size","thumbURL","preview_orig","theight","preview_h","twidth","preview_w","exif","Tag","ReplyPruning","frag","setEnabled","hiddenFiles","total","totalFiles","other","QuoteThreading","active","showIfHidden","updateCount","newPosts","boardTop","hidden1","hidden2","oldPos","lastChild","threadNewLink","rethread","setThread","inserted","lastID","toggleThreading","setThreadingState","navLinksBot","retroactive","backLink","shouldReThread","parents","lastParent","ancestor","descendants","threadContainer","prev2","rethreadQueued","Promise","resolve","then","replyData","isCached","fetchedPost","archivedPost","flagCSS","cssVersion","rel","api","cleanCache","archive","encryptionOK","parseArchivedPost","postIdNr","newPostIndex","insertAdjacentElement","QuotePreview","qp","pop","showHiddenThreads","changed","enabledOn","initFinished","postsInserted","search","history","state","searched","mode","currentSort","currentPage","getCurrentPage","processHash","popstate","resort","watchSettings","sortEntry","select","perBoardSort","navLinks","CatalogLinks","catalog","refreshFront","searchInput","setupSearch","onSearchInput","clearSearch","hideLabel","toggleHiddenThreads","selectRev","selectMode","selectSort","selectSize","lastLongOptions","lastLongInputs","lastLongThresholds","tRaw","hoverToggle","pagelist","pageNav","hat","addStyle","loaded","implementation","createDocument","appendChild","topNavPos","previousElementSibling","timeEl","liveThreadData","innerHeight","pagesNum","endNotice","threadsOnPage","buildStructure","notify","toggleHide","threadPosition","floor","threadsNumPerPage","quickFilterMD5","ThreadHiding","cycleSortType","types","options","option","selected","initFinishedFired","indexRefreshSeen","buildIndex","pushState","pageLoad","saveSort","saveLastLongThresholds","Number","isFinite","catalogReplies","hoverAdjust","setState","nCommands","userPageNav","buildCatalogReplies","scrollToIndex","hashCommands","paged","infinite","commands","leftover","command","pageBeforeSearch","oldpage","savePerBoard","buildPagelist","setupMode","setupSort","getPagesNum","sortedThreadIDs","getMaxPageNum","pagesRoot","maxPageNum","childElementCount","nextElementSibling","updateHideLabel","hiddenCount","liveThreadIDs","firstTime","notice","nTimeout","catalogJSON","reload","setType","stack","pages","parseThreadList","reduce","liveThreadDict","parsedThreads","results","filterResults","isOnTop","last_replies","isHiddenReply","buildThreads","withReplies","newThreads","opRoot","threadData","stringify","bumplimit","ext","imagelimit","sticky","closed","buildReplies","lastReplies","buildCatalogViews","catalogThreads","catalogThread","sizeCatalogViews","ratio","catalogReply","tmp_time","sortType","repliesAvailable","lastlong","iterable","r","omitted_posts","lastlongD","b","reverse","querySearch","sortOnTop","topThreads","bottomThreads","buildCatalog","nodesPerPage","offset","node0","buildCatalogPart","searching","query","keywords","RegExp","values","searchMatch","keyword","Index$1","catalogWatch","catalogSet","hasStorage","hiddenThreads","localStorage","setItem","getItem","catalogSave","subtree","attributeFilter","hiddenThreads2","hasOwn","rootPrevious","getElementById","separator","settingsHtml","class","changelog","issues","CSS","report","www","sub","css","variables","words","CustomCSS","rmStyle","passMessagePage","captchaFAQ","PassMessage","msg","PassMessagePage","hd","Report","Captcha","fit","getComputedStyle","visibility","resizeBy","form","fieldset","reason","submit","archiveSubmit","action","archiveResults","formData","success","PostSuccessful","_","SWYotsuba","hasIPCount","areMD5sDeferred","isOnePage","op","boardList","boardListBottom","styleSheet","psa","psaTop","searchBox","nav","replyContainer","captcha","bgColoredEl","doctype","is404","isIncomplete","isBoardlessPage","isAuxiliaryPage","isFileURL","initAuxiliary","navigate","scriptData","script","parseThreadMetadata","m","abbr","br","hasCORS","uidColor","uid","charCodeAt","isLinkified","testNativeExtension","Parser","postMenuIcon","transformBoardList","spacer","chr","nodeValue","devicePixelRatio","shortFilename","spoilerThumb","random","sameThread","threadURL","postURL","resto","filedeleted","unescape","since4pass","country","board_flag","country_name","flag_name","capcodeHighlight","parseJSONFile","tim","w","fsize","tn_h","tn_w","hasDownscale","m_img","parseCommentDisplay","html2","capcodeDescription","capcodePlural","capcodeLC","capcodeLong","Admin","Mod","postInfo","postLink","quoteLink","nameHtml","nameBlockContent","postNumContent","generatePostInfoHtml","fileURL","fileThumb","fileBlock","fileContent","loading","generateFileHtml","postClass","wholePost","imgClass","generateCatalogThreadHtml","highlights","SWTinyboard","disabledFeatures","detect","awaitBoard","boardFor","mounted","extra_files","preParsingFixes","broken","splitText","isNaN","infoNode","nameNode","isThumbExpanded","expanded","catalogPin","SW","tinyboard","yotsuba","FileInfo","oldInfo","format","formatString","outputNode","formatters","T","l","L","N","fullname","B","K","M","Time","zeroPad","formatterCache","formatter","Intl","DateTimeFormat","weekday","A","month","H","getHours","I","getMinutes","hour","hour12","formatToParts","find","P","S","getSeconds","y","Y","ThreadUpdater","beep","checkPostCount","timer","updateLink","scrollBG","setInterval","settings","intervalShortcut","outdateCount","fileIDs","checkpost","playBeep","seconds","parseInt","confirmed","limit","cur","Settings","klass","updateThreadStatus","ipCountEl","postObjects","unique_ips","postObject","deletedPosts","deletedFiles","unreadCount","unreadQYCount","firstPost","addSection","sauce","advanced","disableAll","defineProperty","openSection","sectionToOpen","SettingsPage","export","import","onImport","section","sections","hyphenatedTitle","scrollTop","warnings","cantSync","why","cantSet","ads","ad","addWarning","warning","addCheckboxes","containers","description","level","keyFS","fs","perProtocolSettings","hiddenPosts","hiddenNum","removeItem","Conf2","downloadExport","Blob","confirm","reader","FileReader","onload","loadSettings","readAsText","convertFrom","loadletter","prevKey","newKey","convertSettings","uniqueid","mod","openEmptyQR","openQR","openOptions","sageru","sjis","watch","unreadCountTo0","expandAllImages","expandImage","zero","nextPage","previousPage","nextThread","previousThread","expandThread","openThreadTab","openThread","nextReply","previousReply","Scrolling","Verbose","WatchedThreads","upgrade","corrupted","setD","addSauces","addCSS","compareString","padStart","val2","error1","uids","Moe","warosu","fgts","not4plebs","DesuStorage","record","rice","siteProperties","clear","selectFilter","ta","spellcheck","filterTypes","feature","listImageHost","customCSS","applyCSS","togglecss","itemsArchive","selectArchives","addArchiveTable","boardSelect","table","updateArchives","toLocaleString","tbody","archBoards","rows","boardOptions","row","addArchiveCell","td","setAttribute","saveSelectedArchive","selectedArchives","boardid","generateBoardList","img","tr","keybind","FappeTyme","fappe","lc","indicator","check","linkData","parseLink","parts","part","parseBoards","createSauceLink","missing","orig","parameter","skip","skipped","observer","node2","TURL","IMG","sMD5","hMD5","atob","semi","generateThumb","mozRequestFullScreen","webkitRequestFullScreen","ALLOW_KEYBOARD_INPUT","slideshow","frame","thumbs","current","menuButton","blank","start","stop","createSubEntries","postThumb","keydown","setHeight","candidate","parentElement","overflow","thumbImg","errorCB","elType","webm","mp4","ogv","pdf","oldID","newID","offsetTop","setupTimer","cleanupTimer","startTimer","checkTimer","complete","advance","toggleSlideshow","rotateLeft","rotateRight","rotate","dataRotate","transform","mozCancelFullScreen","webkitExitFullscreen","dim","margin","minHeight","containerWidth","containerHeight","minWidth","maxWidth","maxHeight","setDelay","delayLabel","delayInput","ordered_types","embed","catalogRemove","shouldFetchTitles","service","batchSize","flushTitles","events","services","preview","process","regExp","closeFloat","dragEmbed","lastEmbed","pointerEvents","queue","post2","link2","preload","hrefEsc","videoHeight","counter","prettyPrint","currentScript","hasOwnProperty","names","contentWindow","postMessage","element","onMessage","source","hotkey","notifications","toggleBoardList","toggleBarVisibility","postingIsEnabled","qr","notification","display","tags","sage","fileSubmit","toggleCustomCooldown","handleUrl","hl","kc","String","fromCharCode","code_tags","math_tags","sjis_tags","selStart","selectionStart","selEnd","selectionEnd","range","setSelectionRange","isSage","tab","replySelector","postEl","Cache","saveAPI","noCaptcha","captchas","getCount","neededRaw","haveCookie","submitCB","isOnlyQuotes","needed","prerequest","prerequested","cooldown","request","Replace","v2","lifetime","timeouts","prevNeeded","noscriptURL","recaptchaKey","auto","afterSetup","setupNoscript","setupJS","scrolling","textarea","render","widgetID","grecaptcha","sitekey","theme","cbNative","onRecaptchaLoaded","mutations","mutation","addedNodes","setupIFrame","setupTextArea","fixQRPosition","pasted","token","min_width","min_height","max_width","max_height","max_size","max_size_video","max_comment","max_width_video","max_height_video","max_duration_video","forcedAnon","mimeTypes","validExtension","typeFromExtension","jpg","jpeg","png","gif","swf","extensionFromType","initReady","origToggle","captchaVersion","prop","def","forced_anon","linkBot","getFile","drawFile","setFile","paste","dragOver","dropFile","generatePostableThreadsList","statusCheck","unhide","cleanNotifications","inBubble","bubbles","autohide","toggleSJIS","texPreviewShow","texPreviewHide","texPreview","wasOpen","setCustomCooldown","focusOverride","onclose","alert","connectionError","upstreamFaq","progress","openPost","isLocked","getSelection","postRange","Range","selectNode","rangeCount","insideCode","getRangeAt","compareBoundaryPoints","START_TO_START","setStartBefore","END_TO_END","setEndAfter","cloneContents","commonAncestorContainer","wasOnlyQuotes","caretPos","quotedText","characterCount","charCount","openError","getContext","drawImage","revokeObjectURL","handleFiles","dataTransfer","dropEffect","clipboardData","score","file2","kind","getAsFile","score2","pasteFF","pasteArea","bstr","Uint8Array","urlDefault","preventAutoPost","permission","prompt","fileButton","handleFile","nfiles","isText","pasting","openFileInput","fileInput","setNode","flagsInput","sjisToggle","texButton","drawButton","oekaki","draw","noFile","randomizeButton","randomizeName","restoreNameButton","restoreName","oekakiButton","fileRM","rmFile","urlButton","dumpButton","DataTransferItemList","persona","addFlag","country_flags","board_flags","filetag","forceSave","flashTag","require_subject","text_only","lock","MAX_FILE_SIZE","pwd","getPassword","upfile","responseType","withCredentials","onprogress","upload","isUploadFinished","currentCaptcha","challenge","unlock","connErr","errorCount","addDelay","mi","addMute","h1","lastPostToThread","waitForThread","attempts","deletion","maxDelay","isSetup","isCounting","categorize","secondsDeletion","mergeChange","scope","nCooldowns","elapsed","editFile","canvas","videoWidth","toBlob","snapshot","edit","FCX","oekakiCB","Tegaki","flatten","oekakiLatest","oekakiName","bg","onDone","onCancel","bgColor","removeEventListener","naturalWidth","onOpenImageLoaded","onDoneCb","resume","always","parseItem","regexMatch","eventPageRequest","draggable","dumpList","dismissErrors","rectEl","rectList","scrollLeft","showFileData","forced","updateComment","saveFilename","updateFilename","setComment","rmErrored","fileError","originalName","checkSize","rmMetadata","backgroundImage","readFile","canPlayType","onerror","checkDimensions","setThumbnail","cv","attr","newName","long","pasteText","dragStart","setDragImage","dragEnd","dragEnter","dragLeave","drop","oldIndex","newIndex","chrome","runtime","addListener","params","sendMessage","binary","headers","responseHeaderString","fallback","getAllResponseHeaders","gmOptions","method","overrideMimeType","xhr","ArrayBuffer","responseText","responseHeaders","onabort","GM","xmlHttpRequest","contentType","contentDisposition","mime","Request","prototype","headerName","header","gmReq","ontimeout","cbFail","origins","CrossOrigin$1","fc","HTMLFormElement","FormData","fd","pageXHR","wrappedJSObject","XMLHttpRequest","XPCNativeWrapper","testCORB","ajaxPage","setRequestHeader","warn","send","requestID","ajaxPageInit","DOMParser","parseFromString","bucket","reqs","testf","addCSP","policy","httpEquiv","path","evaluate","singleNodeValue","classNames","createTextNode","createDocumentFragment","insertBefore","replaceChild","properties2","globalThis","extension","cloneInto","defaultView","cancelable","navigator","userAgent","GM_info","unsafeConstructors","unsafeWindow","obj2","openInTab","GM_openInTab","taskQueue","execTask","mozHasAudio","webkitAudioDecodedByteCount","luma","rgb","oneItemSugar","oldValue","local","storage","onChanged","area","newValue","crxWorking","getManifest","crxWarningShown","lastError","result2","exceedsQuota","QUOTA_BYTES_PER_ITEM","setArea","setSync","done","deleteValue","BroadcastChannel","GM_addValueChangeListener","GM_deleteValue","getValue","GM_getValue","listValues","GM_listValues","setValue","GM_setValue","key2","remote","onChange","getSync","syncChannel","catch","$$1","IDs","handleQuotes","qPost","Get$1","filters","isstring","excludes","mask","only","noti","filterObj","filtersForType","boardsRaw","parseBoardsMemo","siteFilter","boardID2","hideable","filtersOrMap","isArray","stopImmediatePropagation","catalogData","catalogParse","catalogViewNative","valueF","v","addFilter","re","removeFilters","res","flat","escape","showFilters","tl","textLength","quickFilterCB","makeFilter","Site","defaultProperties","canonical","parseURL","catalogURL","catalogLink","useCatalog","setLinks","bottomBoardList","tail","indexOptions","externalParse","externalList","external","jsonIndex","nativeCatalog","noticesRoot","setBarPosition","box","barFixedToggler","headerToggler","scrollHeaderToggler","barPositionToggler","linkJustifyToggler","customNavToggler","footerToggler","shortcutToggler","editCustomNav","menuToggle","toggleBarFixed","toggleBarPosition","toggleHideBarOnScroll","toggleLinkJustify","toggleFooterVisibility","toggleShortcutIcons","toggleCustomNav","setBarFixed","setHideBarOnScroll","setBarVisibility","setLinkJustify","setShortcutIcons","setFooterVisibility","createNotification","setBoardList","generateFullBoardList","footer","absbot","cloneTopNav","cs","enableDesktopNotifications","shortcuts","btn","setCustomNav","fullBoardList","mapCustomNavigation","m0","m1","m2","urlV","urlIC","custom","showBoardList","centered","fixed","hideBarOnScroll","offsetY","pageYOffset","previousOffset","cust","down","offsetParent","headRect","rmShortcut","authorize","disable","requestPermission","Header$1","opacity","responses","nloaded","fail","archiveUIDs","dest","Developer","Verified","https","reports","alternative","Redirect$1","ImageHover","scale","ImageLoader","prefetchEnabled","prefetchAll","replaceVideo","prefetch","poster","isPrefetched","qpClone","Metadata","readInt","RevealSpoilers","regString","space","saved","endNode","word","part1","part2","makeRange","makeLink","startNode","startOffset","endOffset","createRange","setStart","setEnd","encodedDomain","startContainer","charAt","endContainer","extractContents","insertNode","ArchiveLink","typeParam","isSearch","CopyTextLink","copy","execCommand","DeleteLink","fileEl","postEntry","linkText","fileEntry","menuText","fileOnly","onlyimgdel","resDoc","DownloadLink","ReportLink","dims","AntiAutoplay","processVideo","Banner","banner","setTitle","bannerCnt","choices","contentEditable","Flash","SWFEmbed","tid","Fourchan","initBoard","pre","prettyPrintOne","MathJax","Hub","Queue","loadMathJax","math","clickable_ids","idClick","wbrs","wbr","IDColor","ids","compute","color","backgroundColor","IDHighlight","IDPostCount","ModContact","moved","specific","template","moveNote","Manager","qa","NormalizeURL","replaceState","PostJumper","makeButtons","addListeners","addButtons","buttonClick","toJumper","dir","jumper","jumper2","fromJumper","prevPos","destPos","PSA","announcement","PSAHiding","RemoveSpoilers","unspoiler","ThreadLinks","Tinyboard","ajaxComplete","responseJSON","noko","originalNoko","tb_settings","always_noko_replies","MarkNewIPs","markNew","markOld","ThreadStats","postIndex","statsHTML","statsTitle","showPurgePos","postCountEl","fileCountEl","pageCountEl","fetchPage","showPage","onThreadsLoad","purgePos","hasWarning","lastPageUpdate","retry","PassLink","styleSelector","passLink","QuoteInline","qiQuote","findRoot","isBacklink","qroot","forwarded","QuoteBacklink","bottomBacklinks","firstNode","secondNode","markYours","getContainer","backlinkContainer","QuoteCT","QuoteOP","Quotify","parseArchivelink","deadlink","parseDeadlink","fixDeadlink","quoteID","fetchable","green","Polyfill","mozMatchesSelector","webkitMatchesSelector","HTMLCanvasElement","encoderOptions","toDataURL","ui8a","RestoreDeletedFromArchive","restore","nrRestored","archivePosts","newPost","menuEntry","frameElement","buildDate","freeze","writable","expectInitFinished","mountedCB","isMounted","mountedCBs","error2","fromCharCode0","boardTitle","previousversion","isFirstRun","initFeatures","threadArchived","initStyle","features","mobileLink","innerWidth","bgColorStyle","keyboard","setClass","mainStyleSheet","styleSheets","knownStyles","setStyle","backgroundRepeat","backgroundPosition","initCatalog","initThread","addThreadsObserver","addThreads","addPostsObserver","addPosts","parseThreads","callbackNodesDB","threadRoots","boardObj","postRoots","unshift","parsePosts","postRoot","records","threadsRM","anyRemoved","removedNodes","addCatalogThreadsObserver","addCatalogThreads","parseCatalogThreads","softTask","parseError","reportLink","logs","lines","fork","details","addDetails","newIssueMaxLength","newIssue","scriptHandler","thisPageIsLegit","Main$1"],"mappings":"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ACA,GAEF,qBAAsB,EACpB,EACA,qCACA,GAEF,oBAAqB,EACnB,EACA,qCACA,GAEF,cAAe,EACb,EACA,iDACA,GAEF,eAAgB,EACd,EACA,mCACA,GAEF,YAAa,EACX,EACA,wFACA;AAEF,gBAAiB,EACf,EACA,0DACA,IAIJC,WAAc,CACZ,iBAAkB,EAChB,EACA,6FAEF,eAAgB,EACd,EACA,iDAEF,eAAgB,EACd,EACA,uDACA,GAEF,2BAA4B,EAC1B,EACA,kEACA,GAEF,iBAAkB,EAChB,EACA,yDAEF,cAAe,EACb,EACA,2DAEF,0BAA2B,EACzB,EACA,4DAEF,2BAA4B,EAC1B,EACA,6DACA,GAEF,uBAAwB,EACtB,EACA,qEACA,GAEF,wBAAyB,EACvB,EACA;AAEF,eAAgB,EACd,EACA,kCAEF,oBAAqB,EACnB,EACA,mDACA,GAEF,sBAAuB,EACrB,EACA,8CACA,GAEF,iBAAkB,EAChB,EACA,iIACA,GAEF,8BAA+B,EAC7B,EACA,sFAEF,iBAAkB,EAChB,EACA,kEAEF,uBAAwB,EACtB,EACA,iDACA,GAEF,4BAA6B,EAC3B,EACA,8DACA,GAEF,eAAgB,EACd,EACA,qEAEF,gBAAiB,EACf,EACA;AAEF,oBAAqB,EACnB,EACA,oDACA,IAIJ,uBAAwB,CACtB,cAAe,EACb,EACA,wEAEF,gBAAiB,EACf,EACA,iDACA,GAEF,eAAgB,EACd,EACA,mDACA,GAEF,uBAAwB,EACtB,EACA,oGACA,GAEF,mBAAoB,EAClB,EACA,wCACA,GAEF,mBAAoB,EAClB,EACA,kEACA,GAEF,qBAAsB,EACpB,EACA,gFACA,GAEF,oCAAqC,EACnC,EACA,yEACA,GAEF,uBAAwB,EACtB,EACA,iEACA;AAEFC,SAAY,EACV,EACA,oDACA,GAEF,gCAAiC,EAC/B,EACA,oEACA,GAEF,oBAAqB,EACnB,EACA,uEACA,GAEF,6BAA8B,EAC5B,EACA,6DACA,GAEF,yBAA0B,EACxB,EACA,0EAEF,YAAa,EACX,EACA,2DAIJ,cAAe,CACb,kBAAmB,EACjB,EACA,wBAEF,eAAgB,EACd,EACA,2BA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"}